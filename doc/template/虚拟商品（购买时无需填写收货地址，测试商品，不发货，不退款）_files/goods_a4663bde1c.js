window.Utils=window.Utils||{},$.extend(window.Utils,{getWxInfo:function(){var e=window.navigator.userAgent,t=e.match(/MicroMessenger\/(\d+(\.\d+)*)/),i=null!==t&&t.length,n=i?parseFloat(t[1]):0;return{isWx:i,wxVersion:n}}}),define("wap/components/util/wx_info",function(){}),define("text!wap/showcase/goods/templates/goodsCount.html",[],function(){return'<% if ( data.day > 0 ) { %>\n<i class="mc-num-days"><%- (+data.day) %></i><span class="mc-text">天</span>\n<% } %>\n<% if ( data.day > 0 || data.hour > 0 ) { %>\n<i class="mc-num-hours"><%- (+data.hour) %></i><span class="mc-text">小时</span>\n<% } %>\n<i class="mc-num-minutes"><%- data.min %></i><span class="mc-text">分</span>\n<i class="mc-num-seconds"><%- data.sec %></i><span class="mc-text">秒</span>'}),define("zenjs/util/count_down",[],function(){function e(e){return 10>e?"0"+e:""+e}function t(t,i,n,s,o){var a=0,r=0,l=0,d=0,c=0,h="",u=new Date,p=t.getTime()-u.getTime();return 0>=p?(o.stop(),i({seconds:0,text:"00:00:000",hour:0,min:0,sec:0,msec:0,day:0},{day:e(0),hour:e(0),min:e(0),sec:e(0),msec:e(0)}),void n()):(p>=864e5&&(a=Math.floor(p/864e5),p-=864e5*a,h+=a+"天"),p>=36e5&&(r=Math.floor(p/36e5),p-=36e5*r,h+=r+"小时"),p>=6e4?(l=Math.floor(p/6e4)%60,d=Math.floor(p/1e3)%60,c=p%1e3):(l=0,d=Math.floor(p/1e3),c=p%1e3),10>l&&(h+="0"),h+=l+"分",10>d&&(h+="0"),h+=d+"秒",10>c?h+="00":100>c&&(h+="0"),"second"!=s&&(h+=c),void i({text:h,hour:r,min:l,sec:d,msec:c,day:a},{day:e(a),hour:e(r),min:e(l),sec:e(d),msec:e(c)}))}function i(){this.tid=null,this.startTime=null}var n=function(){};return i.prototype={run:function(e){function i(){l.tid=setTimeout(i,"second"==e.step?1e3:50),t(r,o,a,e.step,l)}this.startTime||(this.startTime=Date.now());var s=e.seconds||0,o=e.onTimeChange||n,a=e.onTimeChangeEnd||n;this.startTime+=1e3*s;var r=new Date(this.startTime),l=this;i()},stop:function(){clearTimeout(this.tid)}},i}),define("zenjs/util/number",[],function(){var e={makeRandomString:function(e){var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";e=e||10;for(var n=0;e>n;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}};return e}),define("bower_components/pop/pop",["require","zenjs/events","zenjs/util/number"],function(e){var t=function(){},i=e("zenjs/events"),n=e("zenjs/util/number");window.zenjs=window.zenjs||{};var s=i.extend({init:function(e){this._window=$(window);var i=n.makeRandomString();$("body").append('<div id="'+i+'"                 style="display:none; height: 100%;                 position: fixed; top: 0; left: 0; right: 0;                background-color: rgba(0, 0, 0, '+(e.transparent||".9")+');z-index:1000;opacity:0;transition: opacity ease 0.2s;"></div>'),this.nBg=$("#"+i),this.nBg.on("click",$.proxy(function(){this.isCanNotHide||this.hide()},this));var s=n.makeRandomString();$("body").append('<div id="'+s+'" class="'+(e.className||"")+'" style="overflow:hidden;visibility: hidden;"></div>'),this.nPopContainer=$("#"+s),this.nPopContainer.hide(),this.nPopContainer.css({opacity:0,position:"absolute","z-index":1e3}),e.contentViewClass&&(this.contentViewClass=e.contentViewClass,this.contentViewOptions=$.extend({el:this.nPopContainer},e.contentViewOptions||{}),this.contentView=new this.contentViewClass($.extend({onHide:$.proxy(this.hide,this)},this.contentViewOptions)),this.contentView.onHide=$.proxy(this.hide,this)),this.animationTime=e.animationTime||300,this.isCanNotHide=e.isCanNotHide,this.doNotRemoveOnHide=e.doNotRemoveOnHide||!1,this.onShow=e.onShow||t,this.onHide=e.onHide||t,this.onFinishHide=e.onFinishHide||t,this.html=e.html},render:function(e){return this.renderOptions=e||{},this.contentViewClass?this.contentView.render(this.renderOptions):this.html&&this.nPopContainer.html(this.html),this},show:function(){return this.nBg.show().css({opacity:"1","transition-property":"none"}),this.nPopContainer.show(),this.trigger("pop:show:before"),setTimeout($.proxy(function(){this.trigger("pop:show:after"),this.nPopContainer.show().css("visibility","visible"),this._doShow&&this._doShow(),this.onShow()},this),200),this},hide:function(e){e=e||{};var t=e.doNotRemove||this.doNotRemoveOnHide||!1;this._doHide&&this._doHide(),this.trigger("pop:hide:before"),setTimeout($.proxy(function(){this.nBg.css({opacity:0,"transition-property":"opacity"}),this.trigger("pop:hide:after"),setTimeout($.proxy(function(){this.nBg.hide(),this.nPopContainer.hide(),t||this.destroy()},this),200)},this),this.animationTime),this.onHide()},destroy:function(){return this.nPopContainer.remove(),this.nBg.remove(),this.contentView&&this.contentView.remove(),this}});return s}),define("bower_components/pop/pop_forbid_scroll",["require","./pop"],function(e){window.zenjs=window.zenjs||{};var t=e("./pop"),i=t.extend({init:function(e){this._super(e),this.on("pop:show:before",$.proxy(this.onBeforePopShow,this)),this.on("pop:show:after",$.proxy(this.onAfterPopShow,this)),this.on("pop:hide:after",$.proxy(this.onAfterPopHide,this))},onBeforePopShow:function(){this.top=this._window.scrollTop()},onAfterPopShow:function(){this._window.scrollTop(0),this.startShow()},onAfterPopHide:function(){var e,t=function(i){return e!==this._window.scrollTop()&&i>0?(this._window.scrollTop(e),void setTimeout($.proxy(t,this,i-1))):void setTimeout($.proxy(this.onFinishHide,this),50)};return function(){this.startHide(),e=this.top,this._window.scrollTop(e),$.proxy(t,this)(2),setTimeout($.proxy(function(){window.zenjs.popList.length<1&&$("html").css("position",this.htmlPosition)},this),200)}}(),startShow:function(){var e=window.zenjs.popList;if(e||(e=window.zenjs.popList=[]),0===e.length){var t=$("body"),i=$("html");this.htmlPosition=i.css("position"),i.css("position","relative"),this.bodyCss=(t.prop("style")||{}).cssText,this.htmlCss=(i.prop("style")||{}).cssText,$("body,html").css({overflow:"hidden",height:this._window.height()})}e.indexOf(this)<0&&e.push(this)},startHide:function(){var e=window.zenjs.popList,t=e.indexOf(this);t>-1&&e.splice(t,1),e.length<1&&($("html").attr("style",this.htmlCss||""),$("body").attr("style",this.bodyCss||""))}});return i}),define("bower_components/pop/popup",["require","./pop_forbid_scroll"],function(e){var t=e("./pop_forbid_scroll"),i=t.extend({init:function(e){this._super(e),this.onClickBg=e.onClickBg||function(){},this.onBeforePopupShow=e.onBeforePopupShow||function(){},this.onAfterPopupHide=e.onAfterPopupHide||function(){},this.nPopContainer.css(_.extend({left:0,right:0,bottom:0,background:"white"},e.containerCss||{})),this.nPopContainer.css("opacity","0"),this.nPopContainer.on("focus","input, textarea",function(e){var t=$(this),i=$(window),n=i.scrollTop(),s=t.offset().top;(0>s-n||s-n>100)&&setTimeout(function(){var e=s-70;i.scrollTop(e)},150)})},_doShow:function(){this.contentView&&this.contentView.height?this.height=this.contentView.height():this.contentView||(this.height=this.nPopContainer.height()),this.onBeforePopupShow(),$(".js-close").click($.proxy(function(e){this.hide()},this)),this.nPopContainer.addClass("popup"),this.nPopContainer.css({height:this.height+"px",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}),this.bodyPadding=$("body").css("padding"),$("body").css("padding","0px"),setTimeout($.proxy(function(){this.nPopContainer.css({transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-webkit-transition":"all ease "+this.animationTime+"ms",transition:"all ease "+this.animationTime+"ms",opacity:1})},this)),setTimeout($.proxy(function(){this.contentView&&this.contentView.onAfterPopupShow&&this.contentView.onAfterPopupShow()},this),this.animationTime)},_doHide:function(e){this.nPopContainer.css({transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)",opacity:0}),setTimeout($.proxy(function(){$("body").css("padding",this.bodyPadding),this.onAfterPopupHide()},this),this.animationTime)}});return i}),define("zenjs/uploader/photo_uploader",["require","bower_components/ajax/ajax","../util/ua"],function(e){e("bower_components/ajax/ajax");var t=e("../util/ua"),i=function(){},n=window._global,s=function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var e=document.createElement("input");return e.type="file",!e.disabled},o=function(){var e="youzanwsc"===n.platform&&n.platform_version<="3.0.0",i=t.getIOSVersion()>=9;return!(i&&e)},a=Backbone.View.extend({initialize:function(e){this.nInput=this.$("input"),this.nUploader=this.$("button"),this.save_to_shop=e.save_to_shop||!1,this.onValidUpload=e.onValidUpload||function(){return!0},this.onStartReadFile=e.onStartReadFile||i,this.onFinishReadFile=e.onFinishReadFile||i,this.onBeforeUpload=e.onBeforeUpload||i,this.onUploadSuccess=e.onUploadSuccess||i,this.onUploadError=e.onUploadError||i},events:{"click input":"onInputClicked","change input":"onFileChanged"},render:function(e){s()||(this.nInput.attr("disabled","disabled"),this.nUploader.css("padding-left","10px").html("您的浏览器不支持图片上传").attr("disabled","disabled")),o()||this.nInput.on("click",function(e){e.preventDefault(),motify.log("暂不支持图片上传功能")})},onInputClicked:function(e){e.target.value=""},onFileChanged:function(e){var t=this,i=e.target.files;_.map(i,function(e,i,n){if(e.size>5242880)return void motify.log("图片太大啦~");if(t.onValidUpload({file:e})){t.onStartReadFile({file:e});var s=new FileReader;s.onload=function(i){t.onFinishReadFile({src:i.target.result,file:e})},s.readAsDataURL(e),t.getUploadToken(e)}})},getUploadToken:function(e){var t=this;if(this.uptoken)return void this.doUploadPhoto(e);var i=window._global.url.materials+"/dock/token.json";"https:"===location.protocol&&(i=i.replace("http://","https://")),$._ajax({url:i,type:"post",dataType:"json",timeout:5e3,cache:!1,data:{scope:n.js.qn_public,kdt_id:n.kdt_id||""},xhrFields:{withCredentials:!0},beforeSend:function(){},success:function(i){t.uptoken=i.data.uptoken,t.doUploadPhoto(e)},error:function(e,t,i){},complete:function(e,t){}})},doUploadPhoto:function(e){var t=this,i=new FormData;i.append("token",this.uptoken),i.append("file",e),this.save_to_shop===!1&&i.append("x:skip_save",1);var s=e.name.split("."),o="";s.length>1&&(o="."+s[s.length-1]),i.append("x:ext",o),$._ajax({url:"//up.qbox.me",type:"post",data:i,dataType:"json",processData:!1,contentType:!1,timeout:8e4,beforeSend:function(){t.onBeforeUpload({file:e}),t.nInput.data("uploaded","false")},success:function(i){var s=n.url.imgqn+"/"+i.data.attachment_file;t.onUploadSuccess({url:s,file:e,data:i.data}),t.nInput.data("value",s),t.nInput.data("uploaded","true")},error:function(i,n,s){t.onUploadError({file:e}),"timeout"===n&&motify.log("网络环境不佳<br/>请稍后重试")},complete:function(e,t){}})}});return a}),window.Utils=window.Utils||{},$.extend(window.Utils,{validMobile:function(e){return e=""+e,/^((\+86)|(86))?(1)\d{10}$/.test(e)},validPhone:function(e){return e=""+e,/^0[0-9\-]{10,13}$/.test(e)},validNumber:function(e){return/^\d+$/.test(e)},validEmail:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},validPostalCode:function(e){return e=""+e,/^\d{6}$/.test(e)}}),define("wap/components/util/valid",function(){}),define("text!wap/showcase/sku/templates/message.html",[],function(){return'<%\n    var PLACEHOLDER_MAP = {\n        id_no: \'填写中国大陆18位身份证号\',\n        text: \'\'\n    };\n%>\n\n<% if(messages.length !== 0) {%>\n    <div class=\'sku-message\'>\n        <% for (var j = 0, len = messages.length; j < len; j++) { %>\n        <dl class="clearfix">\n            <dt class="pull-left">\n                <label for="ipt-<%=j %>"><% if (messages[j].required == \'1\') { %><sup class="required">*</sup><% } %><%=messages[j].name %></label>\n            </dt>\n            <dd class="comment-wrapper clearfix">\n                <% if (messages[j].multiple == \'0\') { %>\n                    <% if (messages[j].type === \'image\') { %>\n                        <input data-valid-type="<%=messages[j].type %>"\n                            <% if (isKdtApp) { %>multiple="multiple"<% } %>\n                            <% if (messages[j].required == \'1\') { %>required<% } %>\n                            tabindex="<%=j + 1 %>" id="ipt-<%=j %>"\n                            name="message_<%=j %>"\n                            type="file"\n                            capture="camera"\n                            accept="image/*"\n                            class="js-message photo-input"\n                        >\n                        <button class="btn btn-white image-input-trigger"><span class="take-photo">拍照</span>或<span class="select-photo">选择照片</span></button>\n                        <div class=\'image-input-show hide\'>\n                            <img />\n                            <span class="img-tip">（仅限一张）</span>\n                        </div>\n                    <% } else { %>\n                        <input placeholder="<%= PLACEHOLDER_MAP[messages[j].type] || \'\' %>"\n                            data-valid-type="<%=messages[j].type %>"\n                            <% if (messages[j].required == \'1\') { %>required<% } %>\n                            tabindex="<%=j + 1 %>"\n                            id="ipt-<%=j %>"\n                            name="message_<%=j %>"\n                            type="<%= (\'id_no\' === messages[j].type) ? \'text\' : messages[j].type %>" data-type="<%=messages[j].type %>"\n                            class="txt js-message font-size-14"\n                            <% if (\'id_no\' === messages[j].type && id_no.length > 0) { %>value="<%=id_no %>"<% } %>\n                        >\n                    <% } %>\n                <% } else { %>\n                    <textarea data-valid-type="<%=messages[j].type %>"\n                        <% if (messages[j].required == \'1\') { %>required<% } %>\n                        tabindex="<%=j + 1 %>"\n                        id="ipt-<%=j %>"\n                        name="message_<%=j %>"\n                        cols="32"\n                        rows="1"\n                        class="txta js-message font-size-14"></textarea>\n                <% } %>\n            </dd>\n        </dl>\n        <% } %>\n    </div>\n<% } %>\n'}),function(e){var t;e.localStorage;try{var i=new Date;try{localStorage.setItem(i,i)}catch(n){if(22===n.code)throw"localstorage define error"}var s=localStorage.getItem(i)==i;if(localStorage.removeItem(i),!s)throw"localstorage define error";if("FUNCTION"!=(typeof localStorage.clear).toUpperCase())throw"localstorage define error";t=localStorage}catch(n){var o=function(){return null};t={getItem:o,setItem:o,removeItem:o,clear:o}}"function"==typeof define&&define.amd&&define("zenjs/util/local_storage",[],function(){return t}),e.YZLocalStorage=t}(window),define("wap/showcase/sku/views/message",["require","zenjs/uploader/photo_uploader","wap/components/util/valid","text!wap/showcase/sku/templates/message.html","zenjs/util/ua","zenjs/util/local_storage"],function(e){var t=e("zenjs/uploader/photo_uploader"),i=(e("wap/components/util/valid"),e("text!wap/showcase/sku/templates/message.html")),n=e("zenjs/util/ua"),s=e("zenjs/util/local_storage"),o=n.isIOS(),a="youzanwsc"===window._global.platform||"youzanwxd"===window._global.platform,r=Backbone.View.extend({template:_.template(i),initialize:function(e){this.messages=this.options.messages||[]},render:function(){this.$el.html(this.template({messages:this.messages,id_no:s.getItem("id_no")||"",isIOS:o,isKdtApp:a})),0===this.messages.length&&this.$el.hide();var e=this.$(".photo-input");return this.photoUploaders=[],e.each(_(function(e,i){var n=$(i).parent(),s=n.find("img"),o=n.find(".image-input-show"),a=n.find("button"),r=new t({el:n,onFinishReadFile:function(e){o.removeClass("hide"),s.attr("src",e.src)},onBeforeUpload:function(){a.html("正在上传...")},onUploadSuccess:function(e){motify.log("上传成功"),s.attr("src",e.url+"!100x100.jpg"),a.html('<span class="take-photo">重拍</span>或<span class="select-photo">重新选择照片</span>')},onUploadError:function(){a.html("重新上传")}}).render();this.photoUploaders.push(r)}).bind(this)),o||this.$el.find("input[type=date], input[type=time]").on("mouseover mousedown mouseup select click dblclick touchstart touchmove touchend touchcancel",function(e){e.stopPropagation()}),this},validate:function(e){for(var t,i,n,s,o=this,a=this.messages,r=0,l=a.length;l>r;r++){if(t="message_"+r,i=$.trim(e[t]),n=a[r],_.isEmpty(i)){if("1"==n.required)return o.$el.find("#ipt-"+r).focus(),"image"==n.type?motify.log("请上传 "+n.name+"。"):motify.log("请填写 "+n.name+"。"),!1}else{if("image"==n.type&&(s=o.$el.find("#ipt-"+r).data("uploaded"),"false"==s||!s))return motify.log("图片还在上传中，请稍等。。"),!1;if("tel"==n.type&&!Utils.validNumber(i))return o.$el.find("#ipt-"+r).focus(),motify.log("请填写正确的"+n.name+"。"),!1;if("email"==n.type&&!Utils.validEmail(i))return o.$el.find("#ipt-"+r).focus(),motify.log("请填写正确的"+n.name+"。"),!1;if("id_no"==n.type&&(i.length<15||i.length>18))return o.$el.find("#ipt-"+r).focus(),motify.log("请填写正确的"+n.name+"。"),!1}if(i.length>200)return motify.log(n.name+" 写的太多了<br/>不要超过200字"),!1}return!0},getData:function(){var e={};return this.$("dl .js-message").each(function(t,i){if("file"==i.type)var n=$(i).data("value");e[i.name]=n||i.value||"","id_no"===$(i).data("type")&&s.setItem("id_no",$(i).val())}),this.validate(e)?e:null}});return r}),define("text!wap/showcase/goods/templates/present_sku.html",[],function(){return'\n<div class="adv-opts layout-content">\n    <div class="goods-models js-sku-views block block-list border-top-0">\n    </div>\n    <div class="confirm-action content-foot">\n        <a href="javascript:;" class="js-sku-get-present btn btn-block btn-next btn-green">领取赠品</a>\n    </div>\n</div>\n'}),define("wap/showcase/goods/views/present_sku",["wap/showcase/sku/views/message","text!wap/showcase/goods/templates/present_sku.html"],function(e,t){return Backbone.View.extend({events:{"click .js-sku-get-present":"_onGetPresentClicked","click .js-cancel":"_onCancelClicked"},initialize:function(e){e=e||{},this.messages=e.messages||[],this.onHide=e.onHide||function(){},this.onGetPresentClicked=e.onGetPresentClicked},render:function(){return this.$el.html(t),this.nSkuContainer=this.$(".js-sku-views"),this.messageView=new e({messages:this.messages,className:"block-item block-item-messages"}),this.nSkuContainer.append(this.messageView.render().el),this},_onGetPresentClicked:function(){var e=this.messageView.getData();e&&this.onGetPresentClicked({postData:e})},_onCancelClicked:function(e){this.onHide()}})}),define("bower_components/aes/aes",["require","exports","module"],function(e,t,i){var n=n||function(e,t){var i={},n=i.lib={},s=function(){},o=n.Base={extend:function(e){s.prototype=this;var t=new s;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var s=0;e>s;s++)t[n+s>>>2]|=(i[s>>>2]>>>24-8*(s%4)&255)<<24-8*((n+s)%4);else if(65535<i.length)for(s=0;e>s;s+=4)t[n+s>>>2]=i[s>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;t>n;n+=4)i.push(4294967296*e.random()|0);return new a.init(i,t)}}),r=i.enc={},l=r.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++){var s=t[n>>>2]>>>24-8*(n%4)&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new a.init(i,t/2)}},d=r.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-8*(n%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new a.init(i,t)}},c=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,s=i.sigBytes,o=this.blockSize,r=s/(4*o),r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0);if(t=r*o,s=e.min(4*t,s),t){for(var l=0;t>l;l+=o)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=s}return new a.init(l,s)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}});var u=i.algo={};return i}(Math);!function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var s=0;i>s;s+=3)for(var o=(t[s>>>2]>>>24-8*(s%4)&255)<<16|(t[s+1>>>2]>>>24-8*((s+1)%4)&255)<<8|t[s+2>>>2]>>>24-8*((s+2)%4)&255,a=0;4>a&&i>s+.75*a;a++)e.push(n.charAt(o>>>6*(3-a)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var i=e.length,n=this._map,s=n.charAt(64);s&&(s=e.indexOf(s),-1!=s&&(i=s));for(var s=[],o=0,a=0;i>a;a++)if(a%4){var r=n.indexOf(e.charAt(a-1))<<2*(a%4),l=n.indexOf(e.charAt(a))>>>6-2*(a%4);s[o>>>2]|=(r|l)<<24-8*(o%4),o++}return t.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,i,n,s,o,a){return e=e+(t&i|~t&n)+s+a,(e<<o|e>>>32-o)+t}function i(e,t,i,n,s,o,a){return e=e+(t&n|i&~n)+s+a,(e<<o|e>>>32-o)+t}function s(e,t,i,n,s,o,a){return e=e+(t^i^n)+s+a,(e<<o|e>>>32-o)+t}function o(e,t,i,n,s,o,a){return e=e+(i^(t|~n))+s+a,(e<<o|e>>>32-o)+t}for(var a=n,r=a.lib,l=r.WordArray,d=r.Hasher,r=a.algo,c=[],h=0;64>h;h++)c[h]=4294967296*e.abs(e.sin(h+1))|0;r=r.MD5=d.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var a=0;16>a;a++){var r=n+a,l=e[r];e[r]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var a=this._hash.words,r=e[n+0],l=e[n+1],d=e[n+2],h=e[n+3],u=e[n+4],p=e[n+5],f=e[n+6],m=e[n+7],g=e[n+8],w=e[n+9],v=e[n+10],y=e[n+11],_=e[n+12],b=e[n+13],x=e[n+14],k=e[n+15],j=a[0],C=a[1],F=a[2],$=a[3],j=t(j,C,F,$,r,7,c[0]),$=t($,j,C,F,l,12,c[1]),F=t(F,$,j,C,d,17,c[2]),C=t(C,F,$,j,h,22,c[3]),j=t(j,C,F,$,u,7,c[4]),$=t($,j,C,F,p,12,c[5]),F=t(F,$,j,C,f,17,c[6]),C=t(C,F,$,j,m,22,c[7]),j=t(j,C,F,$,g,7,c[8]),$=t($,j,C,F,w,12,c[9]),F=t(F,$,j,C,v,17,c[10]),C=t(C,F,$,j,y,22,c[11]),j=t(j,C,F,$,_,7,c[12]),$=t($,j,C,F,b,12,c[13]),F=t(F,$,j,C,x,17,c[14]),C=t(C,F,$,j,k,22,c[15]),j=i(j,C,F,$,l,5,c[16]),$=i($,j,C,F,f,9,c[17]),F=i(F,$,j,C,y,14,c[18]),C=i(C,F,$,j,r,20,c[19]),j=i(j,C,F,$,p,5,c[20]),$=i($,j,C,F,v,9,c[21]),F=i(F,$,j,C,k,14,c[22]),C=i(C,F,$,j,u,20,c[23]),j=i(j,C,F,$,w,5,c[24]),$=i($,j,C,F,x,9,c[25]),F=i(F,$,j,C,h,14,c[26]),C=i(C,F,$,j,g,20,c[27]),j=i(j,C,F,$,b,5,c[28]),$=i($,j,C,F,d,9,c[29]),F=i(F,$,j,C,m,14,c[30]),C=i(C,F,$,j,_,20,c[31]),j=s(j,C,F,$,p,4,c[32]),$=s($,j,C,F,g,11,c[33]),F=s(F,$,j,C,y,16,c[34]),C=s(C,F,$,j,x,23,c[35]),j=s(j,C,F,$,l,4,c[36]),$=s($,j,C,F,u,11,c[37]),F=s(F,$,j,C,m,16,c[38]),C=s(C,F,$,j,v,23,c[39]),j=s(j,C,F,$,b,4,c[40]),$=s($,j,C,F,r,11,c[41]),F=s(F,$,j,C,h,16,c[42]),C=s(C,F,$,j,f,23,c[43]),j=s(j,C,F,$,w,4,c[44]),$=s($,j,C,F,_,11,c[45]),F=s(F,$,j,C,k,16,c[46]),C=s(C,F,$,j,d,23,c[47]),j=o(j,C,F,$,r,6,c[48]),$=o($,j,C,F,m,10,c[49]),F=o(F,$,j,C,x,15,c[50]),C=o(C,F,$,j,p,21,c[51]),j=o(j,C,F,$,_,6,c[52]),$=o($,j,C,F,h,10,c[53]),F=o(F,$,j,C,v,15,c[54]),C=o(C,F,$,j,l,21,c[55]),j=o(j,C,F,$,g,6,c[56]),$=o($,j,C,F,k,10,c[57]),F=o(F,$,j,C,f,15,c[58]),C=o(C,F,$,j,b,21,c[59]),j=o(j,C,F,$,u,6,c[60]),$=o($,j,C,F,y,10,c[61]),F=o(F,$,j,C,d,15,c[62]),C=o(C,F,$,j,w,21,c[63]);a[0]=a[0]+j|0,a[1]=a[1]+C|0,a[2]=a[2]+F|0,a[3]=a[3]+$|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,s=8*t.sigBytes;i[s>>>5]|=128<<24-s%32;var o=e.floor(n/4294967296);for(i[(s+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[(s+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),t=this._hash,i=t.words,n=0;4>n;n++)s=i[n],i[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);return t},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=d._createHelper(r),a.HmacMD5=d._createHmacHelper(r)}(Math),function(){var e=n,t=e.lib,i=t.Base,s=t.WordArray,t=e.algo,o=t.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=i.hasher.create(),o=s.create(),a=o.words,r=i.keySize,i=i.iterations;a.length<r;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var d=1;i>d;d++)l=n.finalize(l),n.reset();o.concat(l)}return o.sigBytes=4*r,o}});e.EvpKDF=function(e,t,i){return o.create(i).compute(e,t)}}(),n.lib.Cipher||function(e){var t=n,i=t.lib,s=i.Base,o=i.WordArray,a=i.BufferedBlockAlgorithm,r=t.enc.Base64,l=t.algo.EvpKDF,d=i.Cipher=a.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,i,n){return("string"==typeof i?m:f).encrypt(e,t,i,n)},decrypt:function(t,i,n){return("string"==typeof i?m:f).decrypt(e,t,i,n)}}}});i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=t.mode={},h=function(t,i,n){var s=this._iv;s?this._iv=e:s=this._prevBlock;for(var o=0;n>o;o++)t[i+o]^=s[o]},u=(i.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;h.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),u.Decryptor=u.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,s=e.slice(t,t+n);i.decryptBlock(e,t),h.call(this,e,t,n),this._prevBlock=s}}),c=c.CBC=u,u=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,i=i-e.sigBytes%i,n=i<<24|i<<16|i<<8|i,s=[],a=0;i>a;a+=4)s.push(n);i=o.create(s,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:c,padding:u}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=e.createEncryptor;else i=e.createDecryptor,this._minBufferSize=1;this._mode=i.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=i.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(r)},parse:function(e){e=r.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var i=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:i})}},f=i.SerializableCipher=s.extend({cfg:s.extend({format:c}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var s=e.createEncryptor(i,n);return t=s.finalize(t),s=s.cfg,p.create({ciphertext:t,key:i,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,i,n){return n||(n=o.random(8)),e=l.create({keySize:t+i}).compute(e,n),i=o.create(e.words.slice(t),4*i),e.sigBytes=4*t,p.create({key:e,iv:i,salt:n})}},m=i.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:t}),encrypt:function(e,t,i,n){return n=this.cfg.extend(n),i=n.kdf.execute(i,e.keySize,e.ivSize),n.iv=i.iv,e=f.encrypt.call(this,e,t,i.key,n),e.mixIn(i),e},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),i=n.kdf.execute(i,e.keySize,e.ivSize,t.salt),n.iv=i.iv,f.decrypt.call(this,e,t,i.key,n)}})}(),function(){for(var e=n,t=e.lib.BlockCipher,i=e.algo,s=[],o=[],a=[],r=[],l=[],d=[],c=[],h=[],u=[],p=[],f=[],m=0;256>m;m++)f[m]=128>m?m<<1:m<<1^283;for(var g=0,w=0,m=0;256>m;m++){var v=w^w<<1^w<<2^w<<3^w<<4,v=v>>>8^255&v^99;s[g]=v,o[v]=g;var y=f[g],_=f[y],b=f[_],x=257*f[v]^16843008*v;a[g]=x<<24|x>>>8,r[g]=x<<16|x>>>16,l[g]=x<<8|x>>>24,d[g]=x,x=16843009*b^65537*_^257*y^16843008*g,c[v]=x<<24|x>>>8,h[v]=x<<16|x>>>16,u[v]=x<<8|x>>>24,p[v]=x,g?(g=y^f[f[f[b^y]]],w^=f[f[w]]):g=w=1}var k=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes/4,e=4*((this._nRounds=i+6)+1),n=this._keySchedule=[],o=0;e>o;o++)if(i>o)n[o]=t[o];else{var a=n[o-1];o%i?i>6&&4==o%i&&(a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[255&a]):(a=a<<8|a>>>24,a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[255&a],a^=k[o/i|0]<<24),n[o]=n[o-i]^a}for(t=this._invKeySchedule=[],i=0;e>i;i++)o=e-i,a=i%4?n[o]:n[o-4],t[i]=4>i||4>=o?a:c[s[a>>>24]]^h[s[a>>>16&255]]^u[s[a>>>8&255]]^p[s[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,r,l,d,s)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,c,h,u,p,o),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,s,o,a,r){for(var l=this._nRounds,d=e[t]^i[0],c=e[t+1]^i[1],h=e[t+2]^i[2],u=e[t+3]^i[3],p=4,f=1;l>f;f++)var m=n[d>>>24]^s[c>>>16&255]^o[h>>>8&255]^a[255&u]^i[p++],g=n[c>>>24]^s[h>>>16&255]^o[u>>>8&255]^a[255&d]^i[p++],w=n[h>>>24]^s[u>>>16&255]^o[d>>>8&255]^a[255&c]^i[p++],u=n[u>>>24]^s[d>>>16&255]^o[c>>>8&255]^a[255&h]^i[p++],d=m,c=g,h=w;
m=(r[d>>>24]<<24|r[c>>>16&255]<<16|r[h>>>8&255]<<8|r[255&u])^i[p++],g=(r[c>>>24]<<24|r[h>>>16&255]<<16|r[u>>>8&255]<<8|r[255&d])^i[p++],w=(r[h>>>24]<<24|r[u>>>16&255]<<16|r[d>>>8&255]<<8|r[255&c])^i[p++],u=(r[u>>>24]<<24|r[d>>>16&255]<<16|r[c>>>8&255]<<8|r[255&h])^i[p++],e[t]=m,e[t+1]=g,e[t+2]=w,e[t+3]=u},keySize:8});e.AES=t._createHelper(i)}(),n.pad.Iso10126={pad:function(e,t){var i=4*t,i=i-e.sigBytes%i;e.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},i.exports=n}),define("bower_components/aes/main",["require","./aes"],function(e){var t=e("./aes"),i=t.enc.Utf8.parse("youzan.com.aesiv"),n=t.enc.Utf8.parse("youzan.com._key_");return{encrypt:function(e){return e=t.enc.Utf8.parse(e),t.AES.encrypt(e,n,{mode:t.mode.CBC,padding:t.pad.Iso10126,iv:i}).toString()}}}),define("text!bower_components/login/templates/init.html",[],function(){return'<form class="js-login-form popout-login" method="GET" action="">\n    <div class="header c-green center">\n        <h2>请填写您的手机号码</h2>\n    </div>\n    <fieldset class="wrapper-form font-size-14">\n        <div class="form-item">\n            <label for="phone">手机号</label>\n            <input id="phone" name="phone" type="tel" maxlength="11" autocomplete="off" placeholder="" value="<%= phone %>">\n        </div>\n        <div class="js-help-info font-size-12 error c-orange"></div>\n    </fieldset>\n    <div class="action-container">\n        <input type="submit" class="js-confirm btn btn-green btn-block font-size-14" value="确认手机号码" />\n    </div>\n</form>\n'}),define("text!bower_components/login/templates/login.html",[],function(){return'<form class="js-login-form popout-login" method="GET" action="">\n    <div class="header c-green center">\n        <h2>该号码注册过，请直接登录</h2>\n    </div>\n    <fieldset class="wrapper-form font-size-14">\n        <div class="form-item">\n            <label for="phone">手机号</label>\n            <input id="phone" name="phone" type="tel" maxlength="11" autocomplete="off" placeholder="请输入你的手机号" disabled="disabled" value="<%= phone %>">\n        </div>\n        <div class="form-item">\n            <label for="password">密码</label>\n            <input id="passsword" name="password"  type="password" autocomplete="off" placeholder="请输入登录密码">\n        </div>\n        <div class="js-help-info font-size-12 error c-orange"></div>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-confirm btn btn-green btn-block font-size-14">\n            <%= showBindText ? \'登录并绑定\' : \'确认\' %>\n        </button>\n    </div>\n    <div class="bottom-tips font-size-12">\n        <span class="c-orange">如果您忘了密码，请</span><a href="javascript:;" class="js-change-pwd c-blue">点此找回密码</a>\n        <a href="javascript:;" class="js-change-phone c-blue pull-right">更换手机号</a>\n    </div>\n</form>\n'}),define("text!bower_components/login/templates/register.html",[],function(){return'<form class="js-login-form popout-login" method="GET" action="">\n    <div class="header c-green center">\n        <h2>注册有赞帐号</h2>\n    </div>\n    <fieldset class="wrapper-form font-size-14">\n        <div class="form-item">\n            <label for="phone">手机号</label>\n            <input id="phone" name="phone" type="tel" maxlength="11" autocomplete="off" placeholder="请输入你的手机号" disabled="disabled" value="<%= phone %>">\n        </div>\n        <div class="form-item js-image-verify hide">\n            <label for="verifycode">身份校验</label>\n            <input id="verifycode" name="verifycode" class="js-verify-code item-input"  type="tel" style="width:178px" maxlength="6" autocomplete="off" placeholder="输入右侧数字">\n            <img class="js-verify-image verify-image" src="">\n        </div>\n        <div class="form-item">\n            <label for="code">验证码</label>\n            <input id="code" name="code"  type="text" style="width:178px" maxlength="6" autocomplete="off" placeholder="输入短信验证码">\n            <button type="button" class="js-auth-code tag btn-auth-code tag-green font-size-12" data-text="获取验证码">\n                获取验证码\n            </button>\n        </div>\n        <div class="form-item">\n            <label for="password">密码</label>\n            <input id="passsword" name="password"  type="password" autocomplete="off" maxlength="20" placeholder="请输入8-20位数字和字母组合">\n        </div>\n        <div class="js-help-info font-size-12 error c-orange"></div>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-confirm btn btn-green btn-block font-size-14">\n            <%= showBindText ? \'注册并绑定\' : \'确认\' %>\n        </button>\n    </div>\n    <div class="bottom-tips font-size-12">\n        <span class="c-orange">如果您忘了密码，请</span><a href="javascript:;" class="js-change-pwd c-blue">点此找回密码</a>\n        <a href="javascript:;" class="js-change-phone c-blue pull-right">更换手机号</a>\n    </div>\n</form>\n'}),define("text!bower_components/login/templates/change_pwd.html",[],function(){return'<form class="js-login-form popout-login" method="GET" action="">\n    <div class="header c-green center">\n        <h2><%if(isSetting){%>设定<%}else{%>找回<%}%>帐号密码</h2>\n    </div>\n    <fieldset class="wrapper-form font-size-14">\n        <div class="form-item">\n            <label for="phone">手机号</label>\n            <input id="phone" name="phone" type="tel" maxlength="11" autocomplete="off" placeholder="请输入你的手机号" disabled="disabled" value="<%= phone %>">\n        </div>\n        <div class="form-item js-image-verify hide">\n            <label for="verifycode">身份校验</label>\n            <input id="verifycode" name="verifycode" class="js-verify-code item-input"  type="tel" style="width:178px" maxlength="6" autocomplete="off" placeholder="输入右侧数字">\n            <img class="js-verify-image verify-image" src="">\n        </div>\n        <div class="form-item">\n            <label for="code">验证码</label>\n            <input id="code" name="code"  type="text" style="width:178px" maxlength="6" autocomplete="off" placeholder="输入短信验证码">\n            <button type="button" class="js-auth-code tag btn-auth-code font-size-12 tag-green" data-text="获取验证码">\n                获取验证码\n            </button>\n        </div>\n        <div class="form-item">\n            <label for="password">密码</label>\n            <input id="passsword" name="password"  type="password" autocomplete="off" placeholder="设置新的8-20位数字和字母组合密码">\n        </div>\n        <div class="js-help-info font-size-12 error c-orange"></div>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-confirm btn btn-green btn-block font-size-14">确定</button>\n    </div>\n    <div class="bottom-tips pull-right">\n        <a href="javascript:;" class="js-login inline-item c-blue">已有帐号登录</a>\n        <a href="javascript:;" class="js-register inline-item c-blue">注册新帐号</a>\n    </div>\n</form>\n'}),define("zenjs/util/valid",[],function(){window.zenjs=window.zenjs||{};var e={validMobile:function(e){return e=""+e,/^((\+86)|(86))?(1)\d{10}$/.test(e)},validPhone:function(e){return e=""+e,/^0[0-9\-]{10,13}$/.test(e)},validNumber:function(e){return/^\d+$/.test(e)},validEmail:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},validPostalCode:function(e){return e=""+e,/^\d{6}$/.test(e)}};return window.zenjs.Valid=e,e}),window.Zepto&&function(e){e.fn.serializeArray=function(){var t,i,n=[],s=function(e){return e.forEach?e.forEach(s):void n.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(n,o){i=o.type,t=o.name,t&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||o.checked)&&s(e(o).val())}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),define("vendor/zepto/form",function(){}),define("zenjs/util/form",["require","exports","module","vendor/zepto/form","jquery"],function(e,t,i){e("vendor/zepto/form");var n=e("jquery");window.zenjs=window.zenjs||{};var s={getFormData:function(e){var t=e.serializeArray(),i={};return n.map(t,function(e){i[e.name]=e.value}),i}};window.zenjs.Form=s,i.exports=s}),define("zenjs/sms_fetch/main",["require","exports","module","bower_components/ajax/ajax","jquery"],function(e,t,i){function n(){this.loadingLock=!1,this.isUsed=void 0}function s(e){e=e||{},this.$el=o(e.el||e.$el||"<div></div>"),this.el=this.$el[0],this.$=function(e){return this.$el.find(e)},this.initialize&&this.initialize(e)}e("bower_components/ajax/ajax");var o=e("jquery"),a=function(){};n.prototype={fetch:function(){if(this.isUsed!==!1){var e=this;this.loadingLock=!0,o._ajax({url:window._global.url.www.replace(/^https?:\/\//,"//")+"/common/token/token.jsonp",type:"get",dataType:"jsonp"}).done(function(t){0==t.code?(e.token=t.data,e.loadingLock=!1,e.isUsed=!1):motify.log(t.msg)}).fail(function(){motify.log("token 获取失败")})}},get:function(){return this.isUsed=!0,this.token}};var r=new n;o.extend(s.prototype,{initialize:function(e){this.duration=e.time||60,this.step=e.step||1100,this.codeVerifyClass=e.codeVerifyClass||"js-verify-code",this.verifyType="smsFetch";var t=window._global.url.www.replace(/^https?:\/\//,"//");this.smsFetchUrl=t+"/common/sms/captcha.jsonp",this.imgUrl=t+"/common/sms/imgcaptcha",this.imgVerifyUrl=t+"/common/sms/imgcaptcha.jsonp",this.biz=e.biz||"kdt_account_captcha",this.onTimeChange=e.onTimeChange||a,this.onTimeEnd=e.onTimeEnd||a,this.onTimerStart=e.onTimerStart||a,this.onTimerClose=e.onTimerClose||a,this.onVerifyPictureShow=e.onVerifyPictureShow||a,this.onGetCodeError=e.onGetCodeError||a,this.onVerifyPictureSuccess=e.onVerifyPictureSuccess||a,this.onVerifyPictureError=e.onVerifyPictureError||a,this.platform=e.platform||"",this.subFrom=e.subFrom||"",r.fetch()},setMobile:function(e){e&&(this.mobile=e)},getImageCode:function(){return o.trim(this.$("."+this.codeVerifyClass).val())},getSms:function(e){var t=this;if(r.loadingLock)return void motify.log("数据加载中，稍后再试");if(e=e||{},e.mobile&&(this.mobile=e.mobile),!this.mobile)return!1;var i={smsFetch:t.onSmsFetchHandler,image:t.onImageHandler};return t.startTimer.call(t),(i[t.verifyType]||a).call(t),this},startTimer:function(){this.onTimerStart(),this.btnCountdown(this.duration)},stopTimer:function(){clearTimeout(this.timer),this.onTimerClose()},btnCountdown:function(e){var t=this;this.onTimeChange({second:e}),--e>=0?this.timer=setTimeout(function(){t.btnCountdown(e)},this.step):(this.onTimeEnd(),this.timer="")},onVerifyImageShow:function(e){this.$(".js-image-verify").removeClass("hide"),this.$(".js-verify-image").attr("src",e)},onVerifyImageHide:function(){this.$(".js-image-verify").addClass("hide")},onSmsFetchHandler:function(){var e=1;return function(){var t=this,i={verifyTimes:e,mobile:this.mobile,biz:this.biz,token:r.get()};this.platform&&(i.platform=this.platform),this.subFrom&&(i.sub_from=this.subFrom),o._ajax({url:this.smsFetchUrl,dataType:"jsonp",data:i,success:function(i){return 0==i.code?void e++:(t.stopTimer.call(t),t.onGetCodeError.call(t),void(10111===i.code?(t.verifyType="image",t.onVerifyImageShow(t.imgUrl),t.onVerifyPictureShow()):(e++,motify.log(i.msg))))},error:function(i,n,s){e++,t.stopTimer.call(t),t.onGetCodeError.call(t),motify.log("获取验证码失败，请稍后再试")},complete:function(e,t){}}).always(function(){r.fetch()})}}(),onImageHandler:function(){var e=this,t=this.mobile;o._ajax({url:this.imgVerifyUrl,dataType:"jsonp",data:{mobile:t,captcha_code:this.getImageCode()},success:function(i){return 0===i.code?(e.verifyType="smsFetch",e.mobile=t,e.onVerifyImageHide(),e.onVerifyPictureSuccess(),void e.onSmsFetchHandler()):(e.stopTimer.call(e),e.onVerifyPictureError.call(e),void(10100===i.code?(motify.log(i.msg),e.$el.find(".js-verify-image").attr("src",e.imgUrl)):motify.log(i.msg)))},error:function(t,i,n){e.stopTimer.call(e),e.onVerifyPictureError.call(e),motify.log("图形验证失败，重试一下吧~"),e.$el.find(".js-verify-image").attr("src",e.imgUrl)},complete:function(e,t){}})}}),i.exports=s}),define("zenjs/util/url_helper",[],function(){var e={site:function(e,t){var i=window._global.env,n=window._global.url;"static"===t&&"online"===i&&(t="cdn_static");var s=e;return t=t?n[t]||"":"",-1==e.search(/^http[s]?\:\/\//)&&("/"!==e[0]&&(e="/"+e),s=t+e),s},getCdnImageUrl:function(e,t){if(!e)return window._global.url.cdn_static+"/image/wap/no_pic.png";if(t=e.match(/.+\!\d+x\d+.+/)?"":t&&t.length>0?t:"!100x100.jpg",e.match(/^(https?:)?\/\//i)){for(var i=[/^(https?:)?\/\/imgqn.koudaitong.com/,/^(https?:)?\/\/kdt-img.koudaitong.com/,/^(https?:)?\/\/img.yzcdn.cn/,/^(https?:)?\/\/dn-kdt-img.qbox.me/],n=0;n<i.length;n++)e=e.replace(i[n],window._global.url.imgqn);return e+t}return window._global.url.imgqn+"/"+e+t}};return e}),define("bower_components/login/main",["require","bower_components/ajax/ajax","jquery","backbone","bower_components/aes/main","text!./templates/init.html","text!./templates/login.html","text!./templates/register.html","text!./templates/change_pwd.html","zenjs/util/valid","zenjs/util/form","zenjs/sms_fetch/main","zenjs/util/url_helper","zenjs/util/ua"],function(e){e("bower_components/ajax/ajax");var t=e("jquery"),i=e("backbone"),n=e("bower_components/aes/main"),s=e("text!./templates/init.html"),o=e("text!./templates/login.html"),a=e("text!./templates/register.html"),r=e("text!./templates/change_pwd.html"),l=e("zenjs/util/valid"),d=e("zenjs/util/form"),c=e("zenjs/sms_fetch/main"),h=e("zenjs/util/url_helper"),u=e("zenjs/util/ua"),p=["youzanmars"],f=i.View.extend({events:{"click .js-confirm":"onConfirmClicked","click .js-change-phone":"onChangePhoneClicked","click .js-change-pwd":"onChangePwdClicked","click .js-login":"onLoginClicked","click .js-register":"onRegisterClicked","click .js-auth-code":"onAuthcodeClicked","submit .js-login-form":"onConfirmClicked"},initialize:function(e){e=e||{};var i=u.getPlatform();if(p.indexOf(i)>-1)return void(window.location.href=h.site("/buyer/kdtunion?redirect_uri="+encodeURIComponent(window.location.href),"wap"));var n=this,l=_global.url;this.tpl_map={init:_.template(e.initTpl||s),login:_.template(e.loginTpl||o),register:_.template(e.registerTpl||a),changePwd:_.template(e.changePwdTpl||r)},this.valid_map={checkPhone:_(this.checkPhone).bind(this),checkPwd:_(this.checkPwd).bind(this),checkCode:_(this.checkCode).bind(this)},this.renderOpt=e.renderOpt||{type:"init",phone:""},this.renderOpt.showBindText=u.isWeixin()||u.isQQ(),this.urlMap={login:e.loginUrl||l.wap+"/buyer/auth/authlogin.json",register:e.registerUrl||l.wap+"/buyer/auth/authRegister.json",changePwd:e.changePwdUrl||l.wap+"/buyer/auth/changePassword.json",confirm:e.confirmUrl||l.wap+"/buyer/auth/authConfirm.json"},this.source=e.source||2,this.ajaxType=e.ajaxType||"POST",this.afterLogin=e.afterLogin||function(){};var d,f;u.isMobile()?(d="app",f="wsc",u.isWxd()?f="wxd":u.isWsc()?f="wsc":u.isPf()?f="pf":d="wap"):d="pc",this.sms=new c({el:this.$el,onTimeChange:function(e){var i=e.second;t(n.nAuthCode).text("等待 "+i+"秒")},onTimeEnd:function(){n.nAuthCode.text("再次获取"),n.nAuthCode.prop("disabled",!1),n.nAuthCode.removeClass("disabled"),n.nCodeInput.attr("placeholder","没有收到验证码？")},onTimerStart:function(){n.nAuthCode.prop("disabled",!0),n.nAuthCode.addClass("disabled")},onVerifyPictureError:function(){n.nAuthCode.removeAttr("disabled"),n.nAuthCode.removeClass("disabled"),n.nAuthCode.text("再次获取")},onGetCodeError:function(){n.nAuthCode.removeAttr("disabled"),n.nAuthCode.removeClass("disabled"),n.nAuthCode.text("再次获取")},onVerifyPictureShow:function(){n.nHelpInfo.html("操作过于频繁，请先输入图像验证码再获取")},onVerifyPictureSuccess:function(){n.nHelpInfo.html("")},platform:d,subFrom:f})},render:function(){return this.appLogined?this:(this.$el.html(this.tpl_map[this.renderOpt.type](this.renderOpt)),this.nForm=this.$(".js-login-form"),this.nHelpInfo=this.$(".js-help-info"),this.nPhone=this.$('input[name="phone"]'),this.nPwd=this.$('input[name="password"]'),this.nCodeInput=this.$('input[name="authcode"]'),this.nAuthCode=this.$(".js-auth-code"),this)},show:function(e,t){"changePwd"==e?this.sms.biz="reset_account_passwd":this.sms.biz="kdt_account_captcha",_.extend(this.renderOpt,{type:e},t||{isSetting:!1}),this.render(this.renderOpt),this.$el.show(this.animationTime)},onConfirmClicked:function(e){e.preventDefault();var i=this,s=t(e.target),o=d.getFormData(i.nForm);if(o=_.extend(i.renderOpt,o),!i.validate(o))return!1;o.source=this.source,o.password&&(o.password=n.encrypt(o.password));var a=s.html();if("init"===i.renderOpt.type)i.renderOpt.phone=o.phone,t._ajax({url:this.urlMap.confirm,type:"POST",dataType:"json",timeout:15e3,data:o,xhrFields:{withCredentials:!0},beforeSend:function(){s.html("确认中..."),s.prop("disabled",!0)},success:function(e){switch(+e.code){case 0:i.show("login");break;case 200:i.show("register");break;case 300:i.show("changePwd",{isSetting:!0});default:i.nHelpInfo.html(e.msg)}},error:function(){i.nHelpInfo.html("出错啦，请重试")},complete:function(){s.html(a),s.prop("disabled",!1)}});else{var r=i.renderOpt.type;t._ajax({url:this.urlMap[r],type:this.ajaxType,dataType:"json",timeout:15e3,data:o,xhrFields:{withCredentials:!0},beforeSend:function(){s.html("确认中..."),s.prop("disabled",!0)},success:function(e){0===e.code?i.afterLogin(e,{type:r}):i.nHelpInfo.html(e.msg)},error:function(){i.nHelpInfo.html("出错啦，请重试")},complete:function(){s.html(a),s.prop("disabled",!1)}})}},onAuthcodeClicked:function(e){e.preventDefault();var t=this,i=d.getFormData(t.nForm);i=_.extend(t.renderOpt,i);var n=i.phone;this.sms.setMobile(n),this.sms.getSms()},onChangePhoneClicked:function(e){e.preventDefault(),this.show("init")},onChangePwdClicked:function(e){e.preventDefault(),this.sms.stopTimer(),this.show("changePwd")},onLoginClicked:function(e){e.preventDefault(),this.show("init")},onRegisterClicked:function(e){e.preventDefault(),this.show("init")},validate:function(){var e={init:["checkPhone"],login:["checkPwd"],register:["checkCode","checkPwd"],changePwd:["checkCode","checkPwd"]};return function(t){return _.every(e[t.type],_(function(e){return this.valid_map[e](t)}).bind(this))}}(),checkPhone:function(e){return""===e.phone?(this.nPhone.focus(),this.nHelpInfo.html("请填写您的手机号码"),!1):l.validMobile(e.phone)?!0:(this.nPhone.focus(),this.nHelpInfo.html("请填写11位手机号码"),!1)},checkPwd:function(e){function t(e){var t=/[a-zA-Z]/g,i=/[0-9]/g,n=0,s=t.test(e),o=i.test(e);return s&&o&&(n=1),n}if(""===e.password)return this.nPwd.focus(),this.nHelpInfo.html("请输入您的密码"),!1;if("login"!==this.renderOpt.type&&e.password.length<8)return this.nPwd.focus(),this.nHelpInfo.html("亲，密码最短为8位"),!1;if("login"!==this.renderOpt.type&&e.password.length>20)return this.nPwd.focus(),this.nHelpInfo.html("亲，密码最长为20位"),!1;if("login"!==this.renderOpt.type){var i=t(e.password);if(!i)return this.nPwd.focus(),this.nHelpInfo.html("亲，密码为8-20位数字和字母组合"),!1}return!0},checkCode:function(e){return l.validPostalCode(e.code)?!0:(this.nCodeInput.focus(),this.nHelpInfo.html("请填写6位短信验证码"),!1)}});return f}),define("bower_components/pop/popout",["require","./pop_forbid_scroll"],function(e){var t=e("./pop_forbid_scroll"),i=t.extend({init:function(e){e=e||{},this._super(e),this.css=$.extend({transition:"opacity ease "+this.animationTime+"ms",top:"50%",left:"50%","-webkit-transform":"translate3d(-50%, -50%, 0)",transform:"translateY(-50%, -50%, 0)"},e.css||{}),this.nPopContainer.css(this.css)},_doShow:function(){$(".js-popout-close").click($.proxy(function(e){this.hide()},this)),this.nPopContainer.css("opacity",1),this.nPopContainer.show()},_doHide:function(e){this.nPopContainer.css({opacity:0})}});return i}),define("bower_components/pop/popout_box",["require","./popout"],function(e){var t=function(){},i=e("./popout"),n=i.extend({init:function(e){this._super(e),this._onOKClicked=e.onOKClicked||t,this._onCancelClicked=e.onCancelClicked||t,this.preventHideOnOkClicked=e.preventHideOnOkClicked||!1,this.width=e.width,this.setEventListener()},setEventListener:function(){this.nPopContainer.on("click",".js-ok",$.proxy(this.onOKClicked,this)),this.nPopContainer.on("click",".js-cancel",$.proxy(this.onCancelClicked,this))},_doShow:function(){this.boxCss={"border-radius":"4px",background:"white",width:this.width||"270px",padding:"15px"},this.nPopContainer.css(this.boxCss).addClass("popout-box"),this._super()},_doHide:function(e){this._super()},onOKClicked:function(e){this._onOKClicked(e),!this.preventHideOnOkClicked&&this.hide()},onCancelClicked:function(e){this._onCancelClicked(e),this.hide()}});return n}),define("text!bower_components/pop/pop_alert/box.html",[],function(){return'<div class="alert-content" style="line-height: 120%;">\n    <%= data.box_content %>\n</div>\n<hr style="margin: 10px 0 11px;">\n<p class="js-ok confirm center c-green" style="line-height: 22px;">\n    <%= data.box_confirm %>\n</p>'}),define("zenjs/util/template",["require","jquery"],function(e){var t=e("jquery"),i=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},t=["&","<",">",'"',"'"],i=new RegExp("["+t.join("")+"]","g");return function(t){return null==t?"":(""+t).replace(i,function(t){return e[t]})}}(),n={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},s=/(.)^/,o={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\t|\u2028|\u2029/g,r=function(e,r,l){var d;l=t.extend({},n,l);var c=new RegExp([(l.escape||s).source,(l.interpolate||s).source,(l.evaluate||s).source].join("|")+"|$","g"),h=0,u="__p+='";e.replace(c,function(t,i,n,s,r){return u+=e.slice(h,r).replace(a,function(e){return"\\"+o[e]}),i&&(u+="'+\n((__t=("+i+"))==null?'':escapeFunc(__t))+\n'"),n&&(u+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(u+="';\n"+s+"\n__p+='"),h=r+t.length,t}),u+="';\n",l.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{d=new Function(l.variable||"obj","escapeFunc",u)}catch(p){throw p.source=u,p}if(r)return d(r,i);var f=function(e){return d.call(this,e,i)};return f.source="function("+(l.variable||"obj")+"){\n"+u+"}",f};return r}),define("bower_components/pop/pop_alert/popout_alert",["require","../popout_box","text!../pop_alert/box.html","zenjs/util/template"],function(e){var t=e("../popout_box"),i=e("text!../pop_alert/box.html"),n=e("zenjs/util/template"),s=n(i),o=t.extend({init:function(e){this._super(e),this.isCanNotHide=!0,this.box_content=e.content||"",this.box_confirm=e.confirmText||"我知道了"},render:function(e){return this.html||(this.html=s({data:{box_content:this.box_content,box_confirm:this.box_confirm}})),this._super(e),this.nPopContainer.addClass("popout-alert"),this},_doShow:function(){this._super()},_doHide:function(e){this._super()}}),a=null;return{show:function(e,t){t=t||{},a&&this.hide(),t.content=e,a=new o(t).render().show()},hide:function(){a&&(a.hide(),a=null)}}}),define("wap/showcase/goods/views/store_info",["bower_components/pop/pop_alert/popout_alert"],function(e){return Backbone.View.extend({initialize:function(){},events:{"click .js-rz-item-alert":"rzAlert"},render:function(){return this},rzAlert:function(){var t={is_secured_transactions:"该笔订单享受有赞提供的全程消费保障，请放心购买",team_certificate_person:"该店铺已通过有赞个人认证，请放心购买",team_certificate_company:"该店铺已通过有赞企业认证，请放心购买",deposit:"该店铺已缴纳消费保障保证金，订单维权更快更高效，请放心购买",team_certificate_qijian:"该店铺已通过有赞官字店-旗舰店认证，请放心购买",team_certificate_zhuanmai:"该店铺已通过有赞官字店-专卖店认证，请放心购买",team_certificate_zhiying:"该店铺已通过有赞官字店-直营店认证，请放心购买",team_certificate_zhuanying:"该店铺已通过有赞官字店-专营店认证，请放心购买"};return function(i){var n=$(i.target);n.hasClass("js-rz-item-alert")||(n=n.parents(".js-rz-item-alert"));var s=n.data("type"),o=t[s]||"";o&&e.show(o)}}()})}),define("zenjs/util/event",["require","jquery"],function(e){var t=e("jquery"),i={getTargetByDataKey:function(e,i){for(var n=t(e.target);!n.data(i)&&0!==n.data(i)&&"BODY"!=(n[0]||{}).nodeName;)n=n.parent();return n},getEventHandler:function(){var e=function(){};return t.extend(!0,e.prototype,i.methods),new e},methods:{events:{},on:function(e,t){return"string"!=typeof e||"[object Function]"!==Object.prototype.toString.call(t)?!1:(this.events[e]||(this.events[e]=[]),this.events[e].push(t))},trigger:function(e){if("string"!=typeof e)return!1;if(!this.events[e])return this.events[e]=[],!1;for(var t=this.events[e],i=Array.prototype.slice.apply(arguments,[1]),n=0,s=t.length;s>n;n++)t[n](i)},off:function(e,t){if(!e&&!t)return void(this.events={});if(!t)return void(this.events[e]=[]);var i=this.events[e],n=i.indexOf(t);i.splice(n,1)}}};return i}),define("zenjs/backbone/tabber",["require","../util/event","backbone"],function(e){var t=e("../util/event"),i=e("backbone"),n=function(){},s=i.View.extend({initialize:function(e){this.activeKey=e.activeKey||"type",this.activeClass=e.activeClass||"active",this.hashAsDefaultData=e.hashAsDefaultData?!0:!1,this.cbOnClicked=e.onClicked||n,this.cbOnDisabledClicked=e.onDisabledClicked||n,this.initDefault(e)},events:{click:"onClicked"},initDefault:function(e){var t=i.history.getHash();e.hashAsDefaultData&&t?this.active(t):e.defaultData&&e.defaultData.length>0&&this.active(e.defaultData)},onClicked:function(e){if(e.target&&0!==e.target.length){var i=t.getTargetByDataKey(e,this.activeKey),n=""+i.data(this.activeKey);if(void 0===this.firstClick?this.firstClick=!0:this.firstClick=!1,i.blur(),n&&"undefined"!==n&&this.activeData!==n&&n&&n.length>0){if(this.disabled===!0)return void(this.activeData!==n&&this.cbOnDisabledClicked());if(this.hashAsDefaultData){var s=location.href.replace(/(javascript:|#).*$/,"");location.replace(s+"#"+n)}this.$("."+this.activeClass).removeClass(this.activeClass),i.addClass(this.activeClass),this.activeData=n,this.cbOnClicked(_.extend(e||{},{value:n,nTarget:i}))}}},active:function(e,t){this.onClicked(_.extend({target:this.$el.find("[data-"+this.activeKey+'="'+e+'"]:first')},t||{}))},setDisable:function(e){this.disabled=e},setData:function(e){this.activeData=e,this.$("."+this.activeClass).removeClass(this.activeClass),this.$el.find("[data-"+this.activeKey+'="'+this.activeData+'"]:first').addClass(this.activeClass)},getData:function(){return this.activeData}});return s}),define("bower_components/waterfall/pager",["require","zenjs/events"],function(e){var t=e("zenjs/events"),i=function(){};return t.extend({init:function(e){this.$el||(this.$el=$(e.el||e.$el||"<div></div>"),this.el=this.$el[0]),this.nLoading=e.loadingHTML?$(e.loadingHTML).addClass("loading-more"):$('<div class="loading-more"><span></span></div>'),this.nList=this.$el.find(".js-list"),0===this.nList.length&&(this.nList=$('<div class="js-list b-list"></div>'),this.$el.append(this.nList)),"number"==typeof e.total&&(this.total=e.total),this.offset=e.offset||300,this.scrollDirection="down",this.pageIndex=e.pageIndex||0,this.perPage=e.perPage||10,this.postData=e.postData||{},this.checkSize=!0,"boolean"==typeof e.checkSize&&(this.checkSize=e.checkSize),this.idName=e.idName||"id",e.idValue&&(this.idValue=e.idValue),this.jsonKeys=e.jsonKeys||{},this.finishedHTML=e.finishedHTML,this.finishedText=e.finishedText,this.emptyHTML=e.emptyHTML||"",this.emptyText=e.emptyText||"",this.getExtrPostData=e.getExtrPostData||i,this.onFetchError=e.onFetchError||i,this.onListEmpty=this.onListEmpty||e.onEmpty||this._onListEmpty,this.on("finished",e.onFinished||i),this.on("after:list:load",e.onAfterListLoad||e.onDataLoad||i),this.extraData={},this.scrollContainer=e.scrollContainer?$(e.scrollContainer):$("body"),this.scrollEventAccepter=e.scrollEventAccepter?$(e.scrollEventAccepter):$(e.scrollContainer||window),this._onScroll=$.proxy(this.onScroll,this),this.bindScrollFunc()},$:function(e){return this.$el.find(e)},onScroll:function(){function e(){var e=this.nList.offset(),t=this.scrollContainer.offset(),i={left:e.left-t.left||0,top:e.top-t.top||0};return i}return function(){if(!(this.sleeping||this.finished||this.fetching)){if(0===this.total||this.total&&this.total<=this.pageIndex*this.perPage)return void this.doFinishLoading();var t=e.call(this);"down"===this.scrollDirection&&this.nList.height()+t.top-this.scrollEventAccepter.height()-this.scrollContainer.scrollTop()<this.offset&&this.fetchMore&&this.fetchMore(),"up"===this.scrollDirection&&this.scrollContainer.scrollTop()<this.offset&&this.fetchMore&&this.fetchMore()}}}(),fetchMore:function(){return this.sleeping||this.finished||this.fetching?this:(this.showLoading(),this.fetching=!0,this._fetchMore&&this._fetchMore.call(this),this)},onFetchMoreSuccess:function(){this.hideLoading(),this.fetching=!1,this._onFetchMoreSuccess.apply(this,arguments)},fetchRender:function(){return this.fetchMore(),this},_onFetchMoreError:function(){this.fetching=!1,this.hideLoading(),this.onFetchError()},doFinishLoading:function(e){this.finished=!0,this.fetching=!1,this.hideLoading(),this.$el.find(".list-finished").remove(),this.triggerMethod&&this.triggerMethod("finished",this.collection,e)},bindScrollFunc:function(){var e=this;this.scrollFunc&&this.unbindScrollFunc(),this.scrollFunc=function(){e.scrollTimeout&&clearTimeout(e.scrollTimeout),e.scrollTimeout=setTimeout(e._onScroll,200)},this.scrollEventAccepter.on("scroll",this.scrollFunc)},unbindScrollFunc:function(){this.scrollEventAccepter.off("scroll",this.scrollFunc),this.scrollFunc=null},doSleep:function(){this.sleeping=!0,this.unbindScrollFunc()},doWake:function(){this.sleeping=!1,this.bindScrollFunc(),this.fetchMore()},showLoading:function(){this.hasFetching=!0,this.$el.append(this.nLoading)},hideLoading:function(){this.nLoading.remove()},getFinishHtml:function(){var e;return e=this.finishedHTML?$(this.finishedHTML).addClass("list-finished"):'<div class="list-finished">'+(this.finishedText||"已经没有更多了")+"</div>"},setExtraData:function(e){$.extend(this.extraData,e)},resetWaterfall:function(e){this.finished===!0&&this.$(".list-finished").remove(),this.removeAll&&this.removeAll(),this.nList.empty(),this.collection&&this.collection.reset([],{silent:!0}),this.listEl&&this.listEl.empty(),this.finished=!1,e&&e.pageIndex?this.pageIndex=e.pageIndex:this.pageIndex=0,this.idValue=void 0},_onListEmpty:function(){if(!this.fetching){var e;this.emptyHTML?e=$(this.emptyHTML).addClass("list-finished"):this.emptyText&&(e='<div class="list-finished">'+this.emptyText+"</div>"),this.$el.append(e)}},destroy:function(){this.doSleep(),this.$el.remove(),this.unbindScrollFunc()},remove:function(){this.destroy()}})}),define("bower_components/waterfall/waterfall_html",["require","bower_components/ajax/ajax","jquery","./pager"],function(e){e("bower_components/ajax/ajax");var t=e("jquery"),i=e("./pager"),n=i.extend({init:function(e){this.$el&&this.$el.find(".list-finished")&&this.$el.find(".list-finished").length>0||(this._super(e),"undefined"!=typeof e.pageIndex?this.pageIndex=+e.pageIndex:this.pageIndex=1,this.url=e.url||"",this.ajaxType=e.ajaxType||"GET",this.dataType=e.dataType||"json",this.on("finished",this._doFinishLoading),this.onScroll());
},_fetchMore:function(){var e=this,i={};this.perPage&&(i[this.jsonKeys.perPage||"perpage"]=this.perPage),this.idValue?i[this.idName]=this.idValue:i[this.jsonKeys.pageIndex||"page"]=this.pageIndex+1;var n=this.getExtrPostData?this.getExtrPostData():{};t._ajax({url:e.url,type:e.ajaxType,dataType:e.dataType,data:t.extend({},e.postData,i,n,e.extraData),timeout:5e3,success:function(t){e.pageIndex++,t&&0==t.code?e.onFetchMoreSuccess({},t||{}):e.doFinishLoading(t)},error:function(t,i,n){e._onFetchMoreError()}})},_onFetchMoreSuccess:function(e,t){var i=(t||{}).data||{};return i[this.idName]&&(this.idValue=i[this.idName]),this.triggerMethod("after:list:load",i.html||"",t),i.html?void this.onScroll():(this.pageIndex--,void this.doFinishLoading(t))},_doFinishLoading:function(){if(0==this.pageIndex&&this.triggerMethod("list:empty"),this.hasFetching&&this.pageIndex>2){var e=this.getFinishHtml();this.$el.append(e)}}});return n}),define("zenjs/backbone/base_view",["require","backbone","../core/trigger_method"],function(e){var t=e("backbone"),i=e("../core/trigger_method");return t.View.extend({clean:function(){return this.stopListening(),this},triggerMethod:i})}),define("bower_components/zenlist/list",["require","exports","module","zenjs/backbone/base_view"],function(e,t,i){var n=function(){},s=e("zenjs/backbone/base_view");i.exports=s.extend({initialize:function(e){return this.options=e=e||{},this.items=[],this.itemView=e.itemView,this.itemOptions=e.itemOptions||{},this.collection=e.collection,this.onAfterListChange=e.onAfterListChange||n,this.onAfterListLoad=e.onAfterListLoad||n,this.onAfterListDisplay=e.onAfterListDisplay||n,this.onListEmpty=e.onListEmpty||e.onEmptyList||this._onListEmpty,this.onItemClick=e.onItemClick||n,this.onViewItemAdded=e.onViewItemAdded||n,this.displaySize=e.displaySize||-1,this.emptyHTML=e.emptyHTML||"",this.emptyText=e.emptyText||"列表为空",this},render:function(e){return this.displaySize=-1==(e||{}).displaySize?-1:this.displaySize,this.clean(),this._setupListeners(),this.addAll(),this.onAfterListDisplay({list:this.collection}),this},fetchRender:function(e){return this.collection.fetch({data:e,success:_(function(e,t){this.render(),this.onAfterListLoad(this.collection,t),this.onFetchSuccess&&this.onFetchSuccess()}).bind(this),error:_.bind(function(){this.onAfterListLoad(this.collection,response)},this)}),this},_setupListeners:function(){this.collection&&(this.stopListening(this.collection),this.listenTo(this.collection,"add",this.addItem,this),this.listenTo(this.collection,"reset sort",this.render,this),this.listenTo(this.collection,"remove",this.onItemRemoved,this))},addItemListeners:function(e){var t=this;this.listenTo(e,"all",function(){var t="item:"+arguments[0],i=_.toArray(arguments);i.splice(0,1),i.unshift(t,e),this.trigger.apply(this,i),"item:click"==t&&this.onItemClick()}),this.listenTo(e.model,"change",function(){t.onAfterListChange({list:this.collection})})},addAll:function(){0===this.collection.length?this.fetching||this.triggerMethod("list:empty"):this.collection.each(function(e){this.addItem(e)},this)},removeAll:function(){for(var e=this.items.length-1;e>=0;e--)this.removeView(this.items[e]);this.onAfterListChange({list:this.collection})},addItem:function(e,t,i){if(!(this.displaySize>=0&&this.items.length>=this.displaySize)){1==this.collection.length&&(this.listEl||this.$el).html("");var n=new this.itemView(_.extend({},this.options.itemOptions,{model:e,index:this.collection.indexOf(e)}));this.items.push(n),this.addItemListeners(n),n.render(),this.onViewItemAdded({list:this.items,viewItem:n,model:e});var s=(i||{}).at;return 0===s?(this.listEl||this.$el).prepend(n.el):(this.listEl||this.$el).append(n.el),n}},removeItem:function(e){var t=this.getViewByModel(e);t&&this.removeView(t)},removeView:function(e){var t;this.stopListening(e),e&&(this.stopListening(e.model),e.remove(),t=this.items.indexOf(e),this.items.splice(t,1)),0===this.collection.length&&(this.fetching||this.triggerMethod("list:empty"))},onItemRemoved:function(e){this.onAfterListChange({list:this.collection,action:"remove",model:e}),this.removeItem(e)},getViewByModel:function(e){return _.find(this.items,function(t,i){return t.model===e})},dispatchEventToAllViews:function(e,t){for(var i=this.items.length-1;i>=0;i--)this.items[i].trigger(e,t)},remove:function(){s.prototype.remove.call(this,arguments),this.removeAll(),this.collection.reset(),delete this.collection},clean:function(){s.prototype.clean.call(this,arguments),this.removeAll(),(this.listEl||this.$el).html(""),this.stopListening(this.collection)},_onListEmpty:function(){this.$el.html(this.emptyHTML||(this.emptyText?'<p style="text-align:center;line-height:60px;">'+this.emptyText+"</p>":""))}})}),define("bower_components/waterfall/waterfall",["require","./pager","bower_components/zenlist/list"],function(e){var t=e("./pager"),i=e("bower_components/zenlist/list"),n=function(){},s=t.extend({init:function(e){this._super(e),this.collection=e.collection,this.listEl=this.getListViewEl(),this.list=new i($.extend({},e,{el:this.listEl,collection:this.collection,onListEmpty:n})).render(),this.on("finished",this._doFinishLoading)},getListViewEl:function(){return this.nList},_fetchMore:function(){var e={};this.idValue&&(e[this.idName]=this.idValue),e[this.jsonKeys.perPage||"perpage"]=this.perPage,e[this.jsonKeys.pageIndex||"page"]=this.pageIndex+1;var t=this.getExtrPostData?this.getExtrPostData():{};this.collection.fetch({data:$.extend(e,this.postData,t,this.extraData),success:$.proxy(this.onFetchMoreSuccess,this),error:$.proxy(this.onFetchError,this),update:!0,remove:!1})},_onFetchMoreSuccess:function(e,t){this.pageIndex++,this.triggerMethod("after:list:load",{collection:e,response:t});var i=this.collection.parse(t);if(0===i.length||this.checkSize&&i.length<this.perPage)return void this.doFinishLoading();var n=_.last(this.collection.models);n&&(this.idValue=n.get(this.idName)),this.onScroll()},_onAfterListLoad:function(){var e=_.last(this.collection.models);e&&(this.idValue=e.get(this.idName))},_doFinishLoading:function(){if(this.collection.length>0){if(this.hasFetching&&this.pageIndex>1){var e=this.getFinishHtml();this.$el.append(e)}}else this.triggerMethod("list:empty")},addTopItem:function(e){this.collection.unshift(e)},addBottomItem:function(e){this.finished===!0&&this.$(".list-finished").remove(),this.collection.add(e)}});return s}),define("bower_components/waterfall/collections/collection",["require","exports","module"],function(e,t,i){i.exports=Backbone.Collection.extend({parse:function(e){var t=(e||{}).data||{},i=t.list||[];return this.total=parseInt(t.total||t.count),i}})}),define("text!wap/showcase/goods/templates/review_avatar.html",[],function(){return'<div class="profiles clearfix">\n    <% \n        var avatarItem;\n        for( var index in avatar ){ \n    %>\n        <% avatarItem = avatar[index]; %>\n        <% if( avatarItem.fans_picture ){ %>\n            <% \n                var pic = avatarItem.fans_picture; \n                pic = pic.replace(/\\/\\d+$/g, \'/64\');\n            %>\n            <img src="<%= pic %>" class="image-circle">\n        <% }else{ %>\n            <span class="name-circle font-size-18"><%= (avatarItem.user_name || \'\')[0] || \'\' %></span>\n        <% } %>\n    <% } %>\n</div>'}),define("wap/showcase/goods/views/reviews",["zenjs/backbone/tabber","bower_components/waterfall/waterfall_html","text!wap/showcase/goods/templates/review_avatar.html"],function(e,t,i){return Backbone.View.extend({initialize:function(e){this.nTabberContent=this.$(".js-review-tabber-content"),this.nPinjianReportContainer=this.$(".js-review-report-container"),this.waterfallMap={},this.isShowRecord=e.isShowRecord||!1,this.totalMap={},this.isRateNumUpdated=!1,this.isAvatarUpdated=!1},render:function(t){return t=t||{},this.isShowRecord||this.$(".js-review-avatar-container").remove(),t.fastReview?($._ajax({url:"/v2/showcase/goods/review.json",type:"GET",dataType:"json",data:{alias:window._global.alias,page_size:2,pinjian_report:1},success:_(function(e){if(0==e.code){var t=e.data||{},i=window._global.url.wap+"/showcase/goodsfast?alias="+_global.alias+"&detail_type=reviews";if(this.$el.html(""),!t.report_html&&!t.html)return void this.$el.remove();this.$el.append(t.report_html||""),this.$el.append(t.html||"").find(".js-review-item").attr("href",i),t.count>2&&this.$el.append('<a href="'+i+'" class="block-item font-size-14 center">查看更多评价</a>'),this.initImgPreview(this.$el)}}).bind(this)}),this):(this.tabber=new e({el:this.$(".js-review-tabber"),activeClass:"active",activeKey:"reviewtype",defaultData:"all",onClicked:_(this.onTabberClicked).bind(this)}),this)},onTabberClicked:function(e){var i={all:"评论",good:"好评",middle:"中评",bad:"差评"},n=e.value,s=this.nTabberContent.find(".js-review-part[data-reviewtype="+n+"]");if(this.nTabberContent.find(".js-review-part").addClass("hide"),s.removeClass("hide"),"all"!==n?this.nPinjianReportContainer.addClass("hide"):this.isPinjianReportLoaded&&this.nPinjianReportContainer.removeClass("hide"),this.doSleep(),this.doWake(n),!this.waterfallMap[n]){var o=$(e.target),a=o.data("rate"),r=this.getExternalData(),l="number"==typeof this.totalMap[a]?this.totalMap[a]:1e3,d=$.extend({alias:window._global.alias,rate:a},r);this.waterfallMap[n]=new t({el:s,pageIndex:0,perPage:10,total:l,url:"/v2/showcase/goods/review.json",postData:d,jsonKeys:{perPage:"page_size"},emptyText:"暂无"+i[n],onAfterListLoad:_(function(e,t){var i=t.data||{};i.report_html&&(this.nPinjianReportContainer.removeClass("hide").append(i.report_html),this.isPinjianReportLoaded=!0),this.reportFetched=!0,d.pinjian_report=0,s.find(".js-list").append(e),i.with_rate_num&&(this.updateRateNum(i.with_rate_num),d.with_rate_num=0),i.with_avatar&&(this.updateAvatar(i.with_avatar),d.with_avatar=0),this.initImgPreview(s)}).bind(this)})}},doWake:function(e){e&&this.waterfallMap[e]&&this.waterfallMap[e].doWake()},doSleep:function(){_.each(this.waterfallMap,function(e,t){e.doSleep()})},updateRateNum:function(e){this.isRateNumUpdated||(this.$(".js-rate-good").text("好评("+e[30]+")"),this.$(".js-rate-middle").text("中评("+e[20]+")"),this.$(".js-rate-bad").text("差评("+e[10]+")"),this.totalMap={10:e[10],20:e[20],30:e[30],0:e[10]+e[20]+e[30]},this.isRateNumUpdated=!0)},updateAvatar:function(e){this.isAvatarUpdated||(this.$(".js-review-avatar").html(_.template(i)({sold_num:e.sold_num,avatar:e.avatar})),this.isAvatarUpdated=!0)},getExternalData:function(){var e=$(window).width(),t=function(){return 375>e?24:414>e?30:33};return function(){var e={};return!this.isAvatarUpdated&&this.isShowRecord&&(e.with_avatar=t()),this.isRateNumUpdated||(e.with_rate_num=1),this.reportFetched||(e.pinjian_report=1,e.display_pj_link=1,e.report_size=3),e}}(),initImgPreview:function(e){}})}),define("text!wap/showcase/goods/templates/trade_record.html",[],function(){return'<span class="col-1 c-gray-darker"><%= data.nickname %></span>\n<span class="col-2 c-gray-dark center"><%= data.update_time %></span>\n<span class="col-3 c-gray-darker center"><%= data.item_num %></span>\n'}),define("wap/showcase/goods/views/trade_record_item",["text!wap/showcase/goods/templates/trade_record.html"],function(e){return Backbone.View.extend({template:_.template(e),className:"block-item",render:function(){this.$el.html(this.template({data:this.model.toJSON()}))}})}),define("wap/showcase/goods/views/goods_detail",["zenjs/backbone/tabber","zenjs/util/args","bower_components/waterfall/waterfall_html","bower_components/waterfall/waterfall","bower_components/waterfall/collections/collection","wap/showcase/goods/views/reviews","wap/showcase/goods/views/trade_record_item"],function(e,t,i,n,s,o,a){var r=window._global,l=function(){};return Backbone.View.extend({initialize:function(e){this.tradeRecordWaterfall=null,this.ReviewsView=e.ReviewsView||o,this.asyncs=e.asyncs,this.onAfterDetailLoad=e.onAfterDetailLoad||l,this.goods_type=e.goods_type||"goods",this.isHashAsDefaultData=e.isHashAsDefaultData||!1;var t=e.sold_num||0;this.isShowRecord=e.isShowRecord&&t>0,this.isShowReview=e.isShowReview&&t>0,(this.isShowRecord||this.isShowReview)&&(this.isShowTabber=!0)},render:function(){var e=this;return $&&$.fn&&$.fn.lazyload&&e.$el.find(".js-html-lazy").lazyload({load:_(e.lazyHtmlLoaded).bind(this)}),this},lazyHtmlLoaded:function(){var e=this;e.nTabber=e.$(".js-tabber"),e.nTabberContent=e.$(".js-tabber-content"),e.initGoodsDetailTabber(),window.initSwiper&&window.initSwiper(e.$el),window.init_custom_notice&&window.init_custom_notice(e.$el);var t=window._global.js_config||[];return window.Loader.async(_.values(t),function(){window.imagePreview&&window.imagePreview.init()}),"1"==window._global.tpl_style&&"auction"!=window._global.goods_type&&e.isShowReview&&(e.reviewsView=new o({el:e.$(".js-trade-review-list"),isShowRecord:e.isShowRecord}).render({fastReview:!0})),e.onAfterDetailLoad(),this},initGoodsDetailTabber:function(){if(!this.isShowTabber||!this.asyncs.tabber)return this.nTabberContent.find(".js-part").removeClass("hide"),this;var i=t.get("detail_type")||"goods";this.tabber=new e({el:this.nTabber,activeClass:"active",activeKey:"type",defaultData:i,hashAsDefaultData:this.isHashAsDefaultData,onClicked:_(this.onTabberClicked).bind(this)})},onTabberClicked:function(){var e,o={sales:function(){this.tradeRecordWaterfall?this.tradeRecordWaterfall.doWake():(this.tradeRecordWaterfall=new n({el:$(".js-traderecord-list"),collection:new s([],{url:"/v2/trade/order/orderitemlist.json?alias="+r.alias}),itemView:a,checkSize:!1,emptyText:"最近暂无成交"}).fetchRender(),this.tradeRecordWaterfall.on("list:empty",_(function(){this.tradeRecordWaterfall.$el.addClass("empty").find(".js-list").remove()}).bind(this))),e=this.tradeRecordWaterfall},reviews:function(){this.reviewsView?this.reviewsView.doWake():this.reviewsView=new this.ReviewsView({el:this.$(".js-trade-review-list"),isShowRecord:this.isShowRecord}).render(),e=this.reviewsView},pinjian_reviews:function(){this.pjReviewsView?this.pjReviewsView.doWake():this.pjReviewsView=new i({el:$(".js-trade-review-list"),url:"/v2/showcase_pinjian/item/reportsByItemId.jsonp",dataType:"jsonp",postData:{item_id:t.get("item_id")},pageIndex:0,perPage:10,emptyText:"还没有品鉴报告",onAfterListLoad:function(e,t){this.$el.find(".js-list").append(e)}}),e=this.pjReviewsView}};return function(t){var i=t.value,n=this.nTabberContent.find(".js-part[data-type="+i+"]");this.nTabberContent.find(".js-part").addClass("hide"),e&&e.doSleep(),n.removeClass("hide"),this.activeContent=n,(o[i]||l).call(this)}}()})}),define("text!wap/showcase/goods/templates/cashback_rule.html",[],function(){return'<form class="form-dialog">\n    <div class="header">\n        <h2> <span>促销详情</span> </h2>\n    </div>\n    <fieldset class="field-info" style="line-height: 120%;">\n        <% if(cashBack && cashBack.replace(/(^\\s*)|(\\s*$)/g, "")){ %>\n        <p class="font-size-12"><span class="c-red">【订单返现】</span><span><%= cashBack %></span>返现；</p>\n        <div class="turn-rule-step">\n            <p class="font-size-12 c-gray-dark reset-p-margin">1、通过【微信支付】付款，返现金额将通过 【微信退款】发放，请注意查收；</p>\n            <p class="font-size-12 c-gray-dark reset-p-margin">2、通过【银行卡】付款，返现金额将在3天内，原路发放至银行卡账户；</p>\n        </div>\n        <hr>\n        <% } %>\n        <% if(meetReduce && meetReduce.replace(/(^\\s*)|(\\s*$)/g, "")){ %>\n        <p class="font-size-12">\n            <span class="block-icon btn btn-red font-size-14">满减/赠/包邮</span>单笔订单金额<%= meetReduce %>\n        </p>\n        <% } %>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-ok btn btn-green btn-block">我知道了</button>\n    </div>\n</form>\n\n'}),define("text!wap/showcase/goods/templates/discountCount.html",[],function(){return'\n<% if ( data.day > 0 ) { %>\n    <em class="c-red js-hour"><%- (+data.day) %></em> 天 \n<% } %>\n<% if ( data.hour > 0 ) { %>\n    <em class="c-red js-hour"><%- (+data.hour) %></em> 小时 \n<% } %>\n<em class="c-red js-min"><%- (+data.min) %></em> 分 \n<em class="c-red js-sec"><%- data.sec %></em> 秒'}),define("text!wap/showcase/goods/templates/qrcode.html",[],function(){return'<div class="section-detail">\n	<h3 class="shop-detail">手机扫码购买</h3>\n	<% if(type === \'url\') { %>\n	<p class="text-center weixin-title">微信“扫一扫”立即购买</p>\n	<% } else if (type === \'weixin\') { %>\n	<p class="text-center weixin-title">微信“扫一扫”关注购买</p>\n	<% } %>\n	<p class="text-center qr-code">\n		<img width="158" height="158" src="<%=img %>">\n	</p>\n</div>'}),define("bower_components/wakeupapp/wakeup",["require","zenjs/util/ua"],function(e){function t(e){window.location.href=e}function i(e){var i="function"==typeof e.willInvokeApp?e.willInvokeApp:function(){},o="function"==typeof e.onAppMissing?e.onAppMissing:t,l="function"==typeof e.onUnsupportedEnvironment?e.onUnsupportedEnvironment:function(){};i(),w.isAndroid()?n()&&e.intentURI&&!e.useUrlScheme?a(e.intentURI):e.apkDownloadUrl&&s(e.urlScheme,e.apkDownloadUrl,o):w.isIOS()&&e.appStoreUrl?r(e.urlScheme,e.appStoreUrl,o):setTimeout(function(){l()},100)}function n(){var e=new RegExp(whiteListBrowser.join("|"),"i"),t=e.test(navigator.userAgent)||w.isChrome()&&w.getChromeVersion()>="25",i=new RegExp(v.join("|"),"i");return t&&!i.test(navigator.userAgent)}function s(e,t,i){o(m,t,i),h(e)}function o(e,t,i){var n=(new Date).getTime();return setTimeout(function(){var s=(new Date).getTime();c()&&e+g>s-n&&i(t)},e)}function a(e){function t(){top.location.href=e}w.isChrome()?t():setTimeout(t,100)}function r(e,t,i){var n=o(f,t,i);parseInt(w.getIOSVersion(),10)<8?l(n):d(n),p()||h(e)}function l(e){window.addEventListener("pagehide",function t(){c()&&(clearTimeout(e),window.removeEventListener("pagehide",t))})}function d(e){document.addEventListener("visibilitychange",function t(){c()&&(clearTimeout(e),document.removeEventListener("visibilitychange",t))})}function c(){for(var e=["hidden","webkitHidden"],t=0,i=e.length;i>t;t++)if("undefined"!=typeof document[e[t]])return!document[e[t]];return!0}function h(e){setTimeout(function(){var t=u("appLauncher");t.src=e},100)}function u(e){var t=document.createElement("iframe");return t.id=e,t.style.border="none",t.style.width="0",t.style.height="0",t.style.display="none",t.style.overflow="hidden",document.body.appendChild(t),t}function p(){return parseInt(w.getIOSVersion(),10)>8&&w.isIOS()}var f=2e3,m=300,g=100,w=e("zenjs/util/ua"),v=["firefox","opr","fb_iab","MQQBrowser","MZ-m2"];return whiteListBrowser=["SAMSUNG","ASUS"],i}),define("bower_components/wakeupapp/main",["require","./wakeup","zenjs/util/ua","zenjs/util/args"],function(e){var t=e("./wakeup"),i=e("zenjs/util/ua"),n=e("zenjs/util/args"),s=$(".js-wakeup-app"),o=$(".js-wakeup-app-mask"),a=$(".js-wakeup-app-opentip"),r=Math.abs(parseInt(s.css("top"))),l=i.isIOS()?"“在Safari中打开”":"“在浏览器中打开”",d=!0;a.find(".js-platform-open").html(l),s.on("click",".js-wakeup-app-close",function(){d?s.css("transform","translate3d(0, 0, 0)"):s.css("top","-"+r+"px"),setTimeout(function(){s.remove(),o.remove(),a.remove()},1e3)}),o.on("click",function(){o.hide(),a.hide()}),s.on("click",".js-wakeup-app-download",function(){var e=$(this),s=e.data("appstoreurl"),r=1==n.get("sjtg");if(i.isWeixin())(!r||parseInt(i.getIOSVersion(),10)>8&&i.isIOS())&&/app.qq.com/.test(s)?location.href=s:(o.show(),a.show());else{var l=e.data("schema"),d=e.data("intenturi"),c=e.data("apkdownloadurl");t({urlScheme:l,intentURI:d,appStoreUrl:s,apkDownloadUrl:c})}}),setTimeout(function(){s.css("transform","translate3d(0, "+r+"px, 0)");var e=s.css("transform");e||(d=!1,s.css("top","0px")),i.isWeixin()||1!=n.get("sjtg")||$(".js-wakeup-app-download").trigger("click")},1e3)}),define("wap/showcase/goods/goods",["require","wap/components/util/wx_info","text!wap/showcase/goods/templates/goodsCount.html","zenjs/util/count_down","zenjs/util/ua","bower_components/pop/popup","wap/showcase/goods/views/present_sku","bower_components/login/main","bower_components/pop/popout_box","wap/showcase/goods/views/store_info","wap/showcase/goods/views/goods_detail","text!wap/showcase/goods/templates/cashback_rule.html","text!wap/showcase/goods/templates/discountCount.html","text!wap/showcase/goods/templates/qrcode.html","bower_components/wakeupapp/main"],function(e){var t=(e("wap/components/util/wx_info"),e("text!wap/showcase/goods/templates/goodsCount.html")),i=e("zenjs/util/count_down"),n=e("zenjs/util/ua"),s=e("bower_components/pop/popup"),o=e("wap/showcase/goods/views/present_sku"),a=e("bower_components/login/main"),r=e("bower_components/pop/popout_box"),l=e("wap/showcase/goods/views/store_info"),d=e("wap/showcase/goods/views/goods_detail"),c=e("text!wap/showcase/goods/templates/cashback_rule.html"),h=e("text!wap/showcase/goods/templates/discountCount.html"),u=e("text!wap/showcase/goods/templates/qrcode.html");e("bower_components/wakeupapp/main");var p=window._global,f=Backbone.View.extend({el:"body",cashBackRuleTpl:_.template(c),events:{"click .js-add-cart":"onAddCartClicked","click .js-select-sku":"onSelectSkuClicked","click .js-select-delivery":"onSelectDeliveryClicked","click .js-buy-it":"onBuyItClicked","click .js-points-btn":"onPointsBtnClicked","click .js-add-gift":"onGiftClicked","click .js-trade-reward":"onRewardArrowClicked","click .js-add-wish":"onAddWishClicked","click .js-add-wish-btn":"onAddWishClicked","click .js-added-wish-btn":"onAddedWishClicked","click .js-get-present":"onGetPresent","click .js-promotion-rule":"onShowCashbackRule"},initialize:function(e){var t=this;this.buyConfig=e.buyConfig;this.sku=p.sku;return this.goodsId=p.goods_id,this.activityAlias=p.activity_alias,this.fullPage=this.$(".wap-page-goods"),this.imageSwiper=this.$(".js-image-swiper"),this.taoInfo=this.$(".custom-go-tao"),this.returnBtn=this.$(".js-butn-return"),this.buyBtn=this.$(".js-buy-it"),this.confirmBtn=this.$(".js-confirm-it"),this.componentsContainer=this.$(".js-components-container"),this.bottomOpts=this.$(".js-bottom-opts"),this.buyGuide=this.$(".js-buy-guide"),this.nAddWish=this.$(".js-add-wish"),this.nAddWishBtn=this.$(".js-wish-btn"),this.nVipWishBtnGroup=this.$(".js-wish-btn-group"),this.nPointsBtn=this.$(".js-points-btn"),this.asyncs=e.asyncMap||{},this.storeInfoView=new l({el:this.$(".js-store-info")}).render(),this.goodsDetailView=new d({el:this.$(".js-detail-container"),sold_num:(p.sku||{}).sold_num,isShowRecord:p.buy_record,isShowReview:p.customer_reviews,asyncs:this.asyncs}).render(),this.initGoodsQrCode(),Backbone.EventCenter=Backbone.EventCenter||_.extend({},Backbone.Events),Backbone.EventCenter.on("active",_(this.onSkuChanged).bind(this)),p.isWishOpen?void $._ajax({url:"/v2/trade/wish/IsAdded.json?kdt_id="+p.kdt_id||0,type:"POST",data:{goods_ids:[this.goodsId]},dataType:"json",success:function(e){var i=e.code,n=(e.data||{})[t.goodsId]||{};e.msg;0==i&&(t.nVipWishBtnGroup.length&&(t.nVipWishBtnGroup.removeClass("hide"),n.isWishAdded&&t.nAddWishBtn.addClass("js-added-wish-btn").removeClass("js-add-wish-btn").text("请TA来买单")),n.isWishOpen&&t.nAddWish.removeClass("hide"),n.isWishAdded&&t.nAddWish.addClass("wish-added"))}}):this},initCountdown:function(){var e=this,n=$(".js-mini-counter"),s=$("#activity-77-tips"),o="started"==s.data("status");if(n.length||o){if(n.length){var a=new i;a.run({seconds:n.data("countdown"),onTimeChange:function(e){n.html(_.template(t)({data:e||{}}))},step:"second",onTimeChangeEnd:function(){e.$(".js-info-wrapper").hide(),e.$(".js-to-start").addClass("hide"),e.$(".js-normal-btns").removeClass("hide")}})}if(o){var r=new i,l=s.find(".js-discount-time");r.run({seconds:l.data("countdown"),onTimeChange:function(e){l.html(_.template(h)({data:e||{}}))},step:"second",onTimeChangeEnd:function(){s.hide()}})}}},buyAction:function(e,t){if(this.buyConfig){window.Utils.getWxInfo()||{};return this.buyConfig.isAdmin&&!this.buyConfig.isMobile?(motify.log("预览不支持进行购买，<br />实际效果请在手机上进行。",5e3),!1):this.buyConfig.no_fans_buy?(setTimeout(function(){window.showGuide&&window.showGuide("follow",{goods:!0})},400),!1):void this.trigger(e,t)}},onRewardArrowClicked:function(e){var t=this.$(".js-arrow-down");t.hasClass("arrow-down")?(t.removeClass("arrow-down"),this.$(".js-trade-reward-info").addClass("hide-part-text")):(t.addClass("arrow-down"),this.$(".js-trade-reward-info").removeClass("hide-part-text"))},onBuyItClicked:function(e){return e.preventDefault(),e.stopPropagation(),$(e.target).prop("disabled")?!1:void this.buyAction("buy",e)},onAddCartClicked:function(e){return e.preventDefault(),e.stopPropagation(),$(e.target).prop("disabled")?!1:void this.buyAction("addcart",e)},onPointsBtnClicked:function(e){return e.preventDefault(),e.stopPropagation(),$(e.target).prop("disabled")?!1:void this.buyAction("points",e)},onSelectSkuClicked:function(e){return e.preventDefault(),e.stopPropagation(),$(e.target).prop("disabled")?!1:this.buyConfig.no_fans_buy?(setTimeout(function(){window.showGuide&&window.showGuide("follow",{goods:!0})},400),!1):void this.trigger("selectsku",e)},onSelectDeliveryClicked:function(e){var t=$(e.currentTarget).data("delivery").split(",");return e.preventDefault(),e.stopPropagation(),$(e.target).prop("disabled")?!1:void this.trigger("selectdelivery",{delivery:t})},onAddWishClicked:function(e){e.preventDefault(),e.stopPropagation();var t=this;this.nAddWish.hasClass("wish-added")?($._ajax({url:"/v2/trade/wish/list.json?kdt_id="+p.kdt_id,type:"DELETE",dataType:"json",cache:!1,timeout:15e3,data:{goods_id:this.goodsId},beforeSend:function(){t.isAjaxing=!0},success:function(e){0==e.code?(t.nAddWish.removeClass("wish-added"),motify.log("取消成功"),t.nAddWishBtn.removeClass("js-added-wish-btn").addClass("js-add-wish-btn").text("我想要")):motify.log(e.msg),t.isAjaxing=!1},error:function(e,i,n){t.isAjaxing=!1}}),window.Logger&&window.Logger.log({fm:"click",title:"add_wish"})):this.buyAction("add-wish",e)},onAddedWishClicked:function(){window.location.href=p.url.trade+"/wxpay/wish?kdt_id="+p.kdt_id},onGiftClicked:function(e){e.preventDefault(),e.stopPropagation(),this.buyAction("gift",e)},onGetPresent:function(e){e.preventDefault(),e.stopPropagation();var t=(p.sku||{}).messages||[],i=this;t.length?new s({contentViewClass:o,className:"sku-layout sku-box-shadow",contentViewOptions:{messages:t,onGetPresentClicked:function(e){i.getPresentToServer(e.postData)}}}).render().show():this.getPresentToServer()},onShowCashbackRule:function(){var e={cashBack:$("#cash-back-str").html().trim(),meetReduce:$("#meet-reduce-str").html().trim()};if(0!==e.cashBack.length||0!==e.meetReduce.length){var t=this.cashBackRuleTpl(e);new r({html:t,transparent:".8"}).render().show()}},onSkuChanged:function(e){var t=e.activedSkus||[],i=p.sku?p.sku.tree:[];_.each(i,function(e){var i=e.k_s,n=e.k;_.each(t,function(t){if(t.k_s===i){var s=t.v_id;_.each(e.v,function(e){s===e.id&&(n="‘"+e.name+"’")})}}),$(".js-sku-"+i).html(n)})},checkLogin:function(e,t){if(p.need_ajax_login){var i=new r({contentViewClass:a,contentViewOptions:{afterLogin:function(n){p.need_ajax_login=!1,i.hide(),e(t)}}});return void i.render().show()}e(t)},getPresentToServer:function(e){var t=function(e){var t=window._global,i=t.url.wap+"/trade/order/generateUserPresentOrder.jsonp",n=t.present.alias;$._ajax({url:i,type:"GET",dataType:"jsonp",cache:!1,data:_.extend({},e,{alias:n}),beforeSend:function(){motify.log("提交成功，跳转中…")},success:function(e){var t=e.code;if(0===t){var i=e.data.trade_confirm_url;window.location.href=i}else motify.log(e.msg)},error:function(e){motify.log("请求出错，请重试！")}})};return function(e){this.checkLogin(t,e)}}(),initGoodsQrCode:function(){var e={kdt_id:p.kdt_id,alias:p.alias,type:"goods"},t=p.url.wap;!n||n.isMobile()&&!n.isIPad()||$._ajax({url:t+"/common/url/goods.jsonp",type:"GET",dataType:"jsonp",cache:!1,data:e,success:function(e){var t=_.template(u);0===e.code?$("#js-qrcode-container").html(t(e.data)):motify.log(e.msg)},error:function(e){motify.log("二维码生成失败，请重试～～")}})},scrollToTitle:function(){var e=$(".custom-go-tao").offset().top;setTimeout(function(){window.scrollTo(0,e)},10)},wishAdded:function(){this.nAddWish.addClass("wish-added"),this.nAddWishBtn.addClass("js-added-wish-btn").removeClass("js-add-wish-btn").text("请TA来买单")},render:function(e){var t=this.$(".js-trade-reward"),i=this.$(".js-trade-reward-info"),n=t.width(),s=$.trim(i.text());return n<75+11*s.length&&this.$(".js-arrow-down").removeClass("hide"),this.initCountdown(),this}});return f}),define("text!wap/showcase/delivery/templates/delivery.html",[],function(){return'<h1 class="popup-delivery-title">支持以下配送方式<i class="popup-close js-close"></i></h1>\n<form class="popup-delivery-form js-delivery-form">\n    <% _.each(delivery, function(item, index) { %>\n        <label class="popup-delivery-item">\n            <span class="delivery-text"><%= item.text %></span>\n        </label>\n    <% }); %>\n</form>'}),define("wap/showcase/delivery/main",["text!wap/showcase/delivery/templates/delivery.html"],function(e){var t=Backbone.View.extend({templates:_.template(e),initialize:function(e){e=e||{},this.renderData=e.renderData||{},this.selectedValue=this.renderData.selectedValue||""},render:function(e){return e=e||{},this.$el.html(this.templates($.extend({},this.renderData,{selectedValue:this.selectedValue}))),this}});return t}),define("text!wap/showcase/goods/templates/recommend_goods.html",[],function(){return'<div class="js-recommend">\n	<p class="center font-size-14 c-black" style="padding: 5px 0;margin-top: 10px;">更多精选商品</p>\n\n	<div class="js-recommend-goods-list"></div>\n\n	<p class="center" style="margin: 10px 0 20px;">\n	    <a href="<%= window._global.url.wap %>/showcase/homepage?kdt_id=<%= window._global.kdt_id %>" class="center btn btn-white btn-xsmall font-size-14 " style="padding:8px 26px;">进店逛逛></a>\n	</p>\n</div>\n'}),define("text!wap/showcase/goods/templates/points_quota_tpl.html",[],function(){return'<div class="quota">每人限兑<%= quota %>件</div>\n'}),require(["zenjs/util/args","wap/showcase/goods/goods","wap/showcase/delivery/main","bower_components/pop/popup","text!wap/showcase/goods/templates/recommend_goods.html","text!wap/showcase/goods/templates/points_quota_tpl.html","zenjs/events","bower_components/wakeupapp/main"],function(e,t,i,n,s,o,a){var r=(window.Logger,window._global),l={goods:{goods_recommend:!0,tabber:!0,goods_detail:!0},fast_goods_detail:{tabber:!0}},d=Backbone.View.extend({initialize:function(i){var n=this;this.buyConfig={permissions:{wxPay:r.wxpay_env},isAdmin:r.is_owner_team,isMobile:r.is_mobile,team_certificate:r.team_certificate,no_fans_buy:r.no_fans_buy};var s=window._global.page_type||"goods";if(this.asyncs=l[s]||{},this.goodsView=new t({el:$("body"),buyConfig:this.buyConfig,asyncMap:this.asyncs}).render(),window.eventHandler=window.eventHandler||new a,window.eventHandler.on("wish:add",function(){n.goodsView.wishAdded()}),this.listenTo(this.goodsView,"buy",this.buy),this.listenTo(this.goodsView,"addcart",this.addCart),this.listenTo(this.goodsView,"selectsku",this.selectSku),this.listenTo(this.goodsView,"selectdelivery",this.selectDelivery),this.listenTo(this.goodsView,"gift",this.gift),this.listenTo(this.goodsView,"add-wish",this.addWish),this.listenTo(this.goodsView,"points",this.points),"true"!=e.get("showsku")||r.is_owner_team&&!r.is_mobile||$(".js-bottom-opts button").prop("disabled")||n.$(".js-buy-it").click(),"true"==e.get("dal")){var o=$("a,span");o.on("click",function(e){return $(e.target).hasClass("js-cancal-disable-link")?void 0:(e.preventDefault(),e.stopPropagation(),!1)}),$(".js-select-sku.sku-item").removeClass("js-select-sku"),$(".js-review-tabber-content").on("click",function(e){return e.preventDefault(),e.stopPropagation(),!1}),o.css("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)")}0===r.sku.stock_num&&$(".js-im-icon").css("bottom",84)},render:function(){return this.asyncs.goods_recommend?("reduce"===e.get("pagetype")||"wxd"!=e.get("kdtfrom")&&!r.goods_recommend||$._ajax({url:"/v2/showcase/goods/recommendgoodslist.json",type:"GET",dataType:"json",data:{alias:r.alias,count:10,kdt_id:r.kdt_id},success:function(e){var t=e.code,i=e.data;if(0===t){var n=i.html||"";if(n){var o=$(_.template(s)());
o.find(".js-recommend-goods-list").append(n),o.find(".js-goods-list-loading").remove(),o.find(".js-goods-list").css("visibility","visible"),$(".content-body").append(o),$&&$.fn&&$.fn.lazyload&&o.find(".js-goods-lazy").goodsLazyLoad()}}}}),this):this},gift:function(){this.displaySku({isAddCart:!1,isGift:!0})},goods:function(){this.popupView&&this.popupView.hide()},wishAdded:function(){this.goodsView.wishAdded()},buy:function(){this.displaySku({isAddCart:!1,multiBtn:r.pointsGoods?!0:!1})},addCart:function(){this.displaySku({isAddCart:!0,multiBtn:!1})},selectSku:function(){this.displaySku({multiBtn:!0})},selectDelivery:function(e){this.displayDelivery(e)},points:function(){var e=r.pointsGoods,t=e&&e.quota,i=e&&e.quota_used;return 0>=t-i?void window.motify.log("该商品每人限兑"+t+"件<br />您已兑换"+i+"件"):void this.displayPointsSku({isAddCart:!1,multiBtn:!1})},addWish:function(){this.displaySku({isAddWish:!0,isAddCart:!1,multiBtn:!1})},displayDelivery:function(e){var t=this;if(i){var s={delivery:{}};e.delivery.forEach(function(e,t){var i=e.split("|"),n=i[0],o=i[1];s.delivery[n]={text:o},0===t&&(s.selectedValue=n)}),this.deliveryPopupView||(this.deliveryPopupView=new n({contentViewClass:i,contentViewOptions:{renderData:s},transparent:.8,doNotRemoveOnHide:!0})),this.deliveryPopupView.render().show()}else setTimeout(function(){t.displayDelivery(e)},100)},displayPointsSku:function(e){var t=this;if(window.BuyView){var i=r,s=i.pointsGoods;this.pointsPopupView=new n({contentViewClass:window.BuyView,className:"sku-layout sku-box-shadow",onFinishHide:function(){e.isAddWish&&window.eventHandler&&window.eventHandler.trigger("wishScrollEnd")},contentViewOptions:{logURL:i.logURL,baseUrl:i.url.wap,need_ajax_login:i.need_ajax_login,wxpay_env:i.wxpay_env,isCartBtnHide:i.hide_shopping_cart,quotaTpl:o},transparent:.8}).render({sku:s.goods_sku,points_goods:s,goods_info:r.goods_info,isPoints:!0,isAddCart:e.isAddCart,isAddWish:e.isAddWish,isMultiBtn:e.multiBtn,goods_id:s.goods_id,postage:i.postage,activity_alias:i.activity_alias,activity_id:i.activity_id,activity_type:i.points_activity_type,quota:s.quota,quota_used:s.quota_used,activity:r.activity,isGift:e.isGift,is_virtual:+r.is_virtual>0}).show()}else setTimeout(function(){t.displayPointsSku(e)},100)},displaySku:function(e){var t=this;if(window.BuyView){var i=r;this.popupView||(this.popupView=new n({contentViewClass:window.BuyView,className:"sku-layout sku-box-shadow",doNotRemoveOnHide:!0,onFinishHide:function(){e.isAddWish&&window.eventHandler&&window.eventHandler.trigger("wishScrollEnd")},contentViewOptions:{logURL:i.logURL,baseUrl:i.url.wap,need_ajax_login:i.need_ajax_login,wxpay_env:i.wxpay_env,isCartBtnHide:i.hide_shopping_cart},transparent:.8})),this.popupView.render({sku:i.sku,goods_info:r.goods_info,isAddCart:e.isAddCart,isAddWish:e.isAddWish,isMultiBtn:e.multiBtn,goods_id:i.goods_id,postage:i.postage,activity_alias:i.activity_alias,activity_id:i.activity_id,activity_type:i.activity_type,quota:i.quota,quota_used:i.quota_used,activity:r.activity,isGift:e.isGift,is_virtual:+r.is_virtual>0}).show()}else setTimeout(function(){t.displaySku(e)},100)}});new d({el:$("body")}).render();var c="";$("body").on("click",".js-goto-luckymoney",function(){var e=function(){window.location.href=c};c?e():$._ajax({url:"/v2/fenxiao/77/hongbao.json",method:"get",data:{alias:r.teamAlias},success:function(t){0===t.code?(c=t.data,e()):window.motify.log("当前人数过多，领取失败，请重新领取")}})})}),define("main",function(){});