window.Utils=window.Utils||{},$.extend(window.Utils,{getWxInfo:function(){var t=window.navigator.userAgent,e=t.match(/MicroMessenger\/(\d+(\.\d+)*)/),i=null!==e&&e.length,n=i?parseFloat(e[1]):0;return{isWx:i,wxVersion:n}}}),define("wap/components/util/wx_info",function(){}),define("text!wap/showcase/goods/templates/goodsCount.html",[],function(){return'<% if ( data.day > 0 ) { %>\n<i class="mc-num-days"><%- (+data.day) %></i><span class="mc-text">天</span>\n<% } %>\n<% if ( data.day > 0 || data.hour > 0 ) { %>\n<i class="mc-num-hours"><%- (+data.hour) %></i><span class="mc-text">小时</span>\n<% } %>\n<i class="mc-num-minutes"><%- data.min %></i><span class="mc-text">分</span>\n<i class="mc-num-seconds"><%- data.sec %></i><span class="mc-text">秒</span>'}),define("zenjs/util/count_down",[],function(){function t(t){return 10>t?"0"+t:""+t}function e(e,i,n,s,o){var a=0,r=0,l=0,d=0,c=0,h="",u=new Date,p=e.getTime()-u.getTime();return 0>=p?(o.stop(),i({seconds:0,text:"00:00:000",hour:0,min:0,sec:0,msec:0,day:0},{day:t(0),hour:t(0),min:t(0),sec:t(0),msec:t(0)}),void n()):(p>=864e5&&(a=Math.floor(p/864e5),p-=864e5*a,h+=a+"天"),p>=36e5&&(r=Math.floor(p/36e5),p-=36e5*r,h+=r+"小时"),p>=6e4?(l=Math.floor(p/6e4)%60,d=Math.floor(p/1e3)%60,c=p%1e3):(l=0,d=Math.floor(p/1e3),c=p%1e3),10>l&&(h+="0"),h+=l+"分",10>d&&(h+="0"),h+=d+"秒",10>c?h+="00":100>c&&(h+="0"),"second"!=s&&(h+=c),void i({text:h,hour:r,min:l,sec:d,msec:c,day:a},{day:t(a),hour:t(r),min:t(l),sec:t(d),msec:t(c)}))}function i(){this.tid=null,this.startTime=null}var n=function(){};return i.prototype={run:function(t){function i(){l.tid=setTimeout(i,"second"==t.step?1e3:50),e(r,o,a,t.step,l)}this.startTime||(this.startTime=Date.now());var s=t.seconds||0,o=t.onTimeChange||n,a=t.onTimeChangeEnd||n;this.startTime+=1e3*s;var r=new Date(this.startTime),l=this;i()},stop:function(){clearTimeout(this.tid)}},i}),define("zenjs/util/jump_to_url",["require","bower_components/youzanjsbridge/api"],function(t){var e=t("bower_components/youzanjsbridge/api"),i=function(t){"youzanmars"==_global.platform?e.gotoWebview({page:"web",url:t}):location.href=t};return i}),define("zenjs/util/number",[],function(){var t={makeRandomString:function(t){var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t=t||10;for(var n=0;t>n;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}};return t}),define("bower_components/pop/pop",["require","zenjs/events","zenjs/util/number"],function(t){var e=function(){},i=t("zenjs/events"),n=t("zenjs/util/number");window.zenjs=window.zenjs||{};var s=i.extend({init:function(t){this._window=$(window);var i=n.makeRandomString();$("body").append('<div id="'+i+'"                 style="display:none; height: 100%;                 position: fixed; top: 0; left: 0; right: 0;                background-color: rgba(0, 0, 0, '+(t.transparent||".9")+');z-index:1000;opacity:0;transition: opacity ease 0.2s;"></div>'),this.nBg=$("#"+i),this.nBg.on("click",$.proxy(function(){this.isCanNotHide||this.hide()},this));var s=n.makeRandomString();$("body").append('<div id="'+s+'" class="'+(t.className||"")+'" style="overflow:hidden;visibility: hidden;"></div>'),this.nPopContainer=$("#"+s),this.nPopContainer.hide(),this.nPopContainer.css({opacity:0,position:"absolute","z-index":1e3}),t.contentViewClass&&(this.contentViewClass=t.contentViewClass,this.contentViewOptions=$.extend({el:this.nPopContainer},t.contentViewOptions||{}),this.contentView=new this.contentViewClass($.extend({onHide:$.proxy(this.hide,this)},this.contentViewOptions)),this.contentView.onHide=$.proxy(this.hide,this)),this.animationTime=t.animationTime||300,this.isCanNotHide=t.isCanNotHide,this.doNotRemoveOnHide=t.doNotRemoveOnHide||!1,this.onShow=t.onShow||e,this.onHide=t.onHide||e,this.onFinishHide=t.onFinishHide||e,this.html=t.html},render:function(t){return this.renderOptions=t||{},this.contentViewClass?this.contentView.render(this.renderOptions):this.html&&this.nPopContainer.html(this.html),this},show:function(){return this.nBg.show().css({opacity:"1","transition-property":"none"}),this.nPopContainer.show(),this.trigger("pop:show:before"),setTimeout($.proxy(function(){this.trigger("pop:show:after"),this.nPopContainer.show().css("visibility","visible"),this._doShow&&this._doShow(),this.onShow()},this),200),this},hide:function(t){t=t||{};var e=t.doNotRemove||this.doNotRemoveOnHide||!1;this._doHide&&this._doHide(),this.trigger("pop:hide:before"),setTimeout($.proxy(function(){this.nBg.css({opacity:0,"transition-property":"opacity"}),this.trigger("pop:hide:after"),setTimeout($.proxy(function(){this.nBg.hide(),this.nPopContainer.hide(),e||this.destroy()},this),200)},this),this.animationTime),this.onHide()},destroy:function(){return this.nPopContainer.remove(),this.nBg.remove(),this.contentView&&this.contentView.remove(),this}});return s}),define("bower_components/pop/pop_forbid_scroll",["require","./pop"],function(t){window.zenjs=window.zenjs||{};var e=t("./pop"),i=e.extend({init:function(t){this._super(t),this.on("pop:show:before",$.proxy(this.onBeforePopShow,this)),this.on("pop:show:after",$.proxy(this.onAfterPopShow,this)),this.on("pop:hide:after",$.proxy(this.onAfterPopHide,this))},onBeforePopShow:function(){this.top=this._window.scrollTop()},onAfterPopShow:function(){this._window.scrollTop(0),this.startShow()},onAfterPopHide:function(){var t,e=function(i){return t!==this._window.scrollTop()&&i>0?(this._window.scrollTop(t),void setTimeout($.proxy(e,this,i-1))):void setTimeout($.proxy(this.onFinishHide,this),50)};return function(){this.startHide(),t=this.top,this._window.scrollTop(t),$.proxy(e,this)(2),setTimeout($.proxy(function(){window.zenjs.popList.length<1&&$("html").css("position",this.htmlPosition)},this),200)}}(),startShow:function(){var t=window.zenjs.popList;if(t||(t=window.zenjs.popList=[]),0===t.length){var e=$("body"),i=$("html");this.htmlPosition=i.css("position"),i.css("position","relative"),this.bodyCss=(e.prop("style")||{}).cssText,this.htmlCss=(i.prop("style")||{}).cssText,$("body,html").css({overflow:"hidden",height:this._window.height()})}t.indexOf(this)<0&&t.push(this)},startHide:function(){var t=window.zenjs.popList,e=t.indexOf(this);e>-1&&t.splice(e,1),t.length<1&&($("html").attr("style",this.htmlCss||""),$("body").attr("style",this.bodyCss||""))}});return i}),define("bower_components/pop/popup",["require","./pop_forbid_scroll"],function(t){var e=t("./pop_forbid_scroll"),i=e.extend({init:function(t){this._super(t),this.onClickBg=t.onClickBg||function(){},this.onBeforePopupShow=t.onBeforePopupShow||function(){},this.onAfterPopupHide=t.onAfterPopupHide||function(){},this.nPopContainer.css(_.extend({left:0,right:0,bottom:0,background:"white"},t.containerCss||{})),this.nPopContainer.css("opacity","0"),this.nPopContainer.on("focus","input, textarea",function(t){var e=$(this),i=$(window),n=i.scrollTop(),s=e.offset().top;(0>s-n||s-n>100)&&setTimeout(function(){var t=s-70;i.scrollTop(t)},150)})},_doShow:function(){this.contentView&&this.contentView.height?this.height=this.contentView.height():this.contentView||(this.height=this.nPopContainer.height()),this.onBeforePopupShow(),$(".js-close").click($.proxy(function(t){this.hide()},this)),this.nPopContainer.addClass("popup"),this.nPopContainer.css({height:this.height+"px",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}),this.bodyPadding=$("body").css("padding"),$("body").css("padding","0px"),setTimeout($.proxy(function(){this.nPopContainer.css({transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-webkit-transition":"all ease "+this.animationTime+"ms",transition:"all ease "+this.animationTime+"ms",opacity:1})},this)),setTimeout($.proxy(function(){this.contentView&&this.contentView.onAfterPopupShow&&this.contentView.onAfterPopupShow()},this),this.animationTime)},_doHide:function(t){this.nPopContainer.css({transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)",opacity:0}),setTimeout($.proxy(function(){$("body").css("padding",this.bodyPadding),this.onAfterPopupHide()},this),this.animationTime)}});return i}),define("zenjs/uploader/photo_uploader",["require","bower_components/ajax/ajax","../util/ua"],function(t){t("bower_components/ajax/ajax");var e=t("../util/ua"),i=function(){},n=window._global,s=function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var t=document.createElement("input");return t.type="file",!t.disabled},o=function(){var t="youzanwsc"===n.platform&&n.platform_version<="3.0.0",i=e.getIOSVersion()>=9;return!(i&&t)},a=Backbone.View.extend({initialize:function(t){this.nInput=this.$("input"),this.nUploader=this.$("button"),this.save_to_shop=t.save_to_shop||!1,this.onValidUpload=t.onValidUpload||function(){return!0},this.onStartReadFile=t.onStartReadFile||i,this.onFinishReadFile=t.onFinishReadFile||i,this.onBeforeUpload=t.onBeforeUpload||i,this.onUploadSuccess=t.onUploadSuccess||i,this.onUploadError=t.onUploadError||i},events:{"click input":"onInputClicked","change input":"onFileChanged"},render:function(t){s()||(this.nInput.attr("disabled","disabled"),this.nUploader.css("padding-left","10px").html("您的浏览器不支持图片上传").attr("disabled","disabled")),o()||this.nInput.on("click",function(t){t.preventDefault(),motify.log("暂不支持图片上传功能")})},onInputClicked:function(t){t.target.value=""},onFileChanged:function(t){var e=this,i=t.target.files;_.map(i,function(t,i,n){if(t.size>5242880)return void motify.log("图片太大啦~");if(e.onValidUpload({file:t})){e.onStartReadFile({file:t});var s=new FileReader;s.onload=function(i){e.onFinishReadFile({src:i.target.result,file:t})},s.readAsDataURL(t),e.getUploadToken(t)}})},getUploadToken:function(t){var e=this;if(this.uptoken)return void this.doUploadPhoto(t);var i=window._global.url.materials+"/dock/token.json";"https:"===location.protocol&&(i=i.replace("http://","https://")),$._ajax({url:i,type:"post",dataType:"json",timeout:5e3,cache:!1,data:{scope:n.js.qn_public,kdt_id:n.kdt_id||""},xhrFields:{withCredentials:!0},beforeSend:function(){},success:function(i){e.uptoken=i.data.uptoken,e.doUploadPhoto(t)},error:function(t,e,i){},complete:function(t,e){}})},doUploadPhoto:function(t){var e=this,i=new FormData;i.append("token",this.uptoken),i.append("file",t),this.save_to_shop===!1&&i.append("x:skip_save",1);var s=t.name.split("."),o="";s.length>1&&(o="."+s[s.length-1]),i.append("x:ext",o),$._ajax({url:"//up.qbox.me",type:"post",data:i,dataType:"json",processData:!1,contentType:!1,timeout:8e4,beforeSend:function(){e.onBeforeUpload({file:t}),e.nInput.data("uploaded","false"),e.trigger("data_change"),e.trigger("data_change:start")},success:function(i){var s=n.url.imgqn+"/"+i.data.attachment_file;e.onUploadSuccess({url:s,file:t,data:i.data}),e.nInput.data("value",s),e.nInput.data("uploaded","true"),e.trigger("data_change"),e.trigger("data_change:success",{url:s})},error:function(i,n,s){e.onUploadError({file:t}),"timeout"===n&&motify.log("网络环境不佳<br/>请稍后重试")},complete:function(t,e){}})}});return a}),window.Utils=window.Utils||{},$.extend(window.Utils,{validMobile:function(t){return t=""+t,/^((\+86)|(86))?(1)\d{10}$/.test(t)},validPhone:function(t){return t=""+t,/^0[0-9\-]{10,13}$/.test(t)},validNumber:function(t){return/^\d+$/.test(t)},validEmail:function(t){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},validPostalCode:function(t){return t=""+t,/^\d{6}$/.test(t)}}),define("wap/components/util/valid",function(){}),define("text!wap/showcase/sku/templates/message.html",[],function(){return'<%\n    var PLACEHOLDER_MAP = {\n        id_no: \'填写中国大陆18位身份证号\',\n        text: \'\'\n    };\n%>\n\n<% if(messages.length !== 0) {%>\n    <div class=\'sku-message\'>\n        <% for (var j = 0, len = messages.length; j < len; j++) { %>\n        <dl class="clearfix">\n            <dt class="pull-left">\n                <label for="ipt-<%=j %>"><% if (messages[j].required == \'1\') { %><sup class="required">*</sup><% } %><%=messages[j].name %></label>\n            </dt>\n            <dd class="comment-wrapper clearfix">\n                <% if (messages[j].multiple == \'0\') { %>\n                    <% if (messages[j].type === \'image\') { %>\n                        <input data-valid-type="<%=messages[j].type %>"\n                            <% if (isKdtApp) { %>multiple="multiple"<% } %>\n                            <% if (messages[j].required == \'1\') { %>required<% } %>\n                            tabindex="<%=j + 1 %>" id="ipt-<%=j %>"\n                            name="message_<%=j %>"\n                            type="file"\n                            capture="camera"\n                            accept="image/*"\n                            class="js-message photo-input"\n                        >\n                        <button class="btn btn-white image-input-trigger"><span class="take-photo">拍照</span>或<span class="select-photo">选择照片</span></button>\n                        <div class=\'image-input-show hide\'>\n                            <img />\n                            <span class="img-tip">（仅限一张）</span>\n                        </div>\n                    <% } else { %>\n                        <input placeholder="<%= PLACEHOLDER_MAP[messages[j].type] || \'\' %>"\n                            data-valid-type="<%=messages[j].type %>"\n                            <% if (messages[j].required == \'1\') { %>required<% } %>\n                            tabindex="<%=j + 1 %>"\n                            id="ipt-<%=j %>"\n                            name="message_<%=j %>"\n                            type="<%= (\'id_no\' === messages[j].type) ? \'text\' : messages[j].type %>" data-type="<%=messages[j].type %>"\n                            class="txt js-message font-size-14"\n                            <% if (\'id_no\' === messages[j].type && id_no.length > 0) { %>value="<%=id_no %>"<% } %>\n                        >\n                    <% } %>\n                <% } else { %>\n                    <textarea data-valid-type="<%=messages[j].type %>"\n                        <% if (messages[j].required == \'1\') { %>required<% } %>\n                        tabindex="<%=j + 1 %>"\n                        id="ipt-<%=j %>"\n                        name="message_<%=j %>"\n                        cols="32"\n                        rows="1"\n                        class="txta js-message font-size-14"></textarea>\n                <% } %>\n            </dd>\n        </dl>\n        <% } %>\n    </div>\n<% } %>\n'}),function(t){var e;t.localStorage;try{var i=new Date;try{localStorage.setItem(i,i)}catch(n){if(22===n.code)throw"localstorage define error"}var s=localStorage.getItem(i)==i;if(localStorage.removeItem(i),!s)throw"localstorage define error";if("FUNCTION"!=(typeof localStorage.clear).toUpperCase())throw"localstorage define error";e=localStorage}catch(n){var o=function(){return null};e={getItem:o,setItem:o,removeItem:o,clear:o}}"function"==typeof define&&define.amd&&define("zenjs/util/local_storage",[],function(){return e}),t.YZLocalStorage=e}(window),define("wap/showcase/sku/views/message",["require","zenjs/uploader/photo_uploader","wap/components/util/valid","text!wap/showcase/sku/templates/message.html","zenjs/util/ua","zenjs/util/local_storage"],function(t){var e=t("zenjs/uploader/photo_uploader"),i=(t("wap/components/util/valid"),t("text!wap/showcase/sku/templates/message.html")),n=t("zenjs/util/ua"),s=t("zenjs/util/local_storage"),o=n.isIOS(),a="youzanwsc"===window._global.platform||"youzanwxd"===window._global.platform,r=Backbone.View.extend({template:_.template(i),initialize:function(t){this.messages=this.options.messages||[]},render:function(){this.$el.html(this.template({messages:this.messages,id_no:s.getItem("id_no")||"",isIOS:o,isKdtApp:a})),0===this.messages.length&&this.$el.hide();var t=this.$(".photo-input");return this.photoUploaders=[],t.each(_(function(t,i){var n=$(i).parent(),s=n.find("img"),o=n.find(".image-input-show"),a=n.find("button"),r=new e({el:n,onFinishReadFile:function(t){o.removeClass("hide"),s.attr("src",t.src)},onBeforeUpload:function(){a.html("正在上传...")},onUploadSuccess:function(t){motify.log("上传成功"),s.attr("src",t.url+"!100x100.jpg"),a.html('<span class="take-photo">重拍</span>或<span class="select-photo">重新选择照片</span>')},onUploadError:function(){a.html("重新上传")}}).render();this.photoUploaders.push(r)}).bind(this)),o||this.$el.find("input[type=date], input[type=time]").on("mouseover mousedown mouseup select click dblclick touchstart touchmove touchend touchcancel",function(t){t.stopPropagation()}),this},validate:function(t){for(var e,i,n,s,o=this,a=this.messages,r=0,l=a.length;l>r;r++){if(e="message_"+r,i=$.trim(t[e]),n=a[r],_.isEmpty(i)){if("1"==n.required)return o.$el.find("#ipt-"+r).focus(),"image"==n.type?motify.log("请上传 "+n.name+"。"):motify.log("请填写 "+n.name+"。"),!1}else{if("image"==n.type&&(s=o.$el.find("#ipt-"+r).data("uploaded"),"false"==s||!s))return motify.log("图片还在上传中，请稍等。。"),!1;if("tel"==n.type&&!Utils.validNumber(i))return o.$el.find("#ipt-"+r).focus(),motify.log("请填写正确的"+n.name+"。"),!1;if("email"==n.type&&!Utils.validEmail(i))return o.$el.find("#ipt-"+r).focus(),motify.log("请填写正确的"+n.name+"。"),!1;if("id_no"==n.type&&(i.length<15||i.length>18))return o.$el.find("#ipt-"+r).focus(),motify.log("请填写正确的"+n.name+"。"),!1}if(i.length>200)return motify.log(n.name+" 写的太多了<br/>不要超过200字"),!1}return!0},getData:function(){var t={};return this.$("dl .js-message").each(function(e,i){if("file"==i.type)var n=$(i).data("value");t[i.name]=n||i.value||"","id_no"===$(i).data("type")&&s.setItem("id_no",$(i).val())}),this.validate(t)?t:null}});return r}),define("text!wap/showcase/goods/templates/present_sku.html",[],function(){return'\n<div class="adv-opts layout-content">\n    <div class="goods-models js-sku-views block block-list border-top-0">\n    </div>\n    <div class="confirm-action content-foot">\n        <a href="javascript:;" class="js-sku-get-present btn btn-block btn-next btn-green">领取赠品</a>\n    </div>\n</div>\n'}),define("wap/showcase/goods/views/present_sku",["wap/showcase/sku/views/message","text!wap/showcase/goods/templates/present_sku.html"],function(t,e){return Backbone.View.extend({events:{"click .js-sku-get-present":"_onGetPresentClicked","click .js-cancel":"_onCancelClicked"},initialize:function(t){t=t||{},this.messages=t.messages||[],this.onHide=t.onHide||function(){},this.onGetPresentClicked=t.onGetPresentClicked},render:function(){return this.$el.html(e),this.nSkuContainer=this.$(".js-sku-views"),this.messageView=new t({messages:this.messages,className:"block-item block-item-messages"}),this.nSkuContainer.append(this.messageView.render().el),this},_onGetPresentClicked:function(){var t=this.messageView.getData();t&&this.onGetPresentClicked({postData:t})},_onCancelClicked:function(t){this.onHide()}})}),define("bower_components/aes/aes",["require","exports","module"],function(t,e,i){var n=n||function(t,e){var i={},n=i.lib={},s=function(){},o=n.Base={extend:function(t){s.prototype=this;var e=new s;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,i){t=this.words=t||[],this.sigBytes=i!=e?i:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var s=0;t>s;s++)e[n+s>>>2]|=(i[s>>>2]>>>24-8*(s%4)&255)<<24-8*((n+s)%4);else if(65535<i.length)for(s=0;t>s;s+=4)e[n+s>>>2]=i[s>>>2];else e.push.apply(e,i);return this.sigBytes+=t,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-8*(i%4),e.length=t.ceil(i/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var i=[],n=0;e>n;n+=4)i.push(4294967296*t.random()|0);return new a.init(i,e)}}),r=i.enc={},l=r.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;t>n;n++){var s=e[n>>>2]>>>24-8*(n%4)&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-4*(n%8);return new a.init(i,e/2)}},d=r.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;t>n;n++)i.push(String.fromCharCode(e[n>>>2]>>>24-8*(n%4)&255));return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-8*(n%4);return new a.init(i,e)}},c=r.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},h=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var i=this._data,n=i.words,s=i.sigBytes,o=this.blockSize,r=s/(4*o),r=e?t.ceil(r):t.max((0|r)-this._minBufferSize,0);if(e=r*o,s=t.min(4*e,s),e){for(var l=0;e>l;l+=o)this._doProcessBlock(n,l);l=n.splice(0,e),i.sigBytes-=s}return new a.init(l,s)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,i){return new t.init(i).finalize(e)}},_createHmacHelper:function(t){return function(e,i){return new u.HMAC.init(t,i).finalize(e)}}});var u=i.algo={};return i}(Math);!function(){var t=n,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,n=this._map;t.clamp(),t=[];for(var s=0;i>s;s+=3)for(var o=(e[s>>>2]>>>24-8*(s%4)&255)<<16|(e[s+1>>>2]>>>24-8*((s+1)%4)&255)<<8|e[s+2>>>2]>>>24-8*((s+2)%4)&255,a=0;4>a&&i>s+.75*a;a++)t.push(n.charAt(o>>>6*(3-a)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var i=t.length,n=this._map,s=n.charAt(64);s&&(s=t.indexOf(s),-1!=s&&(i=s));for(var s=[],o=0,a=0;i>a;a++)if(a%4){var r=n.indexOf(t.charAt(a-1))<<2*(a%4),l=n.indexOf(t.charAt(a))>>>6-2*(a%4);s[o>>>2]|=(r|l)<<24-8*(o%4),o++}return e.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,i,n,s,o,a){return t=t+(e&i|~e&n)+s+a,(t<<o|t>>>32-o)+e}function i(t,e,i,n,s,o,a){return t=t+(e&n|i&~n)+s+a,(t<<o|t>>>32-o)+e}function s(t,e,i,n,s,o,a){return t=t+(e^i^n)+s+a,(t<<o|t>>>32-o)+e}function o(t,e,i,n,s,o,a){return t=t+(i^(e|~n))+s+a,(t<<o|t>>>32-o)+e}for(var a=n,r=a.lib,l=r.WordArray,d=r.Hasher,r=a.algo,c=[],h=0;64>h;h++)c[h]=4294967296*t.abs(t.sin(h+1))|0;r=r.MD5=d.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var a=0;16>a;a++){var r=n+a,l=t[r];t[r]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var a=this._hash.words,r=t[n+0],l=t[n+1],d=t[n+2],h=t[n+3],u=t[n+4],p=t[n+5],f=t[n+6],m=t[n+7],g=t[n+8],w=t[n+9],v=t[n+10],y=t[n+11],_=t[n+12],b=t[n+13],x=t[n+14],k=t[n+15],j=a[0],C=a[1],F=a[2],$=a[3],j=e(j,C,F,$,r,7,c[0]),$=e($,j,C,F,l,12,c[1]),F=e(F,$,j,C,d,17,c[2]),C=e(C,F,$,j,h,22,c[3]),j=e(j,C,F,$,u,7,c[4]),$=e($,j,C,F,p,12,c[5]),F=e(F,$,j,C,f,17,c[6]),C=e(C,F,$,j,m,22,c[7]),j=e(j,C,F,$,g,7,c[8]),$=e($,j,C,F,w,12,c[9]),F=e(F,$,j,C,v,17,c[10]),C=e(C,F,$,j,y,22,c[11]),j=e(j,C,F,$,_,7,c[12]),$=e($,j,C,F,b,12,c[13]),F=e(F,$,j,C,x,17,c[14]),C=e(C,F,$,j,k,22,c[15]),j=i(j,C,F,$,l,5,c[16]),$=i($,j,C,F,f,9,c[17]),F=i(F,$,j,C,y,14,c[18]),C=i(C,F,$,j,r,20,c[19]),j=i(j,C,F,$,p,5,c[20]),$=i($,j,C,F,v,9,c[21]),F=i(F,$,j,C,k,14,c[22]),C=i(C,F,$,j,u,20,c[23]),j=i(j,C,F,$,w,5,c[24]),$=i($,j,C,F,x,9,c[25]),F=i(F,$,j,C,h,14,c[26]),C=i(C,F,$,j,g,20,c[27]),j=i(j,C,F,$,b,5,c[28]),$=i($,j,C,F,d,9,c[29]),F=i(F,$,j,C,m,14,c[30]),C=i(C,F,$,j,_,20,c[31]),j=s(j,C,F,$,p,4,c[32]),$=s($,j,C,F,g,11,c[33]),F=s(F,$,j,C,y,16,c[34]),C=s(C,F,$,j,x,23,c[35]),j=s(j,C,F,$,l,4,c[36]),$=s($,j,C,F,u,11,c[37]),F=s(F,$,j,C,m,16,c[38]),C=s(C,F,$,j,v,23,c[39]),j=s(j,C,F,$,b,4,c[40]),$=s($,j,C,F,r,11,c[41]),F=s(F,$,j,C,h,16,c[42]),C=s(C,F,$,j,f,23,c[43]),j=s(j,C,F,$,w,4,c[44]),$=s($,j,C,F,_,11,c[45]),F=s(F,$,j,C,k,16,c[46]),C=s(C,F,$,j,d,23,c[47]),j=o(j,C,F,$,r,6,c[48]),$=o($,j,C,F,m,10,c[49]),F=o(F,$,j,C,x,15,c[50]),C=o(C,F,$,j,p,21,c[51]),j=o(j,C,F,$,_,6,c[52]),$=o($,j,C,F,h,10,c[53]),F=o(F,$,j,C,v,15,c[54]),C=o(C,F,$,j,l,21,c[55]),j=o(j,C,F,$,g,6,c[56]),$=o($,j,C,F,k,10,c[57]),F=o(F,$,j,C,f,15,c[58]),C=o(C,F,$,j,b,21,c[59]),j=o(j,C,F,$,u,6,c[60]),$=o($,j,C,F,y,10,c[61]),F=o(F,$,j,C,d,15,c[62]),C=o(C,F,$,j,w,21,c[63]);a[0]=a[0]+j|0,a[1]=a[1]+C|0,a[2]=a[2]+F|0,a[3]=a[3]+$|0},_doFinalize:function(){var e=this._data,i=e.words,n=8*this._nDataBytes,s=8*e.sigBytes;i[s>>>5]|=128<<24-s%32;var o=t.floor(n/4294967296);for(i[(s+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[(s+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(i.length+1),this._process(),e=this._hash,i=e.words,n=0;4>n;n++)s=i[n],i[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);return e},clone:function(){var t=d.clone.call(this);return t._hash=this._hash.clone(),t}}),a.MD5=d._createHelper(r),a.HmacMD5=d._createHmacHelper(r)}(Math),function(){var t=n,e=t.lib,i=e.Base,s=e.WordArray,e=t.algo,o=e.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i=this.cfg,n=i.hasher.create(),o=s.create(),a=o.words,r=i.keySize,i=i.iterations;a.length<r;){l&&n.update(l);var l=n.update(t).finalize(e);n.reset();for(var d=1;i>d;d++)l=n.finalize(l),n.reset();o.concat(l)}return o.sigBytes=4*r,o}});t.EvpKDF=function(t,e,i){return o.create(i).compute(t,e)}}(),n.lib.Cipher||function(t){var e=n,i=e.lib,s=i.Base,o=i.WordArray,a=i.BufferedBlockAlgorithm,r=e.enc.Base64,l=e.algo.EvpKDF,d=i.Cipher=a.extend({cfg:s.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,i,n){return("string"==typeof i?m:f).encrypt(t,e,i,n)},decrypt:function(e,i,n){return("string"==typeof i?m:f).decrypt(t,e,i,n)}}}});i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=e.mode={},h=function(e,i,n){var s=this._iv;s?this._iv=t:s=this._prevBlock;for(var o=0;n>o;o++)e[i+o]^=s[o]},u=(i.BlockCipherMode=s.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();u.Encryptor=u.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize;h.call(this,t,e,n),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),u.Decryptor=u.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,s=t.slice(e,e+n);i.decryptBlock(t,e),h.call(this,t,e,n),this._prevBlock=s}}),c=c.CBC=u,u=(e.pad={}).Pkcs7={pad:function(t,e){for(var i=4*e,i=i-t.sigBytes%i,n=i<<24|i<<16|i<<8|i,s=[],a=0;i>a;a+=4)s.push(n);i=o.create(s,i),t.concat(i)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:c,padding:u}),reset:function(){d.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=t.createEncryptor;else i=t.createDecryptor,this._minBufferSize=1;this._mode=i.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var p=i.CipherParams=s.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),c=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?o.create([1398893684,1701076831]).concat(t).concat(e):e).toString(r)},parse:function(t){t=r.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var i=o.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:i})}},f=i.SerializableCipher=s.extend({cfg:s.extend({format:c}),encrypt:function(t,e,i,n){n=this.cfg.extend(n);var s=t.createEncryptor(i,n);return e=s.finalize(e),s=s.cfg,p.create({ciphertext:e,key:i,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(i,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,i,n){return n||(n=o.random(8)),t=l.create({keySize:e+i}).compute(t,n),i=o.create(t.words.slice(e),4*i),t.sigBytes=4*e,p.create({key:t,iv:i,salt:n})}},m=i.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:e}),encrypt:function(t,e,i,n){return n=this.cfg.extend(n),i=n.kdf.execute(i,t.keySize,t.ivSize),n.iv=i.iv,t=f.encrypt.call(this,t,e,i.key,n),t.mixIn(i),t},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),i=n.kdf.execute(i,t.keySize,t.ivSize,e.salt),n.iv=i.iv,f.decrypt.call(this,t,e,i.key,n)}})}(),function(){for(var t=n,e=t.lib.BlockCipher,i=t.algo,s=[],o=[],a=[],r=[],l=[],d=[],c=[],h=[],u=[],p=[],f=[],m=0;256>m;m++)f[m]=128>m?m<<1:m<<1^283;for(var g=0,w=0,m=0;256>m;m++){var v=w^w<<1^w<<2^w<<3^w<<4,v=v>>>8^255&v^99;s[g]=v,o[v]=g;var y=f[g],_=f[y],b=f[_],x=257*f[v]^16843008*v;a[g]=x<<24|x>>>8,r[g]=x<<16|x>>>16,l[g]=x<<8|x>>>24,d[g]=x,x=16843009*b^65537*_^257*y^16843008*g,c[v]=x<<24|x>>>8,h[v]=x<<16|x>>>16,u[v]=x<<8|x>>>24,p[v]=x,g?(g=y^f[f[f[b^y]]],w^=f[f[w]]):g=w=1}var k=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,i=t.sigBytes/4,t=4*((this._nRounds=i+6)+1),n=this._keySchedule=[],o=0;t>o;o++)if(i>o)n[o]=e[o];else{var a=n[o-1];o%i?i>6&&4==o%i&&(a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[255&a]):(a=a<<8|a>>>24,a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[255&a],a^=k[o/i|0]<<24),n[o]=n[o-i]^a}for(e=this._invKeySchedule=[],i=0;t>i;i++)o=t-i,a=i%4?n[o]:n[o-4],e[i]=4>i||4>=o?a:c[s[a>>>24]]^h[s[a>>>16&255]]^u[s[a>>>8&255]]^p[s[255&a]];
},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,r,l,d,s)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this._doCryptBlock(t,e,this._invKeySchedule,c,h,u,p,o),i=t[e+1],t[e+1]=t[e+3],t[e+3]=i},_doCryptBlock:function(t,e,i,n,s,o,a,r){for(var l=this._nRounds,d=t[e]^i[0],c=t[e+1]^i[1],h=t[e+2]^i[2],u=t[e+3]^i[3],p=4,f=1;l>f;f++)var m=n[d>>>24]^s[c>>>16&255]^o[h>>>8&255]^a[255&u]^i[p++],g=n[c>>>24]^s[h>>>16&255]^o[u>>>8&255]^a[255&d]^i[p++],w=n[h>>>24]^s[u>>>16&255]^o[d>>>8&255]^a[255&c]^i[p++],u=n[u>>>24]^s[d>>>16&255]^o[c>>>8&255]^a[255&h]^i[p++],d=m,c=g,h=w;m=(r[d>>>24]<<24|r[c>>>16&255]<<16|r[h>>>8&255]<<8|r[255&u])^i[p++],g=(r[c>>>24]<<24|r[h>>>16&255]<<16|r[u>>>8&255]<<8|r[255&d])^i[p++],w=(r[h>>>24]<<24|r[u>>>16&255]<<16|r[d>>>8&255]<<8|r[255&c])^i[p++],u=(r[u>>>24]<<24|r[d>>>16&255]<<16|r[c>>>8&255]<<8|r[255&h])^i[p++],t[e]=m,t[e+1]=g,t[e+2]=w,t[e+3]=u},keySize:8});t.AES=e._createHelper(i)}(),n.pad.Iso10126={pad:function(t,e){var i=4*e,i=i-t.sigBytes%i;t.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},i.exports=n}),define("bower_components/aes/main",["require","./aes"],function(t){var e=t("./aes"),i=e.enc.Utf8.parse("youzan.com.aesiv"),n=e.enc.Utf8.parse("youzan.com._key_");return{encrypt:function(t){return t=e.enc.Utf8.parse(t),e.AES.encrypt(t,n,{mode:e.mode.CBC,padding:e.pad.Iso10126,iv:i}).toString()}}}),define("text!bower_components/login/templates/init.html",[],function(){return'<form class="js-login-form popout-login" method="GET" action="">\n    <div class="header c-green center">\n        <h2>请填写您的手机号码</h2>\n    </div>\n    <fieldset class="wrapper-form font-size-14">\n        <div class="form-item">\n            <label for="phone">手机号</label>\n            <input id="phone" name="phone" type="tel" maxlength="11" autocomplete="off" placeholder="" value="<%= phone %>">\n        </div>\n        <div class="js-help-info font-size-12 error c-orange"></div>\n    </fieldset>\n    <div class="action-container">\n        <input type="submit" class="js-confirm btn btn-green btn-block font-size-14" value="确认手机号码" />\n    </div>\n</form>\n'}),define("text!bower_components/login/templates/login.html",[],function(){return'<form class="js-login-form popout-login" method="GET" action="">\n    <div class="header c-green center">\n        <h2>该号码注册过，请直接登录</h2>\n    </div>\n    <fieldset class="wrapper-form font-size-14">\n        <div class="form-item">\n            <label for="phone">手机号</label>\n            <input id="phone" name="phone" type="tel" maxlength="11" autocomplete="off" placeholder="请输入你的手机号" disabled="disabled" value="<%= phone %>">\n        </div>\n        <div class="form-item">\n            <label for="password">密码</label>\n            <input id="passsword" name="password"  type="password" autocomplete="off" placeholder="请输入登录密码">\n        </div>\n        <div class="js-help-info font-size-12 error c-orange"></div>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-confirm btn btn-green btn-block font-size-14">\n            <%= showBindText ? \'登录并绑定\' : \'确认\' %>\n        </button>\n    </div>\n    <div class="bottom-tips font-size-12">\n        <span class="c-orange">如果您忘了密码，请</span><a href="javascript:;" class="js-change-pwd c-blue">点此找回密码</a>\n        <a href="javascript:;" class="js-change-phone c-blue pull-right">更换手机号</a>\n    </div>\n</form>\n'}),define("text!bower_components/login/templates/register.html",[],function(){return'<form class="js-login-form popout-login" method="GET" action="">\n    <div class="header c-green center">\n        <h2>注册有赞帐号</h2>\n    </div>\n    <fieldset class="wrapper-form font-size-14">\n        <div class="form-item">\n            <label for="phone">手机号</label>\n            <input id="phone" name="phone" type="tel" maxlength="11" autocomplete="off" placeholder="请输入你的手机号" disabled="disabled" value="<%= phone %>">\n        </div>\n        <div class="form-item js-image-verify hide">\n            <label for="verifycode">身份校验</label>\n            <input id="verifycode" name="verifycode" class="js-verify-code item-input"  type="tel" style="width:178px" maxlength="6" autocomplete="off" placeholder="输入右侧数字">\n            <img class="js-verify-image verify-image" src="">\n        </div>\n        <div class="form-item">\n            <label for="code">验证码</label>\n            <input id="code" name="code"  type="text" style="width:178px" maxlength="6" autocomplete="off" placeholder="输入短信验证码">\n            <button type="button" class="js-auth-code tag btn-auth-code tag-green font-size-12" data-text="获取验证码">\n                获取验证码\n            </button>\n        </div>\n        <div class="form-item">\n            <label for="password">密码</label>\n            <input id="passsword" name="password"  type="password" autocomplete="off" maxlength="20" placeholder="请输入8-20位数字和字母组合">\n        </div>\n        <div class="js-help-info font-size-12 error c-orange"></div>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-confirm btn btn-green btn-block font-size-14">\n            <%= showBindText ? \'注册并绑定\' : \'确认\' %>\n        </button>\n    </div>\n    <div class="bottom-tips font-size-12">\n        <span class="c-orange">如果您忘了密码，请</span><a href="javascript:;" class="js-change-pwd c-blue">点此找回密码</a>\n        <a href="javascript:;" class="js-change-phone c-blue pull-right">更换手机号</a>\n    </div>\n</form>\n'}),define("text!bower_components/login/templates/change_pwd.html",[],function(){return'<form class="js-login-form popout-login" method="GET" action="">\n    <div class="header c-green center">\n        <h2><%if(isSetting){%>设定<%}else{%>找回<%}%>帐号密码</h2>\n    </div>\n    <fieldset class="wrapper-form font-size-14">\n        <div class="form-item">\n            <label for="phone">手机号</label>\n            <input id="phone" name="phone" type="tel" maxlength="11" autocomplete="off" placeholder="请输入你的手机号" disabled="disabled" value="<%= phone %>">\n        </div>\n        <div class="form-item js-image-verify hide">\n            <label for="verifycode">身份校验</label>\n            <input id="verifycode" name="verifycode" class="js-verify-code item-input"  type="tel" style="width:178px" maxlength="6" autocomplete="off" placeholder="输入右侧数字">\n            <img class="js-verify-image verify-image" src="">\n        </div>\n        <div class="form-item">\n            <label for="code">验证码</label>\n            <input id="code" name="code"  type="text" style="width:178px" maxlength="6" autocomplete="off" placeholder="输入短信验证码">\n            <button type="button" class="js-auth-code tag btn-auth-code font-size-12 tag-green" data-text="获取验证码">\n                获取验证码\n            </button>\n        </div>\n        <div class="form-item">\n            <label for="password">密码</label>\n            <input id="passsword" name="password"  type="password" autocomplete="off" placeholder="设置新的8-20位数字和字母组合密码">\n        </div>\n        <div class="js-help-info font-size-12 error c-orange"></div>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-confirm btn btn-green btn-block font-size-14">确定</button>\n    </div>\n    <div class="bottom-tips pull-right">\n        <a href="javascript:;" class="js-login inline-item c-blue">已有帐号登录</a>\n        <a href="javascript:;" class="js-register inline-item c-blue">注册新帐号</a>\n    </div>\n</form>\n'}),define("zenjs/util/valid",[],function(){window.zenjs=window.zenjs||{};var t={validMobile:function(t){return t=""+t,/^((\+86)|(86))?(1)\d{10}$/.test(t)},validPhone:function(t){return t=""+t,/^0[0-9\-]{10,13}$/.test(t)},validNumber:function(t){return/^\d+$/.test(t)},validEmail:function(t){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},validPostalCode:function(t){return t=""+t,/^\d{6}$/.test(t)}};return window.zenjs.Valid=t,t}),window.Zepto&&function(t){t.fn.serializeArray=function(){var e,i,n=[],s=function(t){return t.forEach?t.forEach(s):void n.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(n,o){i=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||o.checked)&&s(t(o).val())}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),define("vendor/zepto/form",function(){}),define("zenjs/util/form",["require","exports","module","vendor/zepto/form","jquery"],function(t,e,i){t("vendor/zepto/form");var n=t("jquery");window.zenjs=window.zenjs||{};var s={getFormData:function(t){var e=t.serializeArray(),i={};return n.map(e,function(t){i[t.name]=t.value}),i}};window.zenjs.Form=s,i.exports=s}),define("zenjs/sms_fetch/main",["require","exports","module","bower_components/ajax/ajax","jquery"],function(t,e,i){function n(){this.loadingLock=!1,this.isUsed=void 0}function s(t){t=t||{},this.$el=o(t.el||t.$el||"<div></div>"),this.el=this.$el[0],this.$=function(t){return this.$el.find(t)},this.initialize&&this.initialize(t)}t("bower_components/ajax/ajax");var o=t("jquery"),a=function(){};n.prototype={fetch:function(){if(this.isUsed!==!1){var t=this;this.loadingLock=!0,o._ajax({url:window._global.url.www.replace(/^https?:\/\//,"//")+"/common/token/token.jsonp",type:"get",dataType:"jsonp"}).done(function(e){0==e.code?(t.token=e.data,t.loadingLock=!1,t.isUsed=!1):motify.log(e.msg)}).fail(function(){motify.log("token 获取失败")})}},get:function(){return this.isUsed=!0,this.token}};var r=new n;o.extend(s.prototype,{initialize:function(t){this.duration=t.time||60,this.step=t.step||1100,this.codeVerifyClass=t.codeVerifyClass||"js-verify-code",this.verifyType="smsFetch";var e=window._global.url.www.replace(/^https?:\/\//,"//");this.smsFetchUrl=e+"/common/sms/captcha.jsonp",this.imgUrl=e+"/common/sms/imgcaptcha",this.imgVerifyUrl=e+"/common/sms/imgcaptcha.jsonp",this.biz=t.biz||"kdt_account_captcha",this.onTimeChange=t.onTimeChange||a,this.onTimeEnd=t.onTimeEnd||a,this.onTimerStart=t.onTimerStart||a,this.onTimerClose=t.onTimerClose||a,this.onVerifyPictureShow=t.onVerifyPictureShow||a,this.onGetCodeError=t.onGetCodeError||a,this.onVerifyPictureSuccess=t.onVerifyPictureSuccess||a,this.onVerifyPictureError=t.onVerifyPictureError||a,this.platform=t.platform||"",this.subFrom=t.subFrom||"",r.fetch()},setMobile:function(t){t&&(this.mobile=t)},getImageCode:function(){return o.trim(this.$("."+this.codeVerifyClass).val())},getSms:function(t){var e=this;if(r.loadingLock)return void motify.log("数据加载中，稍后再试");if(t=t||{},t.mobile&&(this.mobile=t.mobile),!this.mobile)return!1;var i={smsFetch:e.onSmsFetchHandler,image:e.onImageHandler};return e.startTimer.call(e),(i[e.verifyType]||a).call(e),this},startTimer:function(){this.onTimerStart(),this.btnCountdown(this.duration)},stopTimer:function(){clearTimeout(this.timer),this.onTimerClose()},btnCountdown:function(t){var e=this;this.onTimeChange({second:t}),--t>=0?this.timer=setTimeout(function(){e.btnCountdown(t)},this.step):(this.onTimeEnd(),this.timer="")},onVerifyImageShow:function(t){this.$(".js-image-verify").removeClass("hide"),this.$(".js-verify-image").attr("src",t)},onVerifyImageHide:function(){this.$(".js-image-verify").addClass("hide")},onSmsFetchHandler:function(){var t=1;return function(){var e=this,i={verifyTimes:t,mobile:this.mobile,biz:this.biz,token:r.get()};this.platform&&(i.platform=this.platform),this.subFrom&&(i.sub_from=this.subFrom),o._ajax({url:this.smsFetchUrl,dataType:"jsonp",data:i,success:function(i){return 0==i.code?void t++:(e.stopTimer.call(e),e.onGetCodeError.call(e),void(10111===i.code?(e.verifyType="image",e.onVerifyImageShow(e.imgUrl),e.onVerifyPictureShow()):(t++,motify.log(i.msg))))},error:function(i,n,s){t++,e.stopTimer.call(e),e.onGetCodeError.call(e),motify.log("获取验证码失败，请稍后再试")},complete:function(t,e){}}).always(function(){r.fetch()})}}(),onImageHandler:function(){var t=this,e=this.mobile;o._ajax({url:this.imgVerifyUrl,dataType:"jsonp",data:{mobile:e,captcha_code:this.getImageCode()},success:function(i){return 0===i.code?(t.verifyType="smsFetch",t.mobile=e,t.onVerifyImageHide(),t.onVerifyPictureSuccess(),void t.onSmsFetchHandler()):(t.stopTimer.call(t),t.onVerifyPictureError.call(t),void(10100===i.code?(motify.log(i.msg),t.$el.find(".js-verify-image").attr("src",t.imgUrl)):motify.log(i.msg)))},error:function(e,i,n){t.stopTimer.call(t),t.onVerifyPictureError.call(t),motify.log("图形验证失败，重试一下吧~"),t.$el.find(".js-verify-image").attr("src",t.imgUrl)},complete:function(t,e){}})}}),i.exports=s}),define("zenjs/util/url_helper",[],function(){var t={site:function(t,e){var i=window._global.env,n=window._global.url;"static"===e&&"online"===i&&(e="cdn_static");var s=t;return e=e?n[e]||"":"",-1==t.search(/^http[s]?\:\/\//)&&("/"!==t[0]&&(t="/"+t),s=e+t),s},getCdnImageUrl:function(t,e){if(!t)return window._global.url.cdn_static+"/image/wap/no_pic.png";if(e=t.match(/.+\!\d+x\d+.+/)?"":e&&e.length>0?e:"!100x100.jpg",t.match(/^(https?:)?\/\//i)){for(var i=[/^(https?:)?\/\/imgqn.koudaitong.com/,/^(https?:)?\/\/kdt-img.koudaitong.com/,/^(https?:)?\/\/img.yzcdn.cn/,/^(https?:)?\/\/dn-kdt-img.qbox.me/],n=0;n<i.length;n++)t=t.replace(i[n],window._global.url.imgqn);return t+e}return window._global.url.imgqn+"/"+t+e}};return t}),define("bower_components/login/main",["require","bower_components/ajax/ajax","jquery","backbone","bower_components/aes/main","text!./templates/init.html","text!./templates/login.html","text!./templates/register.html","text!./templates/change_pwd.html","zenjs/util/valid","zenjs/util/form","zenjs/sms_fetch/main","zenjs/util/url_helper","zenjs/util/ua"],function(t){t("bower_components/ajax/ajax");var e=t("jquery"),i=t("backbone"),n=t("bower_components/aes/main"),s=t("text!./templates/init.html"),o=t("text!./templates/login.html"),a=t("text!./templates/register.html"),r=t("text!./templates/change_pwd.html"),l=t("zenjs/util/valid"),d=t("zenjs/util/form"),c=t("zenjs/sms_fetch/main"),h=t("zenjs/util/url_helper"),u=t("zenjs/util/ua"),p=["youzanmars"],f=i.View.extend({events:{"click .js-confirm":"onConfirmClicked","click .js-change-phone":"onChangePhoneClicked","click .js-change-pwd":"onChangePwdClicked","click .js-login":"onLoginClicked","click .js-register":"onRegisterClicked","click .js-auth-code":"onAuthcodeClicked","submit .js-login-form":"onConfirmClicked"},initialize:function(t){t=t||{};var i=u.getPlatform();if(p.indexOf(i)>-1)return void(window.location.href=h.site("/buyer/kdtunion?redirect_uri="+encodeURIComponent(window.location.href),"wap"));var n=this,l=_global.url;this.tpl_map={init:_.template(t.initTpl||s),login:_.template(t.loginTpl||o),register:_.template(t.registerTpl||a),changePwd:_.template(t.changePwdTpl||r)},this.valid_map={checkPhone:_(this.checkPhone).bind(this),checkPwd:_(this.checkPwd).bind(this),checkCode:_(this.checkCode).bind(this)},this.renderOpt=t.renderOpt||{type:"init",phone:""},this.renderOpt.showBindText=u.isWeixin()||u.isQQ(),this.urlMap={login:t.loginUrl||l.uic+"/buyer/auth/authlogin.json",register:t.registerUrl||l.uic+"/buyer/auth/authRegister.json",changePwd:t.changePwdUrl||l.uic+"/buyer/auth/changePassword.json",confirm:t.confirmUrl||l.uic+"/buyer/auth/authConfirm.json"},this.source=t.source||2,this.ajaxType=t.ajaxType||"POST",this.afterLogin=t.afterLogin||function(){};var d,f;u.isMobile()?(d="app",f="wsc",u.isWxd()?f="wxd":u.isWsc()?f="wsc":u.isPf()?f="pf":d="wap"):d="pc",this.sms=new c({el:this.$el,onTimeChange:function(t){var i=t.second;e(n.nAuthCode).text("等待 "+i+"秒")},onTimeEnd:function(){n.nAuthCode.text("再次获取"),n.nAuthCode.prop("disabled",!1),n.nAuthCode.removeClass("disabled"),n.nCodeInput.attr("placeholder","没有收到验证码？")},onTimerStart:function(){n.nAuthCode.prop("disabled",!0),n.nAuthCode.addClass("disabled")},onVerifyPictureError:function(){n.nAuthCode.removeAttr("disabled"),n.nAuthCode.removeClass("disabled"),n.nAuthCode.text("再次获取")},onGetCodeError:function(){n.nAuthCode.removeAttr("disabled"),n.nAuthCode.removeClass("disabled"),n.nAuthCode.text("再次获取")},onVerifyPictureShow:function(){n.nHelpInfo.html("操作过于频繁，请先输入图像验证码再获取")},onVerifyPictureSuccess:function(){n.nHelpInfo.html("")},platform:d,subFrom:f})},render:function(){return this.appLogined?this:(this.$el.html(this.tpl_map[this.renderOpt.type](this.renderOpt)),this.nForm=this.$(".js-login-form"),this.nHelpInfo=this.$(".js-help-info"),this.nPhone=this.$('input[name="phone"]'),this.nPwd=this.$('input[name="password"]'),this.nCodeInput=this.$('input[name="authcode"]'),this.nAuthCode=this.$(".js-auth-code"),this)},show:function(t,e){"changePwd"==t?this.sms.biz="reset_account_passwd":this.sms.biz="kdt_account_captcha",_.extend(this.renderOpt,{type:t},e||{isSetting:!1}),this.render(this.renderOpt),this.$el.show(this.animationTime)},onConfirmClicked:function(t){t.preventDefault();var i=this,s=e(t.target),o=d.getFormData(i.nForm);if(o=_.extend(i.renderOpt,o),!i.validate(o))return!1;o.source=this.source,o.password&&(o.password=n.encrypt(o.password));var a=s.html();if("init"===i.renderOpt.type)i.renderOpt.phone=o.phone,e._ajax({url:this.urlMap.confirm,type:"POST",dataType:"json",timeout:15e3,data:o,xhrFields:{withCredentials:!0},beforeSend:function(){s.html("确认中..."),s.prop("disabled",!0)},success:function(t){switch(+t.code){case 0:i.show("login");break;case 135000003:i.show("register");break;default:i.nHelpInfo.html(t.msg)}},error:function(){i.nHelpInfo.html("出错啦，请重试")},complete:function(){s.html(a),s.prop("disabled",!1)}});else{var r=i.renderOpt.type;e._ajax({url:this.urlMap[r],type:this.ajaxType,dataType:"json",timeout:15e3,data:o,xhrFields:{withCredentials:!0},beforeSend:function(){s.html("确认中..."),s.prop("disabled",!0)},success:function(t){0===t.code?i.afterLogin(t,{type:r}):i.nHelpInfo.html(t.msg)},error:function(){i.nHelpInfo.html("出错啦，请重试")},complete:function(){s.html(a),s.prop("disabled",!1)}})}},onAuthcodeClicked:function(t){t.preventDefault();var e=this,i=d.getFormData(e.nForm);i=_.extend(e.renderOpt,i);var n=i.phone;this.sms.setMobile(n),this.sms.getSms()},onChangePhoneClicked:function(t){t.preventDefault(),this.show("init")},onChangePwdClicked:function(t){t.preventDefault(),this.sms.stopTimer(),this.show("changePwd")},onLoginClicked:function(t){t.preventDefault(),this.show("init")},onRegisterClicked:function(t){t.preventDefault(),this.show("init")},validate:function(){var t={init:["checkPhone"],login:["checkPwd"],register:["checkCode","checkPwd"],changePwd:["checkCode","checkPwd"]};return function(e){return _.every(t[e.type],_(function(t){return this.valid_map[t](e)}).bind(this))}}(),checkPhone:function(t){return""===t.phone?(this.nPhone.focus(),this.nHelpInfo.html("请填写您的手机号码"),!1):l.validMobile(t.phone)?!0:(this.nPhone.focus(),this.nHelpInfo.html("请填写11位手机号码"),!1)},checkPwd:function(t){function e(t){var e=/[a-zA-Z]/g,i=/[0-9]/g,n=0,s=e.test(t),o=i.test(t);return s&&o&&(n=1),n}if(""===t.password)return this.nPwd.focus(),this.nHelpInfo.html("请输入您的密码"),!1;if("login"!==this.renderOpt.type&&t.password.length<8)return this.nPwd.focus(),this.nHelpInfo.html("亲，密码最短为8位"),!1;if("login"!==this.renderOpt.type&&t.password.length>20)return this.nPwd.focus(),this.nHelpInfo.html("亲，密码最长为20位"),!1;if("login"!==this.renderOpt.type){var i=e(t.password);if(!i)return this.nPwd.focus(),this.nHelpInfo.html("亲，密码为8-20位数字和字母组合"),!1}return!0},checkCode:function(t){return l.validPostalCode(t.code)?!0:(this.nCodeInput.focus(),this.nHelpInfo.html("请填写6位短信验证码"),!1)}});return f}),define("bower_components/pop/popout",["require","./pop_forbid_scroll"],function(t){var e=t("./pop_forbid_scroll"),i=e.extend({init:function(t){t=t||{},this._super(t),this.css=$.extend({transition:"opacity ease "+this.animationTime+"ms",top:"50%",left:"50%","-webkit-transform":"translate3d(-50%, -50%, 0)",transform:"translateY(-50%, -50%, 0)"},t.css||{}),this.nPopContainer.css(this.css)},_doShow:function(){$(".js-popout-close").click($.proxy(function(t){this.hide()},this)),this.nPopContainer.css("opacity",1),this.nPopContainer.show()},_doHide:function(t){this.nPopContainer.css({opacity:0})}});return i}),define("bower_components/pop/popout_box",["require","./popout"],function(t){var e=function(){},i=t("./popout"),n=i.extend({init:function(t){this._super(t),this._onOKClicked=t.onOKClicked||e,this._onCancelClicked=t.onCancelClicked||e,this.preventHideOnOkClicked=t.preventHideOnOkClicked||!1,this.width=t.width,this.setEventListener()},setEventListener:function(){this.nPopContainer.on("click",".js-ok",$.proxy(this.onOKClicked,this)),this.nPopContainer.on("click",".js-cancel",$.proxy(this.onCancelClicked,this))},_doShow:function(){this.boxCss={"border-radius":"4px",background:"white",width:this.width||"270px",padding:"15px"},this.nPopContainer.css(this.boxCss).addClass("popout-box"),this._super()},_doHide:function(t){this._super()},onOKClicked:function(t){this._onOKClicked(t),!this.preventHideOnOkClicked&&this.hide()},onCancelClicked:function(t){this._onCancelClicked(t),this.hide()}});return n}),define("text!bower_components/pop/pop_alert/box.html",[],function(){return'<div class="alert-content" style="line-height: 120%;">\n    <%= data.box_content %>\n</div>\n<hr style="margin: 10px 0 11px;">\n<p class="js-ok confirm center c-green" style="line-height: 22px;">\n    <%= data.box_confirm %>\n</p>'}),define("zenjs/util/template",["require","jquery"],function(t){var e=t("jquery"),i=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},e=["&","<",">",'"',"'"],i=new RegExp("["+e.join("")+"]","g");return function(e){return null==e?"":(""+e).replace(i,function(e){return t[e]})}}(),n={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},s=/(.)^/,o={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\t|\u2028|\u2029/g,r=function(t,r,l){var d;l=e.extend({},n,l);var c=new RegExp([(l.escape||s).source,(l.interpolate||s).source,(l.evaluate||s).source].join("|")+"|$","g"),h=0,u="__p+='";t.replace(c,function(e,i,n,s,r){return u+=t.slice(h,r).replace(a,function(t){return"\\"+o[t]}),i&&(u+="'+\n((__t=("+i+"))==null?'':escapeFunc(__t))+\n'"),n&&(u+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(u+="';\n"+s+"\n__p+='"),h=r+e.length,e}),u+="';\n",l.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{d=new Function(l.variable||"obj","escapeFunc",u)}catch(p){throw p.source=u,p}if(r)return d(r,i);var f=function(t){return d.call(this,t,i)};return f.source="function("+(l.variable||"obj")+"){\n"+u+"}",f};return r}),define("bower_components/pop/pop_alert/popout_alert",["require","../popout_box","text!../pop_alert/box.html","zenjs/util/template"],function(t){var e=t("../popout_box"),i=t("text!../pop_alert/box.html"),n=t("zenjs/util/template"),s=n(i),o=e.extend({init:function(t){this._super(t),this.isCanNotHide=!0,this.box_content=t.content||"",this.box_confirm=t.confirmText||"我知道了"},render:function(t){return this.html||(this.html=s({data:{box_content:this.box_content,box_confirm:this.box_confirm}})),this._super(t),this.nPopContainer.addClass("popout-alert"),this},_doShow:function(){this._super()},_doHide:function(t){this._super()}}),a=null;return{show:function(t,e){e=e||{},a&&this.hide(),e.content=t,a=new o(e).render().show()},hide:function(){a&&(a.hide(),a=null)}}}),define("wap/showcase/goods/views/store_info",["bower_components/pop/pop_alert/popout_alert"],function(t){return Backbone.View.extend({initialize:function(){},events:{"click .js-rz-item-alert":"rzAlert"},render:function(){return this},rzAlert:function(){var e={is_secured_transactions:"该笔订单享受有赞提供的全程消费保障，请放心购买",team_certificate_person:"该店铺已通过有赞个人认证，请放心购买",team_certificate_company:"该店铺已通过有赞企业认证，请放心购买",deposit:"该店铺已缴纳消费保障保证金，订单维权更快更高效，请放心购买",team_certificate_qijian:"该店铺已通过有赞官字店-旗舰店认证，请放心购买",team_certificate_zhuanmai:"该店铺已通过有赞官字店-专卖店认证，请放心购买",team_certificate_zhiying:"该店铺已通过有赞官字店-直营店认证，请放心购买",team_certificate_zhuanying:"该店铺已通过有赞官字店-专营店认证，请放心购买"};return function(i){var n=$(i.target);n.hasClass("js-rz-item-alert")||(n=n.parents(".js-rz-item-alert"));var s=n.data("type"),o=e[s]||"";o&&t.show(o)}}()})}),define("zenjs/util/event",["require","jquery"],function(t){var e=t("jquery"),i={getTargetByDataKey:function(t,i){for(var n=e(t.target);!n.data(i)&&0!==n.data(i)&&"BODY"!=(n[0]||{}).nodeName;)n=n.parent();return n},getEventHandler:function(){var t=function(){};return e.extend(!0,t.prototype,i.methods),new t},methods:{events:{},on:function(t,e){return"string"!=typeof t||"[object Function]"!==Object.prototype.toString.call(e)?!1:(this.events[t]||(this.events[t]=[]),this.events[t].push(e))},trigger:function(t){if("string"!=typeof t)return!1;if(!this.events[t])return this.events[t]=[],!1;for(var e=this.events[t],i=Array.prototype.slice.apply(arguments,[1]),n=0,s=e.length;s>n;n++)e[n](i)},off:function(t,e){if(!t&&!e)return void(this.events={});if(!e)return void(this.events[t]=[]);var i=this.events[t],n=i.indexOf(e);i.splice(n,1)}}};return i}),define("zenjs/backbone/tabber",["require","../util/event","backbone"],function(t){var e=t("../util/event"),i=t("backbone"),n=function(){},s=i.View.extend({initialize:function(t){this.activeKey=t.activeKey||"type",this.activeClass=t.activeClass||"active",this.hashAsDefaultData=t.hashAsDefaultData?!0:!1,this.cbOnClicked=t.onClicked||n,this.cbOnDisabledClicked=t.onDisabledClicked||n,this.initDefault(t)},events:{click:"onClicked"},initDefault:function(t){var e=i.history.getHash();t.hashAsDefaultData&&e?this.active(e):t.defaultData&&t.defaultData.length>0&&this.active(t.defaultData)},onClicked:function(t){if(t.target&&0!==t.target.length){var i=e.getTargetByDataKey(t,this.activeKey),n=""+i.data(this.activeKey);if(void 0===this.firstClick?this.firstClick=!0:this.firstClick=!1,i.blur(),n&&"undefined"!==n&&this.activeData!==n&&n&&n.length>0){if(this.disabled===!0)return void(this.activeData!==n&&this.cbOnDisabledClicked());if(this.hashAsDefaultData){var s=location.href.replace(/(javascript:|#).*$/,"");location.replace(s+"#"+n)}this.$("."+this.activeClass).removeClass(this.activeClass),i.addClass(this.activeClass),this.activeData=n,this.cbOnClicked(_.extend(t||{},{value:n,nTarget:i}))}}},active:function(t,e){this.onClicked(_.extend({target:this.$el.find("[data-"+this.activeKey+'="'+t+'"]:first')},e||{}))},setDisable:function(t){this.disabled=t},setData:function(t){this.activeData=t,this.$("."+this.activeClass).removeClass(this.activeClass),this.$el.find("[data-"+this.activeKey+'="'+this.activeData+'"]:first').addClass(this.activeClass)},getData:function(){return this.activeData}});return s}),define("bower_components/waterfall/pager",["require","zenjs/events"],function(t){var e=t("zenjs/events"),i=function(){};return e.extend({init:function(t){this.$el||(this.$el=$(t.el||t.$el||"<div></div>"),this.el=this.$el[0]),this.nLoading=t.loadingHTML?$(t.loadingHTML).addClass("loading-more"):$('<div class="loading-more"><span></span></div>'),this.nList=this.$el.find(".js-list"),0===this.nList.length&&(this.nList=$('<div class="js-list b-list"></div>'),this.$el.append(this.nList)),"number"==typeof t.total&&(this.total=t.total),this.offset=t.offset||300,this.scrollDirection="down",this.pageIndex=t.pageIndex||0,this.perPage=t.perPage||10,this.postData=t.postData||{},this.checkSize=!0,"boolean"==typeof t.checkSize&&(this.checkSize=t.checkSize),this.idName=t.idName||"id",t.idValue&&(this.idValue=t.idValue),this.jsonKeys=t.jsonKeys||{},this.finishedHTML=t.finishedHTML,this.finishedText=t.finishedText,this.emptyHTML=t.emptyHTML||"",this.emptyText=t.emptyText||"",this.getExtrPostData=t.getExtrPostData||i,this.onFetchError=t.onFetchError||i,this.onListEmpty=this.onListEmpty||t.onEmpty||this._onListEmpty,this.on("finished",t.onFinished||i),this.on("after:list:load",t.onAfterListLoad||t.onDataLoad||i),this.extraData={},this.scrollContainer=t.scrollContainer?$(t.scrollContainer):$("body"),this.scrollEventAccepter=t.scrollEventAccepter?$(t.scrollEventAccepter):$(t.scrollContainer||window),this._onScroll=$.proxy(this.onScroll,this),this.bindScrollFunc()},$:function(t){return this.$el.find(t)},onScroll:function(){function t(){var t=this.nList.offset(),e=this.scrollContainer.offset(),i={left:t.left-e.left||0,top:t.top-e.top||0};return i}return function(){if(!(this.sleeping||this.finished||this.fetching)){if(0===this.total||this.total&&this.total<=this.pageIndex*this.perPage)return void this.doFinishLoading();var e=t.call(this);"down"===this.scrollDirection&&this.nList.height()+e.top-this.scrollEventAccepter.height()-this.scrollContainer.scrollTop()<this.offset&&this.fetchMore&&this.fetchMore(),"up"===this.scrollDirection&&this.scrollContainer.scrollTop()<this.offset&&this.fetchMore&&this.fetchMore()}}}(),fetchMore:function(){return this.sleeping||this.finished||this.fetching?this:(this.showLoading(),this.fetching=!0,this._fetchMore&&this._fetchMore.call(this),this)},onFetchMoreSuccess:function(){this.hideLoading(),this.fetching=!1,this._onFetchMoreSuccess.apply(this,arguments)},fetchRender:function(){return this.fetchMore(),this},_onFetchMoreError:function(){this.fetching=!1,this.hideLoading(),this.onFetchError()},doFinishLoading:function(t){this.finished=!0,this.fetching=!1,this.hideLoading(),this.$el.find(".list-finished").remove(),this.triggerMethod&&this.triggerMethod("finished",this.collection,t)},bindScrollFunc:function(){var t=this;this.scrollFunc&&this.unbindScrollFunc(),this.scrollFunc=function(){t.scrollTimeout&&clearTimeout(t.scrollTimeout),t.scrollTimeout=setTimeout(t._onScroll,200)},this.scrollEventAccepter.on("scroll",this.scrollFunc)},unbindScrollFunc:function(){this.scrollEventAccepter.off("scroll",this.scrollFunc),this.scrollFunc=null},doSleep:function(){this.sleeping=!0,this.unbindScrollFunc()},doWake:function(){this.sleeping=!1,this.bindScrollFunc(),this.fetchMore()},showLoading:function(){this.hasFetching=!0,this.$el.append(this.nLoading)},hideLoading:function(){this.nLoading.remove()},getFinishHtml:function(){var t;return t=this.finishedHTML?$(this.finishedHTML).addClass("list-finished"):'<div class="list-finished">'+(this.finishedText||"已经没有更多了")+"</div>"},setExtraData:function(t){$.extend(this.extraData,t)},resetWaterfall:function(t){this.finished===!0&&this.$(".list-finished").remove(),this.removeAll&&this.removeAll(),this.nList.empty(),this.collection&&this.collection.reset([],{silent:!0}),this.listEl&&this.listEl.empty(),this.finished=!1,t&&t.pageIndex?this.pageIndex=t.pageIndex:this.pageIndex=0,this.idValue=void 0},_onListEmpty:function(){if(!this.fetching){var t;this.emptyHTML?t=$(this.emptyHTML).addClass("list-finished"):this.emptyText&&(t='<div class="list-finished">'+this.emptyText+"</div>"),this.$el.append(t)}},destroy:function(){this.doSleep(),this.$el.remove(),this.unbindScrollFunc()},remove:function(){
this.destroy()}})}),define("bower_components/waterfall/waterfall_html",["require","bower_components/ajax/ajax","jquery","./pager"],function(t){t("bower_components/ajax/ajax");var e=t("jquery"),i=t("./pager"),n=i.extend({init:function(t){this.$el&&this.$el.find(".list-finished")&&this.$el.find(".list-finished").length>0||(this._super(t),"undefined"!=typeof t.pageIndex?this.pageIndex=+t.pageIndex:this.pageIndex=1,this.url=t.url||"",this.ajaxType=t.ajaxType||"GET",this.dataType=t.dataType||"json",this.on("finished",this._doFinishLoading),this.onScroll())},_fetchMore:function(){var t=this,i={};this.perPage&&(i[this.jsonKeys.perPage||"perpage"]=this.perPage),this.idValue?i[this.idName]=this.idValue:i[this.jsonKeys.pageIndex||"page"]=this.pageIndex+1;var n=this.getExtrPostData?this.getExtrPostData():{};e._ajax({url:t.url,type:t.ajaxType,dataType:t.dataType,data:e.extend({},t.postData,i,n,t.extraData),timeout:5e3,success:function(e){t.pageIndex++,e&&0==e.code?t.onFetchMoreSuccess({},e||{}):t.doFinishLoading(e)},error:function(e,i,n){t._onFetchMoreError()}})},_onFetchMoreSuccess:function(t,e){var i=(e||{}).data||{};return i[this.idName]&&(this.idValue=i[this.idName]),this.triggerMethod("after:list:load",i.html||"",e),i.html?void this.onScroll():(this.pageIndex--,void this.doFinishLoading(e))},_doFinishLoading:function(){if(0==this.pageIndex&&this.triggerMethod("list:empty"),this.hasFetching&&this.pageIndex>2){var t=this.getFinishHtml();this.$el.append(t)}}});return n}),define("zenjs/backbone/base_view",["require","backbone","../core/trigger_method"],function(t){var e=t("backbone"),i=t("../core/trigger_method");return e.View.extend({clean:function(){return this.stopListening(),this},triggerMethod:i})}),define("bower_components/zenlist/list",["require","exports","module","zenjs/backbone/base_view"],function(t,e,i){var n=function(){},s=t("zenjs/backbone/base_view");i.exports=s.extend({initialize:function(t){return this.options=t=t||{},this.items=[],this.itemView=t.itemView,this.itemOptions=t.itemOptions||{},this.collection=t.collection,this.onAfterListChange=t.onAfterListChange||n,this.onAfterListLoad=t.onAfterListLoad||n,this.onAfterListDisplay=t.onAfterListDisplay||n,this.onListEmpty=t.onListEmpty||t.onEmptyList||this._onListEmpty,this.onItemClick=t.onItemClick||n,this.onViewItemAdded=t.onViewItemAdded||n,this.displaySize=t.displaySize||-1,this.emptyHTML=t.emptyHTML||"",this.emptyText=t.emptyText||"列表为空",this},render:function(t){return this.displaySize=-1==(t||{}).displaySize?-1:this.displaySize,this.clean(),this._setupListeners(),this.addAll(),this.onAfterListDisplay({list:this.collection}),this},fetchRender:function(t){return this.collection.fetch({data:t,success:_(function(t,e){this.render(),this.onAfterListLoad(this.collection,e),this.onFetchSuccess&&this.onFetchSuccess()}).bind(this),error:_.bind(function(){this.onAfterListLoad(this.collection,response)},this)}),this},_setupListeners:function(){this.collection&&(this.stopListening(this.collection),this.listenTo(this.collection,"add",this.addItem,this),this.listenTo(this.collection,"reset sort",this.render,this),this.listenTo(this.collection,"remove",this.onItemRemoved,this))},addItemListeners:function(t){var e=this;this.listenTo(t,"all",function(){var e="item:"+arguments[0],i=_.toArray(arguments);i.splice(0,1),i.unshift(e,t),this.trigger.apply(this,i),"item:click"==e&&this.onItemClick()}),this.listenTo(t.model,"change",function(){e.onAfterListChange({list:this.collection})})},addAll:function(){0===this.collection.length?this.fetching||this.triggerMethod("list:empty"):this.collection.each(function(t){this.addItem(t)},this)},removeAll:function(){for(var t=this.items.length-1;t>=0;t--)this.removeView(this.items[t]);this.onAfterListChange({list:this.collection})},addItem:function(t,e,i){if(!(this.displaySize>=0&&this.items.length>=this.displaySize)){1==this.collection.length&&(this.listEl||this.$el).html("");var n=new this.itemView(_.extend({},this.options.itemOptions,{model:t,index:this.collection.indexOf(t)}));this.items.push(n),this.addItemListeners(n),n.render(),this.onViewItemAdded({list:this.items,viewItem:n,model:t});var s=(i||{}).at;return 0===s?(this.listEl||this.$el).prepend(n.el):(this.listEl||this.$el).append(n.el),n}},removeItem:function(t){var e=this.getViewByModel(t);e&&this.removeView(e)},removeView:function(t){var e;this.stopListening(t),t&&(this.stopListening(t.model),t.remove(),e=this.items.indexOf(t),this.items.splice(e,1)),0===this.collection.length&&(this.fetching||this.triggerMethod("list:empty"))},onItemRemoved:function(t){this.onAfterListChange({list:this.collection,action:"remove",model:t}),this.removeItem(t)},getViewByModel:function(t){return _.find(this.items,function(e,i){return e.model===t})},dispatchEventToAllViews:function(t,e){for(var i=this.items.length-1;i>=0;i--)this.items[i].trigger(t,e)},remove:function(){s.prototype.remove.call(this,arguments),this.removeAll(),this.collection.reset(),delete this.collection},clean:function(){s.prototype.clean.call(this,arguments),this.removeAll(),(this.listEl||this.$el).html(""),this.stopListening(this.collection)},_onListEmpty:function(){this.$el.html(this.emptyHTML||(this.emptyText?'<p style="text-align:center;line-height:60px;">'+this.emptyText+"</p>":""))}})}),define("bower_components/waterfall/waterfall",["require","./pager","bower_components/zenlist/list"],function(t){var e=t("./pager"),i=t("bower_components/zenlist/list"),n=function(){},s=e.extend({init:function(t){this._super(t),this.collection=t.collection,this.listEl=this.getListViewEl(),this.list=new i($.extend({},t,{el:this.listEl,collection:this.collection,onListEmpty:n})).render(),this.on("finished",this._doFinishLoading)},getListViewEl:function(){return this.nList},_fetchMore:function(){var t={};this.idValue&&(t[this.idName]=this.idValue),t[this.jsonKeys.perPage||"perpage"]=this.perPage,t[this.jsonKeys.pageIndex||"page"]=this.pageIndex+1;var e=this.getExtrPostData?this.getExtrPostData():{};this.collection.fetch({data:$.extend(t,this.postData,e,this.extraData),success:$.proxy(this.onFetchMoreSuccess,this),error:$.proxy(this.onFetchError,this),update:!0,remove:!1})},_onFetchMoreSuccess:function(t,e){this.pageIndex++,this.triggerMethod("after:list:load",{collection:t,response:e});var i=this.collection.parse(e);if(0===i.length||this.checkSize&&i.length<this.perPage)return void this.doFinishLoading();var n=_.last(this.collection.models);n&&(this.idValue=n.get(this.idName)),this.onScroll()},_onAfterListLoad:function(){var t=_.last(this.collection.models);t&&(this.idValue=t.get(this.idName))},_doFinishLoading:function(){if(this.collection.length>0){if(this.hasFetching&&this.pageIndex>1){var t=this.getFinishHtml();this.$el.append(t)}}else this.triggerMethod("list:empty")},addTopItem:function(t){this.collection.unshift(t)},addBottomItem:function(t){this.finished===!0&&this.$(".list-finished").remove(),this.collection.add(t)}});return s}),define("bower_components/waterfall/collections/collection",["require","exports","module"],function(t,e,i){i.exports=Backbone.Collection.extend({parse:function(t){var e=(t||{}).data||{},i=e.list||[];return this.total=parseInt(e.total||e.count),i}})}),define("text!wap/showcase/goods/templates/review_avatar.html",[],function(){return'<div class="profiles clearfix">\n    <% \n        var avatarItem;\n        for( var index in avatar ){ \n    %>\n        <% avatarItem = avatar[index]; %>\n        <% if( avatarItem.fans_picture ){ %>\n            <% \n                var pic = avatarItem.fans_picture; \n                pic = pic.replace(/\\/\\d+$/g, \'/64\');\n            %>\n            <img src="<%= pic %>" class="image-circle">\n        <% }else{ %>\n            <span class="name-circle font-size-18"><%= (avatarItem.user_name || \'\')[0] || \'\' %></span>\n        <% } %>\n    <% } %>\n</div>'}),define("wap/showcase/goods/views/reviews",["zenjs/backbone/tabber","bower_components/waterfall/waterfall_html","text!wap/showcase/goods/templates/review_avatar.html"],function(t,e,i){return Backbone.View.extend({initialize:function(t){this.nTabberContent=this.$(".js-review-tabber-content"),this.nPinjianReportContainer=this.$(".js-review-report-container"),this.waterfallMap={},this.isShowRecord=t.isShowRecord||!1,this.totalMap={},this.isRateNumUpdated=!1,this.isAvatarUpdated=!1},render:function(e){return e=e||{},this.isShowRecord||this.$(".js-review-avatar-container").remove(),e.fastReview?($._ajax({url:"/v2/showcase/goods/review.json",type:"GET",dataType:"json",data:{alias:window._global.alias,page_size:2,pinjian_report:1},success:_(function(t){if(0==t.code){var e=t.data||{},i=window._global.url.wap+"/showcase/goodsfast?alias="+_global.alias+"&detail_type=reviews";if(this.$el.html(""),!e.report_html&&!e.html)return void this.$el.remove();this.$el.append(e.report_html||""),this.$el.append(e.html||"").find(".js-review-item").attr("href",i),e.count>2&&this.$el.append('<a href="'+i+'" class="block-item font-size-14 center">查看更多评价</a>'),this.initImgPreview(this.$el)}}).bind(this)}),this):(this.tabber=new t({el:this.$(".js-review-tabber"),activeClass:"active",activeKey:"reviewtype",defaultData:"all",onClicked:_(this.onTabberClicked).bind(this)}),this)},onTabberClicked:function(t){var i={all:"评论",good:"好评",middle:"中评",bad:"差评"},n=t.value,s=this.nTabberContent.find(".js-review-part[data-reviewtype="+n+"]");if(this.nTabberContent.find(".js-review-part").addClass("hide"),s.removeClass("hide"),"all"!==n?this.nPinjianReportContainer.addClass("hide"):this.isPinjianReportLoaded&&this.nPinjianReportContainer.removeClass("hide"),this.doSleep(),this.doWake(n),!this.waterfallMap[n]){var o=$(t.target),a=o.data("rate"),r=this.getExternalData(),l="number"==typeof this.totalMap[a]?this.totalMap[a]:1e3,d=$.extend({alias:window._global.alias,rate:a},r);this.waterfallMap[n]=new e({el:s,pageIndex:0,perPage:10,total:l,url:"/v2/showcase/goods/review.json",postData:d,jsonKeys:{perPage:"page_size"},emptyText:"暂无"+i[n],onAfterListLoad:_(function(t,e){var i=e.data||{};i.report_html&&(this.nPinjianReportContainer.removeClass("hide").append(i.report_html),this.isPinjianReportLoaded=!0),this.reportFetched=!0,d.pinjian_report=0,s.find(".js-list").append(t),i.with_rate_num&&(this.updateRateNum(i.with_rate_num),d.with_rate_num=0),i.with_avatar&&(this.updateAvatar(i.with_avatar),d.with_avatar=0),this.initImgPreview(s)}).bind(this)})}},doWake:function(t){t&&this.waterfallMap[t]&&this.waterfallMap[t].doWake()},doSleep:function(){_.each(this.waterfallMap,function(t,e){t.doSleep()})},updateRateNum:function(t){this.isRateNumUpdated||(this.$(".js-rate-good").text("好评("+t[30]+")"),this.$(".js-rate-middle").text("中评("+t[20]+")"),this.$(".js-rate-bad").text("差评("+t[10]+")"),this.totalMap={10:t[10],20:t[20],30:t[30],0:t[10]+t[20]+t[30]},this.isRateNumUpdated=!0)},updateAvatar:function(t){this.isAvatarUpdated||(this.$(".js-review-avatar").html(_.template(i)({sold_num:t.sold_num,avatar:t.avatar})),this.isAvatarUpdated=!0)},getExternalData:function(){var t=$(window).width(),e=function(){return 375>t?24:414>t?30:33};return function(){var t={};return!this.isAvatarUpdated&&this.isShowRecord&&(t.with_avatar=e()),this.isRateNumUpdated||(t.with_rate_num=1),this.reportFetched||(t.pinjian_report=1,t.display_pj_link=1,t.report_size=3),t}}(),initImgPreview:function(t){}})}),define("text!wap/showcase/goods/templates/trade_record.html",[],function(){return'<span class="col-1 c-gray-darker"><%= data.nickname %></span>\n<span class="col-2 c-gray-dark center"><%= data.update_time %></span>\n<span class="col-3 c-gray-darker center"><%= data.item_num %></span>\n'}),define("wap/showcase/goods/views/trade_record_item",["text!wap/showcase/goods/templates/trade_record.html"],function(t){return Backbone.View.extend({template:_.template(t),className:"block-item",render:function(){this.$el.html(this.template({data:this.model.toJSON()}))}})}),define("wap/showcase/goods/views/goods_detail",["zenjs/backbone/tabber","zenjs/util/args","bower_components/waterfall/waterfall_html","bower_components/waterfall/waterfall","bower_components/waterfall/collections/collection","wap/showcase/goods/views/reviews","wap/showcase/goods/views/trade_record_item"],function(t,e,i,n,s,o,a){var r=window._global,l=function(){};return Backbone.View.extend({initialize:function(t){this.tradeRecordWaterfall=null,this.ReviewsView=t.ReviewsView||o,this.asyncs=t.asyncs,this.onAfterDetailLoad=t.onAfterDetailLoad||l,this.goods_type=t.goods_type||"goods",this.isHashAsDefaultData=t.isHashAsDefaultData||!1;var e=t.sold_num||0;this.isShowRecord=t.isShowRecord&&e>0,this.isShowReview=t.isShowReview&&e>0,(this.isShowRecord||this.isShowReview)&&(this.isShowTabber=!0)},render:function(){var t=this;return $&&$.fn&&$.fn.lazyload&&t.$el.find(".js-html-lazy").lazyload({load:_(t.lazyHtmlLoaded).bind(this)}),this},lazyHtmlLoaded:function(){var t=this;t.nTabber=t.$(".js-tabber"),t.nTabberContent=t.$(".js-tabber-content"),t.initGoodsDetailTabber(),window.initSwiper&&window.initSwiper(t.$el),window.init_custom_notice&&window.init_custom_notice(t.$el);var e=window._global.js_config||[];return window.Loader.async(_.values(e),function(){window.imagePreview&&window.imagePreview.init()}),"1"==window._global.tpl_style&&"auction"!=window._global.goods_type&&t.isShowReview&&(t.reviewsView=new o({el:t.$(".js-trade-review-list"),isShowRecord:t.isShowRecord}).render({fastReview:!0})),t.onAfterDetailLoad(),this},initGoodsDetailTabber:function(){if(!this.isShowTabber||!this.asyncs.tabber)return this.nTabberContent.find(".js-part").removeClass("hide"),this;var i=e.get("detail_type")||"goods";this.tabber=new t({el:this.nTabber,activeClass:"active",activeKey:"type",defaultData:i,hashAsDefaultData:this.isHashAsDefaultData,onClicked:_(this.onTabberClicked).bind(this)})},onTabberClicked:function(){var t,o={sales:function(){this.tradeRecordWaterfall?this.tradeRecordWaterfall.doWake():(this.tradeRecordWaterfall=new n({el:$(".js-traderecord-list"),collection:new s([],{url:"/v2/trade/order/orderitemlist.json?alias="+r.alias}),itemView:a,checkSize:!1,emptyText:"最近暂无成交"}).fetchRender(),this.tradeRecordWaterfall.on("list:empty",_(function(){this.tradeRecordWaterfall.$el.addClass("empty").find(".js-list").remove()}).bind(this))),t=this.tradeRecordWaterfall},reviews:function(){this.reviewsView?this.reviewsView.doWake():this.reviewsView=new this.ReviewsView({el:this.$(".js-trade-review-list"),isShowRecord:this.isShowRecord}).render(),t=this.reviewsView},pinjian_reviews:function(){this.pjReviewsView?this.pjReviewsView.doWake():this.pjReviewsView=new i({el:$(".js-trade-review-list"),url:"/v2/showcase_pinjian/item/reportsByItemId.jsonp",dataType:"jsonp",postData:{item_id:e.get("item_id")},pageIndex:0,perPage:10,emptyText:"还没有品鉴报告",onAfterListLoad:function(t,e){this.$el.find(".js-list").append(t)}}),t=this.pjReviewsView}};return function(e){var i=e.value,n=this.nTabberContent.find(".js-part[data-type="+i+"]");this.nTabberContent.find(".js-part").addClass("hide"),t&&t.doSleep(),n.removeClass("hide"),this.activeContent=n,(o[i]||l).call(this)}}()})}),define("text!wap/showcase/goods/templates/cashback_rule.html",[],function(){return'<form class="form-dialog">\n    <div class="header">\n        <h2> <span>促销详情</span> </h2>\n    </div>\n    <fieldset class="field-info" style="line-height: 120%;">\n        <% if(cashBack && cashBack.replace(/(^\\s*)|(\\s*$)/g, "")){ %>\n        <p class="font-size-12"><span class="c-red">【订单返现】</span><span><%= cashBack %></span>返现；</p>\n        <div class="turn-rule-step">\n            <p class="font-size-12 c-gray-dark reset-p-margin">1、通过【微信支付】付款，返现金额将通过 【微信退款】发放，请注意查收；</p>\n            <p class="font-size-12 c-gray-dark reset-p-margin">2、通过【银行卡】付款，返现金额将在3天内，原路发放至银行卡账户；</p>\n        </div>\n        <hr>\n        <% } %>\n        <% if(meetReduce && meetReduce.replace(/(^\\s*)|(\\s*$)/g, "")){ %>\n        <p class="font-size-12">\n            <span class="block-icon btn btn-red font-size-14">满减/赠/包邮</span>单笔订单金额<%= meetReduce %>\n        </p>\n        <% } %>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-ok btn btn-green btn-block">我知道了</button>\n    </div>\n</form>\n\n'}),define("text!wap/showcase/goods/templates/discountCount.html",[],function(){return"<% if ( data.day > 0 ) { %>\n    <span class=\"c-red js-hour\"><%= (+data.day < 10 ? '0' : '') + data.day %></span> : \n<% } %>\n<% if ( data.hour > 0 ) { %>\n    <span class=\"c-red js-hour\"><%= (+data.hour < 10 ? '0' : '') + data.hour %></span> : \n<% } %>\n<span class=\"c-red js-min\"><%= (+data.min < 10 ? '0' : '') + data.min %></span> : \n<span class=\"c-red js-sec\"><%= (+data.sec < 10 ? '0' : '') + data.sec %></span>"}),define("text!wap/showcase/goods/templates/qrcode.html",[],function(){return'<div class="section-detail">\n	<h3 class="shop-detail">手机扫码购买</h3>\n	<% if(type === \'url\') { %>\n	<p class="text-center weixin-title">微信“扫一扫”立即购买</p>\n	<% } else if (type === \'weixin\') { %>\n	<p class="text-center weixin-title">微信“扫一扫”关注购买</p>\n	<% } %>\n	<p class="text-center qr-code">\n		<img width="158" height="158" src="<%=img %>">\n	</p>\n</div>'}),define("bower_components/wakeupapp/wakeup",["require","zenjs/util/ua"],function(t){function e(t){window.location.href=t}function i(t){var i="function"==typeof t.willInvokeApp?t.willInvokeApp:function(){},o="function"==typeof t.onAppMissing?t.onAppMissing:e,l="function"==typeof t.onUnsupportedEnvironment?t.onUnsupportedEnvironment:function(){};i(),w.isAndroid()?n()&&t.intentURI&&!t.useUrlScheme?a(t.intentURI):t.apkDownloadUrl&&s(t.urlScheme,t.apkDownloadUrl,o):w.isIOS()&&t.appStoreUrl?r(t.urlScheme,t.appStoreUrl,o):setTimeout(function(){l()},100)}function n(){var t=new RegExp(whiteListBrowser.join("|"),"i"),e=t.test(navigator.userAgent)||w.isChrome()&&w.getChromeVersion()>="25",i=new RegExp(v.join("|"),"i");return e&&!i.test(navigator.userAgent)}function s(t,e,i){o(m,e,i),h(t)}function o(t,e,i){var n=(new Date).getTime();return setTimeout(function(){var s=(new Date).getTime();c()&&t+g>s-n&&i(e)},t)}function a(t){function e(){top.location.href=t}w.isChrome()?e():setTimeout(e,100)}function r(t,e,i){var n=o(f,e,i);parseInt(w.getIOSVersion(),10)<8?l(n):d(n),p()||h(t)}function l(t){window.addEventListener("pagehide",function e(){c()&&(clearTimeout(t),window.removeEventListener("pagehide",e))})}function d(t){document.addEventListener("visibilitychange",function e(){c()&&(clearTimeout(t),document.removeEventListener("visibilitychange",e))})}function c(){for(var t=["hidden","webkitHidden"],e=0,i=t.length;i>e;e++)if("undefined"!=typeof document[t[e]])return!document[t[e]];return!0}function h(t){setTimeout(function(){var e=u("appLauncher");e.src=t},100)}function u(t){var e=document.createElement("iframe");return e.id=t,e.style.border="none",e.style.width="0",e.style.height="0",e.style.display="none",e.style.overflow="hidden",document.body.appendChild(e),e}function p(){return parseInt(w.getIOSVersion(),10)>8&&w.isIOS()}var f=2e3,m=300,g=100,w=t("zenjs/util/ua"),v=["firefox","opr","fb_iab","MQQBrowser","MZ-m2"];return whiteListBrowser=["SAMSUNG","ASUS"],i}),define("bower_components/wakeupapp/main",["require","./wakeup","zenjs/util/ua","zenjs/util/args"],function(t){var e=t("./wakeup"),i=t("zenjs/util/ua"),n=t("zenjs/util/args"),s=$(".js-wakeup-app"),o=$(".js-wakeup-app-mask"),a=$(".js-wakeup-app-opentip"),r=Math.abs(parseInt(s.css("top"))),l=i.isIOS()?"“在Safari中打开”":"“在浏览器中打开”",d=!0;a.find(".js-platform-open").html(l),s.on("click",".js-wakeup-app-close",function(){d?s.css("transform","translate3d(0, 0, 0)"):s.css("top","-"+r+"px"),setTimeout(function(){s.remove(),o.remove(),a.remove()},1e3)}),o.on("click",function(){o.hide(),a.hide()}),s.on("click",".js-wakeup-app-download",function(){var t=$(this),s=t.data("appstoreurl"),r=1==n.get("sjtg");if(i.isWeixin())(!r||parseInt(i.getIOSVersion(),10)>8&&i.isIOS())&&/app.qq.com/.test(s)?location.href=s:(o.show(),a.show());else{var l=t.data("schema"),d=t.data("intenturi"),c=t.data("apkdownloadurl");e({urlScheme:l,intentURI:d,appStoreUrl:s,apkDownloadUrl:c})}}),setTimeout(function(){s.css("transform","translate3d(0, "+r+"px, 0)");var t=s.css("transform");t||(d=!1,s.css("top","0px")),i.isWeixin()||1!=n.get("sjtg")||$(".js-wakeup-app-download").trigger("click")},1e3)}),define("wap/showcase/goods/goods",["require","wap/components/util/wx_info","text!wap/showcase/goods/templates/goodsCount.html","zenjs/util/count_down","zenjs/util/ua","zenjs/util/args","zenjs/util/jump_to_url","bower_components/pop/popup","wap/showcase/goods/views/present_sku","bower_components/login/main","bower_components/pop/popout_box","wap/showcase/goods/views/store_info","wap/showcase/goods/views/goods_detail","text!wap/showcase/goods/templates/cashback_rule.html","text!wap/showcase/goods/templates/discountCount.html","text!wap/showcase/goods/templates/qrcode.html","bower_components/wakeupapp/main"],function(t){var e=(t("wap/components/util/wx_info"),t("text!wap/showcase/goods/templates/goodsCount.html")),i=t("zenjs/util/count_down"),n=t("zenjs/util/ua"),s=t("zenjs/util/args"),o=t("zenjs/util/jump_to_url"),a=t("bower_components/pop/popup"),r=t("wap/showcase/goods/views/present_sku"),l=t("bower_components/login/main"),d=t("bower_components/pop/popout_box"),c=t("wap/showcase/goods/views/store_info"),h=t("wap/showcase/goods/views/goods_detail"),u=t("text!wap/showcase/goods/templates/cashback_rule.html"),p=t("text!wap/showcase/goods/templates/discountCount.html"),f=t("text!wap/showcase/goods/templates/qrcode.html");t("bower_components/wakeupapp/main");var m=window._global,g=Backbone.View.extend({el:"body",cashBackRuleTpl:_.template(u),events:{"click .js-add-cart":"onAddCartClicked","click .js-select-sku":"onSelectSkuClicked","click .js-select-delivery":"onSelectDeliveryClicked","click .js-buy-it":"onBuyItClicked","click .js-points-btn":"onPointsBtnClicked","click .js-add-gift":"onGiftClicked","click .js-trade-reward":"onRewardArrowClicked","click .js-promotion-status":"onPromotionArrowClicked","click .js-add-wish":"onAddWishClicked","click .js-add-wish-btn":"onAddWishClicked","click .js-added-wish-btn":"onAddedWishClicked","click .js-get-present":"onGetPresent","click .js-promotion-rule":"onShowCashbackRule"},initialize:function(t){var e=this;this.alias=t.alias,this.buyConfig=t.buyConfig,this.qrcodeData=t.qrcodeData;this.sku=m.sku;return this.goodsId=m.goods_id,this.activityAlias=m.activity_alias,this.fullPage=this.$(".wap-page-goods"),this.imageSwiper=this.$(".js-image-swiper"),this.taoInfo=this.$(".custom-go-tao"),this.returnBtn=this.$(".js-butn-return"),this.buyBtn=this.$(".js-buy-it"),this.confirmBtn=this.$(".js-confirm-it"),this.componentsContainer=this.$(".js-components-container"),this.bottomOpts=this.$(".js-bottom-opts"),this.buyGuide=this.$(".js-buy-guide"),this.nAddWish=this.$(".js-add-wish"),this.nAddWishBtn=this.$(".js-wish-btn"),this.nGlobalWishBtn=this.$("#global-wish"),this.nSkuLabel=this.$(".js-sku-label"),this.nSkuValue=this.$(".js-sku-value"),this.nVipWishBtnGroup=this.$(".js-wish-btn-group"),this.nPointsBtn=this.$(".js-points-btn"),this.asyncs=t.asyncMap||{},this.storeInfoView=new c({el:this.$(".js-store-info")}).render(),this.goodsDetailView=new h({el:this.$(".js-detail-container"),sold_num:(m.sku||{}).sold_num,isShowRecord:m.buy_record,isShowReview:m.customer_reviews,asyncs:this.asyncs}).render(),this.initGoodsQrCode(),Backbone.EventCenter=Backbone.EventCenter||_.extend({},Backbone.Events),Backbone.EventCenter.on("active",_(this.onSkuChanged).bind(this)),this.initPromotionStatus(),m.isWishOpen?void $._ajax({url:"/v2/trade/wish/IsAdded.json?kdt_id="+m.kdt_id||0,type:"POST",data:{goods_ids:[this.goodsId]},dataType:"json",success:function(t){var i=t.code,n=(t.data||{})[e.goodsId]||{};t.msg;0==i&&(e.nVipWishBtnGroup.length&&(e.nVipWishBtnGroup.removeClass("hide"),n.isWishAdded&&e.nAddWishBtn.addClass("js-added-wish-btn").removeClass("js-add-wish-btn").text("请TA来买单")),n.isWishOpen&&e.nAddWish.removeClass("hide"),n.isWishAdded&&e.nAddWish.addClass("wish-added"))}}):this},initPromotionStatus:function(){this.isNodeInline(this.$(".js-promotion-info")[0])&&this.$(".js-arrow-down").removeClass("arrow")},isNodeInline:function(t){if(!t)return!1;var e=document.createElement("div"),i=0,n=t.clientWidth,s=t.clientHeight;return e.style.position="absolute",e.style.whiteSpace="normal",e.style.width=n,e.style.top="-9999px",e.innerHTML=t.innerHTML,t.insertBefore(e,t.firstChild),i=e.clientHeight,e.parentNode.removeChild(e),e=null,s>=i},initCountdown:function(){var t=this,n=$(".js-mini-counter"),s=$(".js-activity-tips"),o="started"==s.data("status");if(n.length||o){if(n.length){var a=new i;a.run({seconds:n.data("countdown"),onTimeChange:function(t){n.html(_.template(e)({data:t||{}}))},step:"second",onTimeChangeEnd:function(){t.$(".js-info-wrapper").hide(),t.$(".js-to-start").addClass("hide"),t.$(".js-normal-btns").removeClass("hide")}})}if(o){var r=new i,l=s.find(".js-discount-time");r.run({seconds:l.data("countdown"),onTimeChange:function(t){l.html(_.template(p)({data:t||{}}))},step:"second",onTimeChangeEnd:function(){s.hide()}})}}},buyAction:function(t,e){if(this.buyConfig){window.Utils.getWxInfo()||{};return this.buyConfig.isAdmin&&!this.buyConfig.isMobile?(motify.log("预览不支持进行购买，<br />实际效果请在手机上进行。",5e3),!1):this.buyConfig.no_fans_buy?(setTimeout(function(){window.showGuide&&window.showGuide("follow",{goods:!0})},400),!1):void this.trigger(t,e)}},onRewardArrowClicked:function(t){var e=this.$(".js-arrow-down");e.hasClass("arrow-down")?(e.removeClass("arrow-down"),this.$(".js-trade-reward-info").addClass("hide-part-text")):(e.addClass("arrow-down"),this.$(".js-trade-reward-info").removeClass("hide-part-text"))},onPromotionArrowClicked:function(){var t=this.$(".js-arrow-down");t.hasClass("arrow-down")?(t.removeClass("arrow-down"),this.$(".js-promotion-info").addClass("hide-part-text")):(t.addClass("arrow-down"),this.$(".js-promotion-info").removeClass("hide-part-text"))},onBuyItClicked:function(t){return t.preventDefault(),t.stopPropagation(),$(t.target).prop("disabled")?!1:void this.buyAction("buy",t)},onAddCartClicked:function(t){return t.preventDefault(),t.stopPropagation(),$(t.target).prop("disabled")?!1:void this.buyAction("addcart",t)},onPointsBtnClicked:function(t){return t.preventDefault(),t.stopPropagation(),$(t.target).prop("disabled")?!1:void this.buyAction("points",t)},onSelectSkuClicked:function(t){return t.preventDefault(),t.stopPropagation(),$(t.target).prop("disabled")?!1:this.buyConfig.no_fans_buy?(setTimeout(function(){window.showGuide&&window.showGuide("follow",{goods:!0})},400),!1):void this.trigger("selectsku",t)},onSelectDeliveryClicked:function(t){var e=$(t.currentTarget).data("delivery").split(",");return t.preventDefault(),t.stopPropagation(),$(t.target).prop("disabled")?!1:void this.trigger("selectdelivery",{delivery:e})},onAddWishClicked:function(t){t.preventDefault(),t.stopPropagation();var e=this;this.nAddWish.hasClass("wish-added")?($._ajax({url:"/v2/trade/wish/list.json?kdt_id="+m.kdt_id,type:"DELETE",dataType:"json",cache:!1,timeout:15e3,data:{goods_id:this.goodsId},beforeSend:function(){e.isAjaxing=!0},success:function(t){0==t.code?(e.nAddWish.removeClass("wish-added"),motify.log("取消成功"),e.nAddWishBtn.removeClass("js-added-wish-btn").addClass("js-add-wish-btn").text("我想要"),window.eventHandler.trigger("wish:add",!1)):motify.log(t.msg),e.isAjaxing=!1},error:function(t,i,n){e.isAjaxing=!1}}),window.Logger&&window.Logger.log({fm:"click",title:"add_wish"})):this.buyAction("add-wish",t)},onAddedWishClicked:function(){window.location.href=m.url.trade+"/wxpay/wish?kdt_id="+m.kdt_id},onGiftClicked:function(t){t.preventDefault(),t.stopPropagation(),this.buyAction("gift",t)},onGetPresent:function(t){t.preventDefault(),t.stopPropagation();var e=(m.sku||{}).messages||[],i=this;e.length?new a({contentViewClass:r,className:"sku-layout sku-box-shadow",contentViewOptions:{messages:e,onGetPresentClicked:function(t){i.getPresentToServer(t.postData)}}}).render().show():this.getPresentToServer()},onShowCashbackRule:function(){var t={cashBack:$("#cash-back-str").html().trim(),meetReduce:$("#meet-reduce-str").html().trim()};if(0!==t.cashBack.length||0!==t.meetReduce.length){var e=this.cashBackRuleTpl(t);new d({html:e,transparent:".8"}).render().show()}},onSkuChanged:function(t){var e=t.activedSkus||[],i=m.sku?m.sku.tree:[],n=[],s=[];_.each(i,function(t){var i=t.k_s,o=t.k;_.each(e,function(e){if(e.k_s===i){var s=e.v_id;_.each(t.v,function(t){s===t.id&&(n.push('<span class="sku-item">'+t.name+"</span>"),o="")})}}),o&&s.push('<span class="sku-item">'+o+"</span>")}),s.length>0?(this.nSkuLabel.html("选择"),this.nSkuValue.html(s.join(""))):(this.nSkuLabel.html("已选"),this.nSkuValue.html(n.join("")))},checkLogin:function(t,e){if(m.need_ajax_login){var i=new d({contentViewClass:l,contentViewOptions:{afterLogin:function(n){m.need_ajax_login=!1,i.hide(),t(e)}}});return void i.render().show()}t(e)},getPresentToServer:function(){var t=function(t){var e=window._global,i=_.extend({goods_id:e.goods_id,num:1,sku_id:e.sku.collection_id,price:e.sku.price,points_price:""},t),n={postage:e.postage,use_wxpay:0,activity_alias:e.activity_alias,activity_type:e.activity_type,activity_id:e.activity_id,order_from:"",kdt_id:e.kdt_id};$._ajax({url:"/v2/trade/common/cache.json",type:"POST",dataType:"json",cache:!1,data:{goodsList:JSON.stringify([i]),common:JSON.stringify(n)},beforeSend:function(){motify.log("提交成功，跳转中…")},success:function(t){var i=t.code,n=t.data,a=window._global.url.trade+n.url;0===i?(a=s.add(a,{showwxpaytitle:1,kdt_id:e.kdt_id,book_key:n.key}),o(a)):motify.log(t.msg)},error:function(t){motify.log("请求出错，请重试！")}})};return function(e){this.checkLogin(t,e)}}(),initGoodsQrCode:function(){var t={kdt_id:m.kdt_id,alias:this.alias||m.alias,type:"goods"},e=m.url.wap;this.qrcodeData&&this.qrcodeData.type&&this.qrcodeData.img?$("#js-qrcode-container").html(_.template(f)(this.qrcodeData)):!n||n.isMobile()&&!n.isIPad()||$._ajax({url:e+"/common/url/goods.jsonp",type:"GET",dataType:"jsonp",cache:!1,data:t,success:function(t){var e=_.template(f);0===t.code?$("#js-qrcode-container").html(e(t.data)):motify.log(t.msg)},error:function(t){motify.log("二维码生成失败，请重试～～")}})},scrollToTitle:function(){var t=$(".custom-go-tao").offset().top;setTimeout(function(){window.scrollTo(0,t)},10)},wishAdded:function(){this.nAddWish.addClass("wish-added"),this.nAddWishBtn.addClass("js-added-wish-btn").removeClass("js-add-wish-btn").text("请TA来买单")},render:function(t){var e=this.$(".js-trade-reward"),i=this.$(".js-trade-reward-info"),n=e.width(),s=$.trim(i.text());return n<75+11*s.length&&this.$(".js-arrow-down").removeClass("hide"),this.initCountdown(),this}});return g}),define("text!wap/showcase/delivery/templates/delivery.html",[],function(){return'<h1 class="popup-delivery-title">支持以下配送方式<i class="popup-close js-close"></i></h1>\n<form class="popup-delivery-form js-delivery-form">\n    <% _.each(delivery, function(item, index) { %>\n        <label class="popup-delivery-item">\n            <span class="delivery-text"><%= item.text %></span>\n        </label>\n    <% }); %>\n</form>'}),define("wap/showcase/delivery/main",["text!wap/showcase/delivery/templates/delivery.html"],function(t){var e=Backbone.View.extend({templates:_.template(t),initialize:function(t){t=t||{},this.renderData=t.renderData||{},this.selectedValue=this.renderData.selectedValue||""},render:function(t){return t=t||{},this.$el.html(this.templates($.extend({},this.renderData,{selectedValue:this.selectedValue}))),this}});return e}),define("text!wap/showcase/goods/templates/recommend_goods.html",[],function(){return'<div class="js-recommend">\n	<p class="center font-size-14 c-black" style="padding: 5px 0;margin-top: 10px;">更多精选商品</p>\n\n	<div class="js-recommend-goods-list"></div>\n\n	<p class="center" style="margin: 10px 0 20px;">\n	    <a href="<%= window._global.url.wap %>/showcase/homepage?kdt_id=<%= window._global.kdt_id %>" class="center btn btn-white btn-xsmall font-size-14 " style="padding:8px 26px;">进店逛逛></a>\n	</p>\n</div>\n';
}),define("text!wap/showcase/goods/templates/points_quota_tpl.html",[],function(){return'<div class="quota">每人限兑<%= quota %>件</div>\n'}),require(["zenjs/util/args","wap/showcase/goods/goods","wap/showcase/delivery/main","bower_components/pop/popup","text!wap/showcase/goods/templates/recommend_goods.html","text!wap/showcase/goods/templates/points_quota_tpl.html","zenjs/events","bower_components/wakeupapp/main"],function(t,e,i,n,s,o,a){var r=(window.Logger,window._global),l={goods:{goods_recommend:!r.is_snap,tabber:!0,goods_detail:!0},fast_goods_detail:{tabber:!0}},d=Backbone.View.extend({initialize:function(i){var n=this;this.buyConfig={permissions:{wxPay:r.wxpay_env},isAdmin:r.is_owner_team,isMobile:r.is_mobile,team_certificate:r.team_certificate,no_fans_buy:r.no_fans_buy};var s=window._global.page_type||"goods";if(this.asyncs=l[s]||{},this.goodsView=new e({el:$("body"),buyConfig:this.buyConfig,asyncMap:this.asyncs}).render(),window.eventHandler=window.eventHandler||new a,window.eventHandler.on("wish:add",function(t){("undefined"==typeof t||t)&&n.goodsView.wishAdded()}),this.listenTo(this.goodsView,"buy",this.buy),this.listenTo(this.goodsView,"addcart",this.addCart),this.listenTo(this.goodsView,"selectsku",this.selectSku),this.listenTo(this.goodsView,"selectdelivery",this.selectDelivery),this.listenTo(this.goodsView,"gift",this.gift),this.listenTo(this.goodsView,"add-wish",this.addWish),this.listenTo(this.goodsView,"points",this.points),"true"!=t.get("showsku")||r.is_owner_team&&!r.is_mobile||$(".js-bottom-opts button").prop("disabled")||n.$(".js-buy-it").click(),"true"==t.get("dal")){var o=$("a,span");o.on("click",function(t){return $(t.target).hasClass("js-cancal-disable-link")?void 0:(t.preventDefault(),t.stopPropagation(),!1)}),$(".js-select-sku.sku-item").removeClass("js-select-sku"),$(".js-review-tabber-content").on("click",function(t){return t.preventDefault(),t.stopPropagation(),!1}),o.css("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)")}0===r.sku.stock_num&&$(".js-im-icon").css("bottom",84)},render:function(){return this.asyncs.goods_recommend?("reduce"===t.get("pagetype")||"wxd"!=t.get("kdtfrom")&&!r.goods_recommend||$._ajax({url:"/v2/showcase/goods/recommendgoodslist.json",type:"GET",dataType:"json",data:{alias:r.alias,count:10,kdt_id:r.kdt_id},success:function(t){var e=t.code,i=t.data;if(0===e){var n=i.html||"";if(n){var o=$(_.template(s)());o.find(".js-recommend-goods-list").append(n),o.find(".js-goods-list-loading").remove(),o.find(".js-goods-list").css("visibility","visible"),$(".content-body").append(o),$&&$.fn&&$.fn.lazyload&&o.find(".js-goods-lazy").goodsLazyLoad()}}}}),this):this},gift:function(){this.displaySku({isAddCart:!1,isGift:!0})},goods:function(){this.popupView&&this.popupView.hide()},wishAdded:function(){this.goodsView.wishAdded()},buy:function(){this.displaySku({isAddCart:!1,multiBtn:r.pointsGoods?!0:!1})},addCart:function(){this.displaySku({isAddCart:!0,multiBtn:!1})},selectSku:function(){this.displaySku({multiBtn:!0})},selectDelivery:function(t){this.displayDelivery(t)},points:function(){var t=r.pointsGoods,e=t&&t.quota,i=t&&t.quota_used;return 0>=e-i?void window.motify.log("该商品每人限兑"+e+"件<br />您已兑换"+i+"件"):void this.displayPointsSku({isAddCart:!1,multiBtn:!1})},addWish:function(){this.displaySku({isAddWish:!0,isAddCart:!1,multiBtn:!1})},displayDelivery:function(t){var e=this;if(i){var s={delivery:{}};t.delivery.forEach(function(t,e){var i=t.split("|"),n=i[0],o=i[1];s.delivery[n]={text:o},0===e&&(s.selectedValue=n)}),this.deliveryPopupView||(this.deliveryPopupView=new n({contentViewClass:i,contentViewOptions:{renderData:s},transparent:.8,doNotRemoveOnHide:!0})),this.deliveryPopupView.render().show()}else setTimeout(function(){e.displayDelivery(t)},100)},displayPointsSku:function(t){var e=this;if(window.BuyView){var i=r,s=i.pointsGoods;this.pointsPopupView=new n({contentViewClass:window.BuyView,className:"sku-layout sku-box-shadow",onFinishHide:function(){t.isAddWish&&window.eventHandler&&window.eventHandler.trigger("wishScrollEnd")},contentViewOptions:{logURL:i.logURL,baseUrl:i.url.wap,need_ajax_login:i.need_ajax_login,wxpay_env:i.wxpay_env,isCartBtnHide:i.hide_shopping_cart,quotaTpl:o},transparent:.8}).render({sku:s.goods_sku,points_goods:s,goods_info:r.goods_info,isPoints:!0,isAddCart:t.isAddCart,isAddWish:t.isAddWish,isMultiBtn:t.multiBtn,goods_id:s.goods_id,postage:i.postage,activity_alias:i.activity_alias,activity_id:i.activity_id,activity_type:i.points_activity_type,quota:s.quota,quota_used:s.quota_used,activity:r.activity,isGift:t.isGift,is_virtual:+r.is_virtual>0}).show()}else setTimeout(function(){e.displayPointsSku(t)},100)},displaySku:function(t){var e=this;if(window.BuyView){var i=r;this.popupView||(this.popupView=new n({contentViewClass:window.BuyView,className:"sku-layout sku-box-shadow",doNotRemoveOnHide:!0,onFinishHide:function(){t.isAddWish&&window.eventHandler&&window.eventHandler.trigger("wishScrollEnd")},contentViewOptions:{logURL:i.logURL,baseUrl:i.url.wap,need_ajax_login:i.need_ajax_login,wxpay_env:i.wxpay_env,isCartBtnHide:i.hide_shopping_cart},transparent:.8})),this.popupView.render({sku:i.sku,goods_info:r.goods_info,isAddCart:t.isAddCart,isAddWish:t.isAddWish,isMultiBtn:t.multiBtn,goods_id:i.goods_id,postage:i.postage,activity_alias:i.activity_alias,activity_id:i.activity_id,activity_type:i.activity_type,quota:i.quota,quota_used:i.quota_used,activity:r.activity,isGift:t.isGift,is_virtual:+r.is_virtual>0}).show()}else setTimeout(function(){e.displaySku(t)},100)}});new d({el:$("body")}).render();var c="";$("body").on("click",".js-goto-luckymoney",function(){var t=function(){window.location.href=c};c?t():$._ajax({url:"/v2/fenxiao/77/hongbao.json",method:"get",data:{alias:r.teamAlias},success:function(e){0===e.code?(c=e.data,t()):window.motify.log("当前人数过多，领取失败，请重新领取")}})})}),define("main",function(){});